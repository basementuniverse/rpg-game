(()=>{var t={865:t=>{Math.floatEquals=(t,e,r=Number.EPSILON)=>Math.abs(t-e)<r,Math.clamp=(t,e=0,r=1)=>t<e?e:t>r?r:t,Math.frac=t=>t>=0?t-Math.floor(t):t-Math.ceil(t),Math.lerp=(t,e,r)=>t+(e-t)*r,Math.unlerp=(t,e,r)=>(r-t)/(e-t),Math.blerp=(t,e,r,n,a,o)=>Math.lerp(Math.lerp(t,e,a),Math.lerp(r,n,a),o),Math.remap=(t,e,r,n,a)=>n+(t-e)*(a-n)/(r-e),Math.smoothstep=(t,e,r)=>Math.lerp(t,e,3*Math.pow(r,2)-2*Math.pow(r,3)),Math.radians=t=>Math.PI/180*t,Math.degrees=t=>180/Math.PI*t,Math.randomBetween=(t,e)=>Math.random()*(e-t)+t,Math.randomIntBetween=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,Math.cltRandom=(t=.5,e=.5,r=2)=>{let n=0;for(let t=r;t--;)n+=Math.random();return t+(n-r/2)/(r/2)*e},Math.cltRandomInt=(t,e)=>Math.floor(t+Math.cltRandom(.5,.5,2)*(e+1-t)),Math.weightedRandom=t=>{let e=t.reduce(((t,e)=>t+e),0),r=0;const n=Math.random()*e;for(;e>n;)e-=t[r++];return r-1},Math.lerpArray=(t,e,r=Math.lerp)=>{const n=e*(t.length-1),a=Math.clamp(Math.trunc(n),0,t.length-1);return r(t[a]||0,t[a+1]||0,Math.frac(n))},Math.dot=(t,e)=>t.reduce(((t,r,n)=>t+r*e[n]),0),Array.times=(t,e)=>Array(e).fill(0).map(((e,r)=>t(r))),Array.range=t=>Array.times((t=>t),t),Object.defineProperty(Array.prototype,"at",{value:function(t){const e=this.length;return this[t<0?e-Math.abs(t+1)%e-1:t%e]}}),Object.defineProperty(Array.prototype,"chunk",{value:function(t){return Array.times((e=>this.slice(e*t,e*t+t)),Math.ceil(this.length/t))}}),Object.defineProperty(Array.prototype,"shuffle",{value:function(){return this.map((t=>[Math.random(),t])).sort(((t,e)=>t[0]-e[0])).map((t=>t[1]))}});const e=(t,e)=>t||e?"object"==typeof t?{x:t.x||0,y:t.y||0}:null==e?{x:t,y:t}:{x:t,y:e}:{x:0,y:0};e.components=t=>[t.x,t.y],e.ux=()=>e(1,0),e.uy=()=>e(0,1),e.add=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),e.mul=(t,e)=>({x:t.x*e,y:t.y*e}),e.sub=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),e.len=t=>Math.sqrt(t.x*t.x+t.y*t.y),e.manhattan=t=>Math.abs(t.x)+Math.abs(t.y),e.nor=t=>{let r=e.len(t);return r?{x:t.x/r,y:t.y/r}:e()},e.dot=(t,e)=>t.x*e.x+t.y*e.y,e.rot=(t,e)=>{let r=Math.sin(e),n=Math.cos(e);return{x:n*t.x-r*t.y,y:r*t.x+n*t.y}},e.eq=(t,e)=>t.x===e.x&&t.y===e.y,e.rad=t=>Math.atan2(t.y,t.x),e.cpy=t=>e(t),e.map=(t,e)=>({x:e(t.x,"x"),y:e(t.y,"y")}),e.str=(t,e=", ")=>`${t.x}${e}${t.y}`;const r=(t=4,e=4,r=[])=>({m:t,n:e,entries:r.concat(Array(t*e).fill(0)).slice(0,t*e)});r.identity=t=>r(t,t,Array(t*t).fill(0).map(((e,r)=>+(Math.floor(r/t)===r%t)))),r.get=(t,e,r)=>t.entries[r-1+(e-1)*t.n],r.set=(t,e,r,n)=>{t.entries[r-1+(e-1)*t.n]=n},r.row=(t,e)=>{const r=(e-1)*t.n;return t.entries.slice(r,r+t.n)},r.col=(t,e)=>Array.times((n=>r.get(t,n+1,e)),t.m),r.add=(t,e)=>t.m===e.m&&t.n===e.n&&r.map(t,((t,r)=>t+e.entries[r])),r.sub=(t,e)=>t.m===e.m&&t.n===e.n&&r.map(t,((t,r)=>t-e.entries[r])),r.mul=(t,e)=>{if(t.n!==e.m)return!1;const n=r(t.m,e.n);for(let a=1;a<=t.m;a++)for(let o=1;o<=e.n;o++)r.set(n,a,o,Math.dot(r.row(t,a),r.col(e,o)));return n},r.scale=(t,e)=>r.map(t,(t=>t*e)),r.trans=t=>r(t.n,t.m,Array.times((e=>r.col(t,e+1)),t.n).flat()),r.minor=(t,e,n)=>{if(t.m!==t.n)return!1;const a=[];for(let o=1;o<=t.m;o++)if(o!==e)for(let e=1;e<=t.n;e++)e!==n&&a.push(r.get(t,o,e));return r(t.m-1,t.n-1,a)},r.det=t=>{if(t.m!==t.n)return!1;if(1===t.m)return t.entries[0];if(2===t.m)return t.entries[0]*t.entries[3]-t.entries[1]*t.entries[2];let e=0,n=1;for(let a=1;a<=t.n;a++)e+=n*t.entries[a-1]*r.det(r.minor(t,1,a)),n*=-1;return e},r.nor=t=>{if(t.m!==t.n)return!1;const e=r.det(t);return r.map(t,(t=>t*e))},r.adj=t=>{const e=r(t.m,t.n);for(let n=1;n<=t.m;n++)for(let a=1;a<=t.n;a++)r.set(e,n,a,r.det(r.minor(t,n,a)));const n=r.map(e,((t,e)=>t*(e%2?-1:1)));return r.trans(n)},r.inv=t=>{if(t.m!==t.n)return!1;const e=r.det(t);return 0!==e&&r.scale(r.adj(t),1/e)},r.eq=(t,e)=>t.m===e.m&&t.n===e.n&&r.str(t)===r.str(e),r.cpy=t=>r(t.m,t.n,[...t.entries]),r.map=(t,e)=>r(t.m,t.n,t.entries.map(e)),r.str=(t,e=", ",r="\n")=>t.entries.chunk(t.n).map((t=>t.join(e))).join(r),t.exports={vec:e,mat:r}},221:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(865);e.default=class{constructor(t){this.container=null,this.container=t}initialise(){console.log("Hello, world! Make sure libraries are loaded: "+n.vec.str(n.vec.add(n.vec(1,2),n.vec(3,4))))}}},607:(t,e,r)=>{"use strict";new(r(221).default)(document.querySelector(".main-container")).initialise()}},e={};!function r(n){if(e[n])return e[n].exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ycGctZ2FtZS8uL2xpYi9jb21tb24uanMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvR2FtZS50cyIsIndlYnBhY2s6Ly9ycGctZ2FtZS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9ycGctZ2FtZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ycGctZ2FtZS93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOlsiTWF0aCIsImZsb2F0RXF1YWxzIiwiYSIsImIiLCJwIiwiTnVtYmVyIiwiRVBTSUxPTiIsImFicyIsImNsYW1wIiwibWluIiwibWF4IiwiZnJhYyIsImZsb29yIiwiY2VpbCIsImxlcnAiLCJpIiwidW5sZXJwIiwiYmxlcnAiLCJjMDAiLCJjMTAiLCJjMDEiLCJjMTEiLCJpeCIsIml5IiwicmVtYXAiLCJhMSIsImEyIiwiYjEiLCJiMiIsInNtb290aHN0ZXAiLCJwb3ciLCJyYWRpYW5zIiwiZGVncmVlcyIsIlBJIiwicmFuZG9tQmV0d2VlbiIsInJhbmRvbSIsInJhbmRvbUludEJldHdlZW4iLCJjbHRSYW5kb20iLCJtdSIsInNpZ21hIiwic2FtcGxlcyIsInRvdGFsIiwiY2x0UmFuZG9tSW50Iiwid2VpZ2h0ZWRSYW5kb20iLCJ3IiwicmVkdWNlIiwibiIsInIiLCJsZXJwQXJyYXkiLCJmIiwicyIsImxlbmd0aCIsInRydW5jIiwiZG90IiwidiIsIkFycmF5IiwidGltZXMiLCJmaWxsIiwibWFwIiwiXyIsInJhbmdlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b3R5cGUiLCJ2YWx1ZSIsImwiLCJ0aGlzIiwic2xpY2UiLCJzb3J0IiwidmVjIiwieCIsInkiLCJjb21wb25lbnRzIiwidXgiLCJ1eSIsImFkZCIsIm11bCIsInN1YiIsImxlbiIsInNxcnQiLCJtYW5oYXR0YW4iLCJub3IiLCJyb3QiLCJzaW4iLCJjIiwiY29zIiwiZXEiLCJyYWQiLCJhdGFuMiIsImNweSIsInN0ciIsIm1hdCIsIm0iLCJlbnRyaWVzIiwiY29uY2F0IiwiaWRlbnRpdHkiLCJnZXQiLCJqIiwic2V0Iiwicm93IiwiY29sIiwicmVzdWx0Iiwic2NhbGUiLCJ0cmFucyIsImZsYXQiLCJtaW5vciIsImlpIiwiamoiLCJwdXNoIiwiZGV0Iiwic2lnbiIsImQiLCJhZGoiLCJtaW5vcnMiLCJjb2ZhY3RvcnMiLCJpbnYiLCJtcyIsIm5zIiwiY2h1bmsiLCJqb2luIiwibW9kdWxlIiwiZXhwb3J0cyIsImNvbnRhaW5lciIsImNvbnNvbGUiLCJsb2ciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbml0aWFsaXNlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyJdLCJtYXBwaW5ncyI6InFCQWNBQSxLQUFLQyxZQUFjLENBQUNDLEVBQUdDLEVBQUdDLEVBQUlDLE9BQU9DLFVBQVlOLEtBQUtPLElBQUlMLEVBQUlDLEdBQUtDLEVBU25FSixLQUFLUSxNQUFRLENBQUNOLEVBQUdPLEVBQU0sRUFBR0MsRUFBTSxJQUFNUixFQUFJTyxFQUFNQSxFQUFPUCxFQUFJUSxFQUFNQSxFQUFNUixFQU92RUYsS0FBS1csS0FBT1QsR0FBS0EsR0FBSyxFQUFJQSxFQUFJRixLQUFLWSxNQUFNVixHQUFLQSxFQUFJRixLQUFLYSxLQUFLWCxHQVM1REYsS0FBS2MsS0FBTyxDQUFDWixFQUFHQyxFQUFHWSxJQUFNYixHQUFLQyxFQUFJRCxHQUFLYSxFQVN2Q2YsS0FBS2dCLE9BQVMsQ0FBQ2QsRUFBR0MsRUFBR1ksS0FBT0EsRUFBSWIsSUFBTUMsRUFBSUQsR0FZMUNGLEtBQUtpQixNQUFRLENBQUNDLEVBQUtDLEVBQUtDLEVBQUtDLEVBQUtDLEVBQUlDLElBQU92QixLQUFLYyxLQUFLZCxLQUFLYyxLQUFLSSxFQUFLQyxFQUFLRyxHQUFLdEIsS0FBS2MsS0FBS00sRUFBS0MsRUFBS0MsR0FBS0MsR0FXekd2QixLQUFLd0IsTUFBUSxDQUFDVCxF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Y2VzQ29udGVudCI6WyIvKipcbiAqIEBvdmVydmlldyBBIGxpYnJhcnkgb2YgdXNlZnVsIGZ1bmN0aW9uc1xuICogQGF1dGhvciBHb3Jkb24gTGFycmlnYW5cbiAqL1xuXG4vKiogQGNsYXNzIE1hdGggKi9cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gbnVtYmVycyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICogQHBhcmFtIHtudW1iZXJ9IGEgTnVtYmVyIGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIE51bWJlciBiXG4gKiBAcGFyYW0ge251bWJlcn0gW3A9TnVtYmVyLkVQU0lMT05dIFRoZSBwcmVjaXNpb24gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbnVtYmVycyBhIGFuZCBiIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKi9cbk1hdGguZmxvYXRFcXVhbHMgPSAoYSwgYiwgcCA9IE51bWJlci5FUFNJTE9OKSA9PiBNYXRoLmFicyhhIC0gYikgPCBwO1xuXG4vKipcbiAqIENsYW1wIGEgbnVtYmVyIGJldHdlZW4gbWluIGFuZCBtYXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIFRoZSBudW1iZXIgdG8gY2xhbXBcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gVGhlIG1pbmltdW0gdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggVGhlIG1heGltdW0gdmFsdWVcbiAqIEByZXR1cm4ge251bWJlcn0gQSBjbGFtcGVkIG51bWJlclxuICovXG5NYXRoLmNsYW1wID0gKGEsIG1pbiA9IDAsIG1heCA9IDEpID0+IGEgPCBtaW4gPyBtaW4gOiAoYSA+IG1heCA/IG1heCA6IGEpO1xuXG4vKipcbiAqIEdldCB0aGUgZnJhY3Rpb25hbCBwYXJ0IG9mIGEgbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgbnVtYmVyIGZyb20gd2hpY2ggdG8gZ2V0IHRoZSBmcmFjdGlvbmFsIHBhcnRcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGZyYWN0aW9uYWwgcGFydCBvZiB0aGUgbnVtYmVyXG4gKi9cbk1hdGguZnJhYyA9IGEgPT4gYSA+PSAwID8gYSAtIE1hdGguZmxvb3IoYSkgOiBhIC0gTWF0aC5jZWlsKGEpO1xuXG4vKipcbiAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiBhIGFuZCBiXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgbWluaW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBtYXhpbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIGludGVycG9sYXRpb24gdmFsdWUsIHNob3VsZCBiZSBpbiB0aGUgaW50ZXJ2YWwgWzAsIDFdXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuIGludGVycG9sYXRlZCB2YWx1ZSBpbiB0aGUgaW50ZXJ2YWwgW2EsIGJdXG4gKi9cbk1hdGgubGVycCA9IChhLCBiLCBpKSA9PiBhICsgKGIgLSBhKSAqIGk7XG5cbi8qKlxuICogR2V0IHRoZSBwb3NpdGlvbiBvZiBpIGJldHdlZW4gYSBhbmQgYlxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIG1pbmltdW0gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgbWF4aW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gdGhlIGludGVydmFsIFthLCBiXVxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgcG9zaXRpb24gb2YgaSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuTWF0aC51bmxlcnAgPSAoYSwgYiwgaSkgPT4gKGkgLSBhKSAvIChiIC0gYSk7XG5cbi8qKlxuICogRG8gYSBiaWxpbmVhciBpbnRlcnBvbGF0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gYzAwIFRvcC1sZWZ0IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gYzEwIFRvcC1yaWdodCB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGMwMSBCb3R0b20tbGVmdCB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGMxMSBCb3R0b20tcmlnaHQgdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpeCBJbnRlcnBvbGF0aW9uIHZhbHVlIGFsb25nIHhcbiAqIEBwYXJhbSB7bnVtYmVyfSBpeSBJbnRlcnBvbGF0aW9uIHZhbHVlIGFsb25nIHlcbiAqIEByZXR1cm4ge251bWJlcn0gQSBiaWxpbmVhciBpbnRlcnBvbGF0ZWQgdmFsdWVcbiAqL1xuTWF0aC5ibGVycCA9IChjMDAsIGMxMCwgYzAxLCBjMTEsIGl4LCBpeSkgPT4gTWF0aC5sZXJwKE1hdGgubGVycChjMDAsIGMxMCwgaXgpLCBNYXRoLmxlcnAoYzAxLCBjMTEsIGl4KSwgaXkpO1xuXG4vKipcbiAqIFJlLW1hcCBhIG51bWJlciBpIGZyb20gcmFuZ2UgYTEtPmEyIHRvIGIxLT5iMlxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIG51bWJlciB0byByZS1tYXBcbiAqIEBwYXJhbSB7bnVtYmVyfSBhMVxuICogQHBhcmFtIHtudW1iZXJ9IGEyXG4gKiBAcGFyYW0ge251bWJlcn0gYjFcbiAqIEBwYXJhbSB7bnVtYmVyfSBiMlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5NYXRoLnJlbWFwID0gKGksIGExLCBhMiwgYjEsIGIyKSA9PiBiMSArIChpIC0gYTEpICogKGIyIC0gYjEpIC8gKGEyIC0gYTEpO1xuXG4vKipcbiAqIERvIGEgc21vb3RoIGludGVycG9sYXRpb24gYmV0d2VlbiBhIGFuZCBiXG4gKiBAcGFyYW0geyp9IGEgVGhlIG1pbmltdW0gbnVtYmVyXG4gKiBAcGFyYW0geyp9IGIgVGhlIG1heGltdW0gbnVtYmVyXG4gKiBAcGFyYW0geyp9IGkgVGhlIGludGVycG9sYXRpb24gdmFsdWVcbiAqIEByZXR1cm4ge251bWJlcn0gQW4gaW50ZXJwb2xhdGVkIHZhbHVlIGluIHRoZSBpbnRlcnZhbCBbYSwgYl1cbiAqL1xuTWF0aC5zbW9vdGhzdGVwID0gKGEsIGIsIGkpID0+IE1hdGgubGVycChhLCBiLCAzICogTWF0aC5wb3coaSwgMikgLSAyICogTWF0aC5wb3coaSwgMykpO1xuXG4vKipcbiAqIEdldCBhbiBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gZGVncmVlcyBUaGUgYW5nbGUgaW4gZGVncmVlc1xuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYW5nbGUgaW4gcmFkaWFuc1xuICovXG5NYXRoLnJhZGlhbnMgPSBkZWdyZWVzID0+IChNYXRoLlBJIC8gMTgwKSAqIGRlZ3JlZXM7XG5cbi8qKlxuICogR2V0IGFuIGFuZ2xlIGluIGRlZ3JlZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpYW5zIFRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBhbmdsZSBpbiBkZWdyZWVzXG4gKi9cbk1hdGguZGVncmVlcyA9IHJhZGlhbnMgPT4gKDE4MCAvIE1hdGguUEkpICogcmFkaWFucztcblxuLyoqXG4gKiBHZXQgYSByYW5kb20gZmxvYXQgaW4gdGhlIGludGVydmFsIFttaW4sIG1heClcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gSW5jbHVzaXZlIG1pblxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBFeGNsdXNpdmUgbWF4XG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgcmFuZG9tIGZsb2F0IGluIHRoZSBpbnRlcnZhbCBbbWluLCBtYXgpXG4gKi9cbk1hdGgucmFuZG9tQmV0d2VlbiA9IChtaW4sIG1heCkgPT4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xuXG4vKipcbiAqIEdldCBhIHJhbmRvbSBpbnRlZ2VyIGluIHRoZSBpbnRlcnZhbCBbbWluLCBtYXhdXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIEluY2x1c2l2ZSBtaW5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggSW5jbHVzaXZlIG1heFxuICogQHJldHVybiB7bnVtYmVyfSBBIHJhbmRvbSBpbnRlZ2VyIGluIHRoZSBpbnRlcnZhbCBbbWluLCBtYXhdXG4gKi9cbk1hdGgucmFuZG9tSW50QmV0d2VlbiA9IChtaW4sIG1heCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcblxuLyoqXG4gKiBHZXQgYSBub3JtYWxseS1kaXN0cmlidXRlZCByYW5kb20gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gbXUgVGhlIG1lYW4gdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBzaWdtYSBUaGUgc3RhbmRhcmQgZGV2aWF0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gc2FtcGxlcyBUaGUgbnVtYmVyIG9mIHNhbXBsZXNcbiAqIEByZXR1cm4ge251bWJlcn0gQSBub3JtYWxseS1kaXN0cmlidXRlZCByYW5kb20gbnVtYmVyXG4gKi9cbk1hdGguY2x0UmFuZG9tID0gKG11ID0gMC41LCBzaWdtYSA9IDAuNSwgc2FtcGxlcyA9IDIpID0+IHtcbiAgbGV0IHRvdGFsID0gMDtcbiAgZm9yIChsZXQgaSA9IHNhbXBsZXM7IGktLTspIHtcbiAgICB0b3RhbCArPSBNYXRoLnJhbmRvbSgpO1xuICB9XG4gIHJldHVybiBtdSArICh0b3RhbCAtIHNhbXBsZXMgLyAyKSAvIChzYW1wbGVzIC8gMikgKiBzaWdtYTtcbn07XG5cbi8qKlxuICogR2V0IGEgbm9ybWFsbHktZGlzdHJpYnV0ZWQgcmFuZG9tIGludGVnZXIgaW4gdGhlIGludGVydmFsIFttaW4sIG1heF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gSW5jbHVzaXZlIG1pblxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBJbmNsdXNpdmUgbWF4XG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbm9ybWFsbHktZGlzdHJpYnV0ZWQgcmFuZG9tIGludGVnZXJcbiAqL1xuTWF0aC5jbHRSYW5kb21JbnQgPSAobWluLCBtYXgpID0+IE1hdGguZmxvb3IobWluICsgTWF0aC5jbHRSYW5kb20oMC41LCAwLjUsIDIpICogKG1heCArIDEgLSBtaW4pKTtcblxuLyoqXG4gKiBSZXR1cm4gYSB3ZWlnaHRlZCByYW5kb20gaW50ZWdlclxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB3IEFuIGFycmF5IG9mIHdlaWdodHNcbiAqIEByZXR1cm4ge251bWJlcn0gQW4gaW5kZXggZnJvbSB3XG4gKi9cbk1hdGgud2VpZ2h0ZWRSYW5kb20gPSB3ID0+IHtcbiAgbGV0IHRvdGFsID0gdy5yZWR1Y2UoKGEsIGkpID0+IGEgKyBpLCAwKSwgbiA9IDA7XG4gIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogdG90YWw7XG4gIHdoaWxlICh0b3RhbCA+IHIpIHtcbiAgICB0b3RhbCAtPSB3W24rK107XG4gIH1cbiAgcmV0dXJuIG4gLSAxO1xufTtcblxuLyoqXG4gKiBBbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uXG4gKiBAY2FsbGJhY2sgaW50ZXJwb2xhdGlvbkNhbGxiYWNrXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgbWluaW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBtYXhpbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIGludGVycG9sYXRpb24gdmFsdWUsIHNob3VsZCBiZSBpbiB0aGUgaW50ZXJ2YWwgWzAsIDFdXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gdGhlIGludGVydmFsIFthLCBiXVxuICovXG5cbi8qKlxuICogUmV0dXJuIGFuIGludGVycG9sYXRlZCB2YWx1ZSBmcm9tIGFuIGFycmF5XG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGEgQW4gYXJyYXkgb2YgdmFsdWVzIGludGVycG9sYXRlXG4gKiBAcGFyYW0ge251bWJlcn0gaSBBIG51bWJlciBpbiB0aGUgaW50ZXJ2YWwgWzAsIDFdXG4gKiBAcGFyYW0ge2ludGVycG9sYXRpb25DYWxsYmFja30gW2Y9TWF0aC5sZXJwXSBUaGUgaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiB0byB1c2VcbiAqIEByZXR1cm4ge251bWJlcn0gQW4gaW50ZXJwb2xhdGVkIHZhbHVlIGluIHRoZSBpbnRlcnZhbCBbbWluKGEpLCBtYXgoYSldXG4gKi9cbk1hdGgubGVycEFycmF5ID0gKGEsIGksIGYgPSBNYXRoLmxlcnApID0+IHtcbiAgY29uc3QgcyA9IGkgKiAoYS5sZW5ndGggLSAxKTtcbiAgY29uc3QgcCA9IE1hdGguY2xhbXAoTWF0aC50cnVuYyhzKSwgMCwgYS5sZW5ndGggLSAxKTtcbiAgcmV0dXJuIGYoYVtwXSB8fCAwLCBhW3AgKyAxXSB8fCAwLCBNYXRoLmZyYWMocykpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWN0b3JzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGEgVmVjdG9yIGFcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYiBWZWN0b3IgYlxuICogQHJldHVybiB7bnVtYmVyfSBhIOKImSBiXG4gKi9cbk1hdGguZG90ID0gKGEsIGIpID0+IGEucmVkdWNlKChuLCB2LCBpKSA9PiBuICsgdiAqIGJbaV0sIDApO1xuXG4vKiogQGNsYXNzIEFycmF5ICovXG5cbi8qKlxuICogQSBmdW5jdGlvbiBmb3IgZ2VuZXJhdGluZyBhcnJheSB2YWx1ZXNcbiAqIEBjYWxsYmFjayB0aW1lc0NhbGxiYWNrXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgYXJyYXkgaW5kZXhcbiAqIEByZXR1cm4geyp9IFRoZSBhcnJheSB2YWx1ZVxuICovXG5cbi8qKlxuICogUmV0dXJuIGEgbmV3IGFycmF5IHdpdGggbGVuZ3RoIG4gYnkgY2FsbGluZyBmdW5jdGlvbiBmKGkpIG9uIGVhY2ggZWxlbWVudFxuICogQHBhcmFtIHt0aW1lc0NhbGxiYWNrfSBmXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgc2l6ZSBvZiB0aGUgYXJyYXlcbiAqIEByZXR1cm4ge0FycmF5PCo+fVxuICovXG5BcnJheS50aW1lcyA9IChmLCBuKSA9PiBBcnJheShuKS5maWxsKDApLm1hcCgoXywgaSkgPT4gZihpKSk7XG5cbi8qKlxuICogUmV0dXJuIGFuIGFycmF5IGNvbnRhaW5pbmcgbnVtYmVycyAwLT4obiAtIDEpXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgc2l6ZSBvZiB0aGUgYXJyYXlcbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEFuIGFycmF5IG9mIGludGVnZXJzIDAtPihuIC0gMSlcbiAqL1xuQXJyYXkucmFuZ2UgPSBuID0+IEFycmF5LnRpbWVzKGkgPT4gaSwgbik7XG5cbi8qKlxuICogUmV0dXJuIGFycmF5W2ldIHdpdGggcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIHdyYXBwaW5nXG4gKiBAbmFtZSBhdFxuICogQGZ1bmN0aW9uXG4gKiBAbWVtYmVyb2YgQXJyYXkucHJvdG90eXBlXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgcG9zaXRpdmVseS9uZWdhdGl2ZWx5IHdyYXBwZWQgYXJyYXkgaW5kZXhcbiAqIEByZXR1cm4geyp9IEFuIGVsZW1lbnQgZnJvbSB0aGUgYXJyYXlcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2F0Jywge1xuICB2YWx1ZTogZnVuY3Rpb24gKGkpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sZW5ndGg7XG4gICAgcmV0dXJuIHRoaXNbaSA8IDAgPyBsIC0gKE1hdGguYWJzKGkgKyAxKSAlIGwpIC0gMSA6IGkgJSBsXTtcbiAgfVxufSk7XG5cbi8qKlxuICogQ2hvcCBhbiBhcnJheSBpbnRvIGNodW5rcyBvZiBzaXplIG5cbiAqIEBuYW1lIGNodW5rXG4gKiBAZnVuY3Rpb25cbiAqIEBtZW1iZXJvZiBBcnJheS5wcm90b3R5cGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBjaHVuayBzaXplXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTwqPj59IEFuIGFycmF5IG9mIGFycmF5IGNodW5rc1xuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnY2h1bmsnLCB7XG4gIHZhbHVlOiBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBBcnJheS50aW1lcyhpID0+IHRoaXMuc2xpY2UoaSAqIG4sIGkgKiBuICsgbiksIE1hdGguY2VpbCh0aGlzLmxlbmd0aCAvIG4pKTtcbiAgfVxufSk7XG5cbi8qKlxuICogUmFuZG9tbHkgc2h1ZmZsZSBhbiBhcnJheSBpbi1wbGFjZVxuICogQG5hbWUgc2h1ZmZsZVxuICogQGZ1bmN0aW9uXG4gKiBAbWVtYmVyb2YgQXJyYXkucHJvdG90eXBlXG4gKiBAcmV0dXJuIHtBcnJheTwqPn0gVGhlIHNodWZmbGVkIGFycmF5XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdzaHVmZmxlJywge1xuICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChhID0+IFtNYXRoLnJhbmRvbSgpLCBhXSkuc29ydCgoYSwgYikgPT4gYVswXSAtIGJbMF0pLm1hcChhID0+IGFbMV0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBBIDJkIHZlY3RvclxuICogQHR5cGVkZWYge09iamVjdH0gdmVjXG4gKiBAcHJvcGVydHkge251bWJlcn0geCBUaGUgeCBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxuICogQHByb3BlcnR5IHtudW1iZXJ9IHkgVGhlIHkgY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyB2ZWN0b3JcbiAqIEBwYXJhbSB7bnVtYmVyfHZlY30gW3hdIFRoZSB4IGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yLCBvciBhIHZlY3RvciB0byBjb3B5XG4gKiBAcGFyYW0ge251bWJlcn0gW3ldIFRoZSB5IGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXG4gKiBAcmV0dXJuIHt2ZWN9IEEgbmV3IHZlY3RvclxuICogQGV4YW1wbGUgPGNhcHRpb24+VmFyaW91cyB3YXlzIHRvIGluaXRpYWxpc2UgYSB2ZWN0b3I8L2NhcHRpb24+XG4gKiBsZXQgYSA9IHZlYygzLCAyKTsgIC8vICgzLCAyKVxuICogbGV0IGIgPSB2ZWMoNCk7ICAgICAvLyAoNCwgNClcbiAqIGxldCBjID0gdmVjKGEpOyAgICAgLy8gKDMsIDIpXG4gKiBsZXQgZCA9IHZlYygpOyAgICAgIC8vICgwLCAwKVxuICovXG5jb25zdCB2ZWMgPSAoeCwgeSkgPT4gKCF4ICYmICF5ID9cbiAgeyB4OiAwLCB5OiAwIH0gOiAodHlwZW9mIHggPT09ICdvYmplY3QnID9cbiAgICB7IHg6IHgueCB8fCAwLCB5OiB4LnkgfHwgMCB9IDogKHkgPT09IG51bGwgfHwgeSA9PT0gdW5kZWZpbmVkID9cbiAgICAgIHsgeDogeCwgeTogeCB9IDogeyB4OiB4LCB5OiB5IH0pXG4gIClcbik7XG5cbi8qKlxuICogR2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjdG9yIGFzIGFuIGFycmF5XG4gKiBAcGFyYW0ge3ZlY30gYSBUaGUgdmVjdG9yIHRvIGdldCBjb21wb25lbnRzIGZyb21cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSB2ZWN0b3IgY29tcG9uZW50cyBhcyBhbiBhcnJheVxuICovXG52ZWMuY29tcG9uZW50cyA9IGEgPT4gW2EueCwgYS55XTtcblxuLyoqXG4gKiBSZXR1cm4gYSB1bml0IHZlY3RvciAoMSwgMClcbiAqIEByZXR1cm4ge3ZlY30gQSB1bml0IHZlY3RvciAoMSwgMClcbiAqL1xudmVjLnV4ID0gKCkgPT4gdmVjKDEsIDApO1xuXG4vKipcbiAqIFJldHVybiBhIHVuaXQgdmVjdG9yICgwLCAxKVxuICogQHJldHVybiB7dmVjfSBBIHVuaXQgdmVjdG9yICgwLCAxKVxuICovXG52ZWMudXkgPSAoKSA9PiB2ZWMoMCwgMSk7XG5cbi8qKlxuICogQWRkIHZlY3RvcnNcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcGFyYW0ge3ZlY30gYiBWZWN0b3IgYlxuICogQHJldHVybiB7dmVjfSBhICsgYlxuICovXG52ZWMuYWRkID0gKGEsIGIpID0+ICh7IHg6IGEueCArIGIueCwgeTogYS55ICsgYi55IH0pO1xuXG4vKipcbiAqIFNjYWxlIGEgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHtudW1iZXJ9IGIgU2NhbGFyIGJcbiAqIEByZXR1cm4ge3ZlY30gYSAqIGJcbiAqL1xudmVjLm11bCA9IChhLCBiKSA9PiAoeyB4OiBhLnggKiBiLCB5OiBhLnkgKiBiIH0pO1xuXG4vKipcbiAqIFN1YnRyYWN0IHZlY3RvcnNcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcGFyYW0ge3ZlY30gYiBWZWN0b3IgYlxuICogQHJldHVybiB7dmVjfSBhIC0gYlxuICovXG52ZWMuc3ViID0gKGEsIGIpID0+ICh7IHg6IGEueCAtIGIueCwgeTogYS55IC0gYi55IH0pO1xuXG4vKipcbiAqIEdldCB0aGUgbGVuZ3RoIG9mIGEgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHJldHVybiB7bnVtYmVyfSB8YXxcbiAqL1xudmVjLmxlbiA9IGEgPT4gTWF0aC5zcXJ0KGEueCAqIGEueCArIGEueSAqIGEueSk7XG5cbi8qKlxuICogR2V0IHRoZSBsZW5ndGggb2YgYSB2ZWN0b3IgdXNpbmcgdGF4aWNhYiBnZW9tZXRyeVxuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEByZXR1cm4ge251bWJlcn0gfGF8XG4gKi9cbnZlYy5tYW5oYXR0YW4gPSBhID0+IE1hdGguYWJzKGEueCkgKyBNYXRoLmFicyhhLnkpO1xuXG4vKipcbiAqIE5vcm1hbGlzZSBhIHZlY3RvclxuICogQHBhcmFtIHt2ZWN9IGEgVGhlIHZlY3RvciB0byBub3JtYWxpc2VcbiAqIEByZXR1cm4ge3ZlY30gXmFcbiAqL1xudmVjLm5vciA9IGEgPT4ge1xuICBsZXQgbGVuID0gdmVjLmxlbihhKTtcbiAgcmV0dXJuIGxlbiA/IHsgeDogYS54IC8gbGVuLCB5OiBhLnkgLyBsZW4gfSA6IHZlYygpO1xufTtcblxuLyoqXG4gKiBHZXQgYSBkb3QgcHJvZHVjdCBvZiB2ZWN0b3JzXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHt2ZWN9IGIgVmVjdG9yIGJcbiAqIEByZXR1cm4ge251bWJlcn0gYSDiiJkgYlxuICovXG52ZWMuZG90ID0gKGEsIGIpID0+IGEueCAqIGIueCArIGEueSAqIGIueTtcblxuLyoqXG4gKiBSb3RhdGUgYSB2ZWN0b3IgYnkgciByYWRpYW5zXG4gKiBAcGFyYW0ge3ZlY30gYSBUaGUgdmVjdG9yIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHIgVGhlIGFuZ2xlIHRvIHJvdGF0ZSBieSwgbWVhc3VyZWQgaW4gcmFkaWFuc1xuICogQHJldHVybiB7dmVjfSBBIHJvdGF0ZWQgdmVjdG9yXG4gKi9cbnZlYy5yb3QgPSAoYSwgcikgPT4ge1xuICBsZXQgcyA9IE1hdGguc2luKHIpLFxuICAgIGMgPSBNYXRoLmNvcyhyKTtcbiAgcmV0dXJuIHsgeDogYyAqIGEueCAtIHMgKiBhLnksIHk6IHMgKiBhLnggKyBjICogYS55IH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIHZlY3RvcnMgYXJlIGVxdWFsXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHt2ZWN9IGIgVmVjdG9yIGJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdmVjdG9ycyBhIGFuZCBiIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbnZlYy5lcSA9IChhLCBiKSA9PiBhLnggPT09IGIueCAmJiBhLnkgPT09IGIueTtcblxuLyoqXG4gKiBHZXQgdGhlIGFuZ2xlIG9mIGEgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYW5nbGUgb2YgdmVjdG9yIGEgaW4gcmFkaWFuc1xuICovXG52ZWMucmFkID0gYSA9PiBNYXRoLmF0YW4yKGEueSwgYS54KTtcblxuLyoqXG4gKiBDb3B5IGEgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlY30gYSBUaGUgdmVjdG9yIHRvIGNvcHlcbiAqIEByZXR1cm4ge3ZlY30gQSBjb3B5IG9mIHZlY3RvciBhXG4gKi9cbnZlYy5jcHkgPSBhID0+IHZlYyhhKTtcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRvIGNhbGwgb24gZWFjaCBjb21wb25lbnQgb2YgYSB2ZWN0b3JcbiAqIEBjYWxsYmFjayB2ZWN0b3JNYXBDYWxsYmFja1xuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBjb21wb25lbnQgdmFsdWVcbiAqIEBwYXJhbSB7J3gnIHwgJ3knfSBsYWJlbCBUaGUgY29tcG9uZW50IGxhYmVsICh4IG9yIHkpXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXBwZWQgY29tcG9uZW50XG4gKi9cblxuLyoqXG4gKiBDYWxsIGEgZnVuY3Rpb24gb24gZWFjaCBjb21wb25lbnQgb2YgYSB2ZWN0b3IgYW5kIGJ1aWxkIGEgbmV3IHZlY3RvciBmcm9tIHRoZSByZXN1bHRzXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHt2ZWN0b3JNYXBDYWxsYmFja30gZiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBvbiBlYWNoIGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXG4gKiBAcmV0dXJuIHt2ZWN9IFZlY3RvciBhIG1hcHBlZCB0aHJvdWdoIGZcbiAqL1xudmVjLm1hcCA9IChhLCBmKSA9PiAoeyB4OiBmKGEueCwgJ3gnKSwgeTogZihhLnksICd5JykgfSk7XG5cbi8qKlxuICogQ29udmVydCBhIHZlY3RvciBpbnRvIGEgc3RyaW5nXG4gKiBAcGFyYW0ge3ZlY30gYSBUaGUgdmVjdG9yIHRvIGNvbnZlcnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcz0nLCAnXSBUaGUgc2VwYXJhdG9yIHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVjdG9yXG4gKi9cbnZlYy5zdHIgPSAoYSwgcyA9ICcsICcpID0+IGAke2EueH0ke3N9JHthLnl9YDtcblxuLyoqXG4gKiBBIG1hdHJpeFxuICogQHR5cGVkZWYge09iamVjdH0gbWF0XG4gKiBAcHJvcGVydHkge251bWJlcn0gbSBUaGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIG1hdHJpeFxuICogQHByb3BlcnR5IHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBtYXRyaXhcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gZW50cmllcyBUaGUgbWF0cml4IHZhbHVlc1xuICovXG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IG1hdHJpeFxuICogQHBhcmFtIHtudW1iZXJ9IG0gVGhlIG51bWJlciBvZiByb3dzXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGNvbHVtbnNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW50cmllcyBNYXRyaXggdmFsdWVzIGluIHJlYWRpbmcgb3JkZXJcbiAqIEByZXR1cm4ge21hdH0gQSBuZXcgbWF0cml4XG4gKi9cbmNvbnN0IG1hdCA9IChtID0gNCwgbiA9IDQsIGVudHJpZXMgPSBbXSkgPT4gKHtcbiAgbSwgbixcbiAgZW50cmllczogZW50cmllcy5jb25jYXQoQXJyYXkobSAqIG4pLmZpbGwoMCkpLnNsaWNlKDAsIG0gKiBuKVxufSk7XG5cbi8qKlxuICogR2V0IGFuIGlkZW50aXR5IG1hdHJpeCBvZiBzaXplIG5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBzaXplIG9mIHRoZSBtYXRyaXhcbiAqIEByZXR1cm4ge21hdH0gQW4gaWRlbnRpdHkgbWF0cml4XG4gKi9cbm1hdC5pZGVudGl0eSA9IG4gPT4gbWF0KG4sIG4sIEFycmF5KG4gKiBuKS5maWxsKDApLm1hcCgodiwgaSkgPT4gKyhNYXRoLmZsb29yKGkgLyBuKSA9PT0gaSAlIG4pKSk7XG5cbi8qKlxuICogR2V0IGFuIGVudHJ5IGZyb20gYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgcm93IG9mZnNldFxuICogQHBhcmFtIHtudW1iZXJ9IGogVGhlIGNvbHVtbiBvZmZzZXRcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHZhbHVlIGF0IHBvc2l0aW9uIChpLCBqKSBpbiBtYXRyaXggYVxuICovXG5tYXQuZ2V0ID0gKGEsIGksIGopID0+IGEuZW50cmllc1soaiAtIDEpICsgKGkgLSAxKSAqIGEubl07XG5cbi8qKlxuICogU2V0IGFuIGVudHJ5IG9mIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIHJvdyBvZmZzZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBqIFRoZSBjb2x1bW4gb2Zmc2V0XG4gKiBAcGFyYW0ge251bWJlcn0gdiBUaGUgdmFsdWUgdG8gc2V0IGluIG1hdHJpeCBhXG4gKi9cbm1hdC5zZXQgPSAoYSwgaSwgaiwgdikgPT4geyBhLmVudHJpZXNbKGogLSAxKSArIChpIC0gMSkgKiBhLm5dID0gdjsgfTtcblxuLyoqXG4gKiBHZXQgYSByb3cgZnJvbSBhIG1hdHJpeCBhcyBhbiBhcnJheVxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBtIFRoZSByb3cgb2Zmc2V0XG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBSb3cgbSBmcm9tIG1hdHJpeCBhXG4gKi9cbm1hdC5yb3cgPSAoYSwgbSkgPT4ge1xuICBjb25zdCBzID0gKG0gLSAxKSAqIGEubjtcbiAgcmV0dXJuIGEuZW50cmllcy5zbGljZShzLCBzICsgYS5uKTtcbn07XG5cbi8qKlxuICogR2V0IGEgY29sdW1uIGZyb20gYSBtYXRyaXggYXMgYW4gYXJyYXlcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgY29sdW1uIG9mZnNldFxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gQ29sdW1uIG4gZnJvbSBtYXRyaXggYVxuICovXG5tYXQuY29sID0gKGEsIG4pID0+IEFycmF5LnRpbWVzKGkgPT4gbWF0LmdldChhLCAoaSArIDEpLCBuKSwgYS5tKTtcblxuLyoqXG4gKiBBZGQgbWF0cmljZXNcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge21hdH0gYiBNYXRyaXggYlxuICogQHJldHVybiB7bWF0fSBhICsgYlxuICovXG5tYXQuYWRkID0gKGEsIGIpID0+IGEubSA9PT0gYi5tICYmIGEubiA9PT0gYi5uICYmIG1hdC5tYXAoYSwgKHYsIGkpID0+IHYgKyBiLmVudHJpZXNbaV0pO1xuXG4vKipcbiAqIFN1YnRyYWN0IG1hdHJpY2VzXG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHttYXR9IGIgTWF0cml4IGJcbiAqIEByZXR1cm4ge21hdH0gYSAtIGJcbiAqL1xubWF0LnN1YiA9IChhLCBiKSA9PiBhLm0gPT09IGIubSAmJiBhLm4gPT09IGIubiAmJiBtYXQubWFwKGEsICh2LCBpKSA9PiB2IC0gYi5lbnRyaWVzW2ldKTtcblxuLyoqXG4gKiBNdWx0aXBseSBtYXRyaWNlc1xuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bWF0fSBiIE1hdHJpeCBiXG4gKiBAcmV0dXJuIHttYXR8Ym9vbGVhbn0gYWIgb3IgZmFsc2UgaWYgdGhlIG1hdHJpY2VzIGNhbm5vdCBiZSBtdWx0aXBsaWVkXG4gKi9cbm1hdC5tdWwgPSAoYSwgYikgPT4ge1xuICBpZiAoYS5uICE9PSBiLm0pIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGNvbnN0IHJlc3VsdCA9IG1hdChhLm0sIGIubik7XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IGEubTsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDE7IGogPD0gYi5uOyBqKyspIHtcbiAgICAgIG1hdC5zZXQocmVzdWx0LCBpLCBqLCBNYXRoLmRvdChtYXQucm93KGEsIGkpLCBtYXQuY29sKGIsIGopKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFNjYWxlIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHtudW1iZXJ9IGIgU2NhbGFyIGJcbiAqIEByZXR1cm4ge21hdH0gYSAqIGJcbiAqL1xubWF0LnNjYWxlID0gKGEsIGIpID0+IG1hdC5tYXAoYSwgdiA9PiB2ICogYik7XG5cbi8qKlxuICogVHJhbnNwb3NlIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBUaGUgbWF0cml4IHRvIHRyYW5zcG9zZVxuICogQHJldHVybiB7bWF0fSBBIHRyYW5zcG9zZWQgbWF0cml4XG4gKi9cbm1hdC50cmFucyA9IGEgPT4gbWF0KGEubiwgYS5tLCBBcnJheS50aW1lcyhpID0+IG1hdC5jb2woYSwgKGkgKyAxKSksIGEubikuZmxhdCgpKTtcblxuLyoqXG4gKiBHZXQgdGhlIG1pbm9yIG9mIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIHJvdyBvZmZzZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBqIFRoZSBjb2x1bW4gb2Zmc2V0XG4gKiBAcmV0dXJuIHttYXR8Ym9vbGVhbn0gVGhlIChpLCBqKSBtaW5vciBvZiBtYXRyaXggYSBvciBmYWxzZSBpZiB0aGUgbWF0cml4IGlzIG5vdCBzcXVhcmVcbiAqL1xubWF0Lm1pbm9yID0gKGEsIGksIGopID0+IHtcbiAgaWYgKGEubSAhPT0gYS5uKSB7IHJldHVybiBmYWxzZTsgfVxuICBjb25zdCBlbnRyaWVzID0gW107XG4gIGZvciAobGV0IGlpID0gMTsgaWkgPD0gYS5tOyBpaSsrKSB7XG4gICAgaWYgKGlpID09PSBpKSB7IGNvbnRpbnVlOyB9XG4gICAgZm9yIChsZXQgamogPSAxOyBqaiA8PSBhLm47IGpqKyspIHtcbiAgICAgIGlmIChqaiA9PT0gaikgeyBjb250aW51ZTsgfVxuICAgICAgZW50cmllcy5wdXNoKG1hdC5nZXQoYSwgaWksIGpqKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXQoYS5tIC0gMSwgYS5uIC0gMSwgZW50cmllcyk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcmV0dXJuIHtudW1iZXJ8Ym9vbGVhbn0gfGF8IG9yIGZhbHNlIGlmIHRoZSBtYXRyaXggaXMgbm90IHNxdWFyZVxuICovXG5tYXQuZGV0ID0gYSA9PiB7XG4gIGlmIChhLm0gIT09IGEubikgeyByZXR1cm4gZmFsc2U7IH1cbiAgaWYgKGEubSA9PT0gMSkge1xuICAgIHJldHVybiBhLmVudHJpZXNbMF07XG4gIH1cbiAgaWYgKGEubSA9PT0gMikge1xuICAgIHJldHVybiBhLmVudHJpZXNbMF0gKiBhLmVudHJpZXNbM10gLSBhLmVudHJpZXNbMV0gKiBhLmVudHJpZXNbMl07XG4gIH1cbiAgbGV0IHRvdGFsID0gMCwgc2lnbiA9IDE7XG4gIGZvciAobGV0IGogPSAxOyBqIDw9IGEubjsgaisrKSB7XG4gICAgdG90YWwgKz0gc2lnbiAqIGEuZW50cmllc1tqIC0gMV0gKiBtYXQuZGV0KG1hdC5taW5vcihhLCAxLCBqKSk7XG4gICAgc2lnbiAqPSAtMTtcbiAgfVxuICByZXR1cm4gdG90YWw7XG59O1xuXG4vKipcbiAqIE5vcm1hbGlzZSBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgVGhlIG1hdHJpeCB0byBub3JtYWxpc2VcbiAqIEByZXR1cm4ge21hdHxib29sZWFufSBeYSBvciBmYWxzZSBpZiB0aGUgbWF0cml4IGlzIG5vdCBzcXVhcmVcbiAqL1xubWF0Lm5vciA9IGEgPT4ge1xuICBpZiAoYS5tICE9PSBhLm4pIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGNvbnN0IGQgPSBtYXQuZGV0KGEpO1xuICByZXR1cm4gbWF0Lm1hcChhLCBpID0+IGkgKiBkKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBhZGp1Z2F0ZSBvZiBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgVGhlIG1hdHJpeCBmcm9tIHdoaWNoIHRvIGdldCB0aGUgYWRqdWdhdGVcbiAqIEByZXR1cm4ge21hdH0gVGhlIGFkanVnYXRlIG9mIGFcbiAqL1xubWF0LmFkaiA9IGEgPT4ge1xuICBjb25zdCBtaW5vcnMgPSBtYXQoYS5tLCBhLm4pO1xuICBmb3IgKGxldCBpID0gMTsgaSA8PSBhLm07IGkrKykge1xuICAgIGZvciAobGV0IGogPSAxOyBqIDw9IGEubjsgaisrKSB7XG4gICAgICBtYXQuc2V0KG1pbm9ycywgaSwgaiwgbWF0LmRldChtYXQubWlub3IoYSwgaSwgaikpKTtcbiAgICB9XG4gIH1cbiAgY29uc3QgY29mYWN0b3JzID0gbWF0Lm1hcChtaW5vcnMsICh2LCBpKSA9PiB2ICogKGkgJSAyID8gLTEgOiAxKSk7XG4gIHJldHVybiBtYXQudHJhbnMoY29mYWN0b3JzKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBpbnZlcnNlIG9mIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBUaGUgbWF0cml4IHRvIGludmVydFxuICogQHJldHVybiB7bWF0fGJvb2xlYW59IGFeLTEgb3IgZmFsc2UgaWYgdGhlIG1hdHJpeCBoYXMgbm8gaW52ZXJzZVxuICovXG5tYXQuaW52ID0gYSA9PiB7XG4gIGlmIChhLm0gIT09IGEubikgeyByZXR1cm4gZmFsc2U7IH1cbiAgY29uc3QgZCA9IG1hdC5kZXQoYSk7XG4gIGlmIChkID09PSAwKSB7IHJldHVybiBmYWxzZTsgfVxuICByZXR1cm4gbWF0LnNjYWxlKG1hdC5hZGooYSksIDEgLyBkKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIG1hdHJpY2VzIGFyZSBlcXVhbFxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bWF0fSBiIE1hdHJpeCBiXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1hdHJpY2VzIGEgYW5kIGIgYXJlIGlkZW50aWNhbCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbm1hdC5lcSA9IChhLCBiKSA9PiBhLm0gPT09IGIubSAmJiBhLm4gPT09IGIubiAmJiBtYXQuc3RyKGEpID09PSBtYXQuc3RyKGIpO1xuXG4vKipcbiAqIENvcHkgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIFRoZSBtYXRyaXggdG8gY29weVxuICogQHJldHVybiB7bWF0fSBBIGNvcHkgb2YgbWF0cml4IGFcbiAqL1xubWF0LmNweSA9IGEgPT4gbWF0KGEubSwgYS5uLCBbLi4uYS5lbnRyaWVzXSk7XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0byBjYWxsIG9uIGVhY2ggZW50cnkgb2YgYSBtYXRyaXhcbiAqIEBjYWxsYmFjayBtYXRyaXhNYXBDYWxsYmFja1xuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBlbnRyeSB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBlbnRyeSBpbmRleFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbnRyaWVzIFRoZSBhcnJheSBvZiBtYXRyaXggZW50cmllc1xuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWFwcGVkIGVudHJ5XG4gKi9cblxuLyoqXG4gKiBDYWxsIGEgZnVuY3Rpb24gb24gZWFjaCBlbnRyeSBvZiBhIG1hdHJpeCBhbmQgYnVpbGQgYSBuZXcgbWF0cml4IGZyb20gdGhlIHJlc3VsdHNcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge21hdHJpeE1hcENhbGxiYWNrfSBmIFRoZSBmdW5jdGlvbiB0byBjYWxsIG9uIGVhY2ggZW50cnkgb2YgdGhlIG1hdHJpeFxuICogQHJldHVybiB7bWF0fSBNYXRyaXggYSBtYXBwZWQgdGhyb3VnaCBmXG4gKi9cbm1hdC5tYXAgPSAoYSwgZikgPT4gbWF0KGEubSwgYS5uLCBhLmVudHJpZXMubWFwKGYpKTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgbWF0cml4IGludG8gYSBzdHJpbmdcbiAqIEBwYXJhbSB7bWF0fSBhIFRoZSBtYXRyaXggdG8gY29udmVydFxuICogQHBhcmFtIHtzdHJpbmd9IFttcz0nLCAnXSBUaGUgc2VwYXJhdG9yIHN0cmluZyBmb3IgY29sdW1uc1xuICogQHBhcmFtIHtzdHJpbmd9IFtucz0nXFxuJ10gVGhlIHNlcGFyYXRvciBzdHJpbmcgZm9yIHJvd3NcbiAqIEByZXR1cm4ge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeFxuICovXG5tYXQuc3RyID0gKGEsIG1zID0gJywgJywgbnMgPSAnXFxuJykgPT4gYS5lbnRyaWVzLmNodW5rKGEubikubWFwKHIgPT4gci5qb2luKG1zKSkuam9pbihucyk7XG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHsgdmVjLCBtYXQgfTtcbn1cbiIsImltcG9ydCB7IHZlYywgbWF0IH0gZnJvbSAnLi4vbGliL2NvbW1vbic7XG5pbXBvcnQgKiBhcyBQSVhJIGZyb20gJy4uL2xpYi9waXhpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgfVxuXG4gIGluaXRpYWxpc2UoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coYEhlbGxvLCB3b3JsZCEgTWFrZSBzdXJlIGxpYnJhcmllcyBhcmUgbG9hZGVkOiAke3ZlYy5zdHIodmVjLmFkZCh2ZWMoMSwgMiksIHZlYygzLCA0KSkpfWApO1xuICB9XG59XG4iLCJpbXBvcnQgR2FtZSBmcm9tICcuL0dhbWUnO1xuXG5jb25zdCBnYW1lID0gbmV3IEdhbWUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tY29udGFpbmVyJykpO1xuZ2FtZS5pbml0aWFsaXNlKCk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4vLyBUaGlzIGVudHJ5IG1vZHVsZSB1c2VkICdleHBvcnRzJyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG4iXSwic291cmNlUm9vdCI6IiJ9