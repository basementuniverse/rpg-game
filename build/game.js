(()=>{var t={44:t=>{Math.floatEquals=(t,e,n=Number.EPSILON)=>Math.abs(t-e)<n,Math.clamp=(t,e=0,n=1)=>t<e?e:t>n?n:t,Math.frac=t=>t>=0?t-Math.floor(t):t-Math.ceil(t),Math.lerp=(t,e,n)=>t+(e-t)*n,Math.unlerp=(t,e,n)=>(n-t)/(e-t),Math.blerp=(t,e,n,s,i,a)=>Math.lerp(Math.lerp(t,e,i),Math.lerp(n,s,i),a),Math.remap=(t,e,n,s,i)=>s+(t-e)*(i-s)/(n-e),Math.smoothstep=(t,e,n)=>Math.lerp(t,e,3*Math.pow(n,2)-2*Math.pow(n,3)),Math.radians=t=>Math.PI/180*t,Math.degrees=t=>180/Math.PI*t,Math.randomBetween=(t,e)=>Math.random()*(e-t)+t,Math.randomIntBetween=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,Math.cltRandom=(t=.5,e=.5,n=2)=>{let s=0;for(let t=n;t--;)s+=Math.random();return t+(s-n/2)/(n/2)*e},Math.cltRandomInt=(t,e)=>Math.floor(t+Math.cltRandom(.5,.5,2)*(e+1-t)),Math.weightedRandom=t=>{let e=t.reduce(((t,e)=>t+e),0),n=0;const s=Math.random()*e;for(;e>s;)e-=t[n++];return n-1},Math.lerpArray=(t,e,n=Math.lerp)=>{const s=e*(t.length-1),i=Math.clamp(Math.trunc(s),0,t.length-1);return n(t[i]||0,t[i+1]||0,Math.frac(s))},Math.dot=(t,e)=>t.reduce(((t,n,s)=>t+n*e[s]),0),Array.times=(t,e)=>Array(e).fill(0).map(((e,n)=>t(n))),Array.range=t=>Array.times((t=>t),t),Object.defineProperty(Array.prototype,"at",{value:function(t){const e=this.length;return this[t<0?e-Math.abs(t+1)%e-1:t%e]}}),Object.defineProperty(Array.prototype,"chunk",{value:function(t){return Array.times((e=>this.slice(e*t,e*t+t)),Math.ceil(this.length/t))}}),Object.defineProperty(Array.prototype,"shuffle",{value:function(){return this.map((t=>[Math.random(),t])).sort(((t,e)=>t[0]-e[0])).map((t=>t[1]))}});const e=(t,e)=>t||e?"object"==typeof t?{x:t.x||0,y:t.y||0}:null==e?{x:t,y:t}:{x:t,y:e}:{x:0,y:0};e.components=t=>[t.x,t.y],e.ux=()=>e(1,0),e.uy=()=>e(0,1),e.add=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),e.mul=(t,e)=>({x:t.x*e,y:t.y*e}),e.sub=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),e.len=t=>Math.sqrt(t.x*t.x+t.y*t.y),e.manhattan=t=>Math.abs(t.x)+Math.abs(t.y),e.nor=t=>{let n=e.len(t);return n?{x:t.x/n,y:t.y/n}:e()},e.dot=(t,e)=>t.x*e.x+t.y*e.y,e.rot=(t,e)=>{let n=Math.sin(e),s=Math.cos(e);return{x:s*t.x-n*t.y,y:n*t.x+s*t.y}},e.eq=(t,e)=>t.x===e.x&&t.y===e.y,e.rad=t=>Math.atan2(t.y,t.x),e.cpy=t=>e(t),e.map=(t,e)=>({x:e(t.x,"x"),y:e(t.y,"y")}),e.str=(t,e=", ")=>`${t.x}${e}${t.y}`;const n=(t=4,e=4,n=[])=>({m:t,n:e,entries:n.concat(Array(t*e).fill(0)).slice(0,t*e)});n.identity=t=>n(t,t,Array(t*t).fill(0).map(((e,n)=>+(Math.floor(n/t)===n%t)))),n.get=(t,e,n)=>t.entries[n-1+(e-1)*t.n],n.set=(t,e,n,s)=>{t.entries[n-1+(e-1)*t.n]=s},n.row=(t,e)=>{const n=(e-1)*t.n;return t.entries.slice(n,n+t.n)},n.col=(t,e)=>Array.times((s=>n.get(t,s+1,e)),t.m),n.add=(t,e)=>t.m===e.m&&t.n===e.n&&n.map(t,((t,n)=>t+e.entries[n])),n.sub=(t,e)=>t.m===e.m&&t.n===e.n&&n.map(t,((t,n)=>t-e.entries[n])),n.mul=(t,e)=>{if(t.n!==e.m)return!1;const s=n(t.m,e.n);for(let i=1;i<=t.m;i++)for(let a=1;a<=e.n;a++)n.set(s,i,a,Math.dot(n.row(t,i),n.col(e,a)));return s},n.scale=(t,e)=>n.map(t,(t=>t*e)),n.trans=t=>n(t.n,t.m,Array.times((e=>n.col(t,e+1)),t.n).flat()),n.minor=(t,e,s)=>{if(t.m!==t.n)return!1;const i=[];for(let a=1;a<=t.m;a++)if(a!==e)for(let e=1;e<=t.n;e++)e!==s&&i.push(n.get(t,a,e));return n(t.m-1,t.n-1,i)},n.det=t=>{if(t.m!==t.n)return!1;if(1===t.m)return t.entries[0];if(2===t.m)return t.entries[0]*t.entries[3]-t.entries[1]*t.entries[2];let e=0,s=1;for(let i=1;i<=t.n;i++)e+=s*t.entries[i-1]*n.det(n.minor(t,1,i)),s*=-1;return e},n.nor=t=>{if(t.m!==t.n)return!1;const e=n.det(t);return n.map(t,(t=>t*e))},n.adj=t=>{const e=n(t.m,t.n);for(let s=1;s<=t.m;s++)for(let i=1;i<=t.n;i++)n.set(e,s,i,n.det(n.minor(t,s,i)));const s=n.map(e,((t,e)=>t*(e%2?-1:1)));return n.trans(s)},n.inv=t=>{if(t.m!==t.n)return!1;const e=n.det(t);return 0!==e&&n.scale(n.adj(t),1/e)},n.eq=(t,e)=>t.m===e.m&&t.n===e.n&&n.str(t)===n.str(e),n.cpy=t=>n(t.m,t.n,[...t.entries]),n.map=(t,e)=>n(t.m,t.n,t.entries.map(e)),n.str=(t,e=", ",n="\n")=>t.entries.chunk(t.n).map((t=>t.join(e))).join(n),t.exports={vec:e,mat:n}},221:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(295),i=n(269),a=n(318),r=n(612);e.default=class{constructor(t){if(null===t)throw new Error("A valid container element must be specified.");this.container=t,this.application=new s.Application({backgroundColor:0,antialias:!1,resolution:(window.devicePixelRatio||1)*i.scaleFactor}),s.settings.SCALE_MODE=s.SCALE_MODES.NEAREST,s.settings.ROUND_PIXELS=!0,this.container.appendChild(this.application.view),window.addEventListener("resize",this.resize.bind(this),!1),this.resize(),this.stateManager=new a.default(this)}resize(){this.application.renderer.resize(Math.floor(window.innerWidth/i.scaleFactor),Math.floor(window.innerHeight/i.scaleFactor))}initialise(){this.stateManager.push(new r.TestState1),this.application.ticker.add((t=>{this.update(t*s.settings.TARGET_FPMS),this.draw()}))}update(t){this.stateManager.update(t)}draw(){this.stateManager.draw()}}},107:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.State=void 0;const s=n(295),i=n(900);e.State=class{constructor(t={}){this.transitionType=i.StateTransitionType.None,this.transitionAmount=0,this.transitionTime=0,this.defaultOptions={transitionTime:4,transparent:!1};const e=Object.assign({},this.defaultOptions,t);this.transitionTime=e.transitionTime,this.transparent=e.transparent,this.container=new s.Container}initialise(){}dispose(){}update(t){}draw(){}}},318:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(900);e.default=class{constructor(t){this.game=t,this.states=[]}push(t){return this.states.push(t),t.stateManager=this,this.game.application.stage.addChild(t.container),t.initialise(),t.transitionType=s.StateTransitionType.In,t.transitionAmount=0,t}pop(){if(this.states.length>0){let t=this.states.length-1;for(;t>0&&this.states[t].transitionType===s.StateTransitionType.Out;)t--;if(t>=0){const e=this.states[t];return e.transitionType=s.StateTransitionType.Out,e.transitionAmount=0,e}}return null}clear(){this.states.forEach((t=>{t.transitionType!==s.StateTransitionType.Out&&(t.transitionType=s.StateTransitionType.Out,t.transitionAmount=0)}))}update(t){if(this.states.length){for(var e=this.states.length;e--;)if(this.states[e].transitionType!==s.StateTransitionType.Out){this.states[e].update(t);break}this.states.forEach(((e,n)=>{const i=t/e.transitionTime;e.transitionAmount<1?e.transitionAmount=Math.clamp(e.transitionAmount+i):e.transitionType===s.StateTransitionType.Out&&(e.dispose(),this.states.splice(n,1),this.game.application.stage.removeChild(e.container))}))}}draw(){}}},766:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(295),i=n(44);e.default=class{constructor(t,e){this.position=e,this.sprite=s.Sprite.from("../images/error.png"),this.sprite.anchor.set(.5),this.sprite.position.set(...i.vec.components(this.position)),t.container.addChild(this.sprite)}update(t){}}},612:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TestState2=e.TestState1=void 0;const s=n(107),i=n(44),a=n(766),r=n(295),o=n(900);class h extends s.State{constructor(t={}){super(t),this.timeout=10;const e=new r.Loader,n=this;e.add("testfont","fonts/retro_gaming.xml").load((()=>{n.testText=new r.BitmapText("Hello, world!",{fontName:"RetroGaming",tint:16777215}),n.testText.position.set(30,40),n.container.addChild(n.testText)}))}update(t){this.timeout-=t,this.timeout<=0&&(this.stateManager.pop(),this.stateManager.push(new l));let e="none";this.transitionType===o.StateTransitionType.In?e="in":this.transitionType===o.StateTransitionType.Out&&(e="out"),this.testText&&(this.testText.text=`${e}: ${this.transitionAmount}`)}}e.TestState1=h;class l extends s.State{constructor(t={}){super(t),this.testObjects=[];const e=new r.Loader,n=this;e.add("testfont","fonts/retro_gaming.xml").load((()=>{n.testText=new r.BitmapText("Hello, world!",{fontName:"RetroGaming",tint:16776960}),n.testText.position.set(30,70),n.container.addChild(n.testText)}))}initialise(){super.initialise(),this.testObjects.push(new a.default(this,i.vec(50,50)))}update(t){let e="none";this.transitionType===o.StateTransitionType.In?e="in":this.transitionType===o.StateTransitionType.Out&&(e="out"),this.testText&&(this.testText.text=`${e}: ${this.transitionAmount}`)}}e.TestState2=l},900:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.StateTransitionType=void 0,(n=e.StateTransitionType||(e.StateTransitionType={}))[n.In=0]="In",n[n.Out=1]="Out",n[n.None=2]="None"},607:(t,e,n)=>{"use strict";const s=n(221);window.onload=()=>{new s.default(document.querySelector("#main-container")).initialise()}},269:t=>{"use strict";t.exports=JSON.parse('{"title":"Test Game","scaleFactor":2}')},295:t=>{"use strict";t.exports=PIXI}},e={};!function n(s){if(e[s])return e[s].exports;var i=e[s]={exports:{}};return t[s](i,i.exports,n),i.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ycGctZ2FtZS8uL25vZGVfbW9kdWxlcy9AYmFzZW1lbnR1bml2ZXJzZS9jb21tb25qcy9jb21tb24uanMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvR2FtZS50cyIsIndlYnBhY2s6Ly9ycGctZ2FtZS8uL3NyYy9TdGF0ZS50cyIsIndlYnBhY2s6Ly9ycGctZ2FtZS8uL3NyYy9TdGF0ZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvVGVzdEdhbWVPYmplY3QudHMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvVGVzdFN0YXRlcy50cyIsIndlYnBhY2s6Ly9ycGctZ2FtZS8uL3NyYy9lbnVtcy50cyIsIndlYnBhY2s6Ly9ycGctZ2FtZS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9ycGctZ2FtZS9leHRlcm5hbCBcIlBJWElcIiIsIndlYnBhY2s6Ly9ycGctZ2FtZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ycGctZ2FtZS93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOlsiTWF0aCIsImZsb2F0RXF1YWxzIiwiYSIsImIiLCJwIiwiTnVtYmVyIiwiRVBTSUxPTiIsImFicyIsImNsYW1wIiwibWluIiwibWF4IiwiZnJhYyIsImZsb29yIiwiY2VpbCIsImxlcnAiLCJpIiwidW5sZXJwIiwiYmxlcnAiLCJjMDAiLCJjMTAiLCJjMDEiLCJjMTEiLCJpeCIsIml5IiwicmVtYXAiLCJhMSIsImEyIiwiYjEiLCJiMiIsInNtb290aHN0ZXAiLCJwb3ciLCJyYWRpYW5zIiwiZGVncmVlcyIsIlBJIiwicmFuZG9tQmV0d2VlbiIsInJhbmRvbSIsInJhbmRvbUludEJldHdlZW4iLCJjbHRSYW5kb20iLCJtdSIsInNpZ21hIiwic2FtcGxlcyIsInRvdGFsIiwiY2x0UmFuZG9tSW50Iiwid2VpZ2h0ZWRSYW5kb20iLCJ3IiwicmVkdWNlIiwibiIsInIiLCJsZXJwQXJyYXkiLCJmIiwicyIsImxlbmd0aCIsInRydW5jIiwiZG90IiwidiIsIkFycmF5IiwidGltZXMiLCJmaWxsIiwibWFwIiwiXyIsInJhbmdlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b3R5cGUiLCJ2YWx1ZSIsImwiLCJ0aGlzIiwic2xpY2UiLCJzb3J0IiwidmVjIiwieCIsInkiLCJjb21wb25lbnRzIiwidXgiLCJ1eSIsImFkZCIsIm11bCIsInN1YiIsImxlbiIsInNxcnQiLCJtYW5oYXR0YW4iLCJub3IiLCJyb3QiLCJzaW4iLCJjIiwiY29zIiwiZXEiLCJyYWQiLCJhdGFuMiIsImNweSIsInN0ciIsIm1hdCIsIm0iLCJlbnRyaWVzIiwiY29uY2F0IiwiaWRlbnRpdHkiLCJnZXQiLCJqIiwic2V0Iiwicm93IiwiY29sIiwicmVzdWx0Iiwic2NhbGUiLCJ0cmFucyIsImZsYXQiLCJtaW5vciIsImlpIiwiamoiLCJwdXNoIiwiZGV0Iiwic2lnbiIsImQiLCJhZGoiLCJtaW5vcnMiLCJjb2ZhY3RvcnMiLCJpbnYiLCJtcyIsIm5zIiwiY2h1bmsiLCJqb2luIiwibW9kdWxlIiwiZXhwb3J0cyIsImNvbnRhaW5lciIsIkVycm9yIiwiYXBwbGljYXRpb24iLCJQSVhJIiwiQXBwbGljYXRpb24iLCJiYWNrZ3JvdW5kQ29sb3IiLCJhbnRpYWxpYXMiLCJyZXNvbHV0aW9uIiwid2luZG93IiwiZGV2aWNlUGl4ZWxSYXRpbyIsImNvbmZpZyIsInNjYWxlRmFjdG9yIiwic2V0dGluZ3MiLCJTQ0FMRV9NT0RFIiwiU0NBTEVfTU9ERVMiLCJORUFSRVNUIiwiUk9VTkRfUElYRUxTIiwiYXBwZW5kQ2hpbGQiLCJ2aWV3IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2l6ZSIsImJpbmQiLCJzdGF0ZU1hbmFnZXIiLCJyZW5kZXJlciIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsIlRlc3RTdGF0ZTEiLCJ0aWNrZXIiLCJkdCIsInVwZGF0ZSIsIlRBUkdFVF9GUE1TIiwiZHJhdyIsIm9wdGlvbnMiLCJ0cmFuc2l0aW9uVHlwZSIsIlN0YXRlVHJhbnNpdGlvblR5cGUiLCJOb25lIiwidHJhbnNpdGlvbkFtb3VudCIsInRyYW5zaXRpb25UaW1lIiwiZGVmYXVsdE9wdGlvbnMiLCJ0cmFuc3BhcmVudCIsImFjdHVhbE9wdGlvbnMiLCJhc3NpZ24iLCJDb250YWluZXIiLCJnYW1lIiwic3RhdGVzIiwic3RhdGUiLCJzdGFnZSIsImFkZENoaWxkIiwiaW5pdGlhbGlzZSIsIkluIiwibGFzdCIsIk91dCIsImZvckVhY2giLCJhbW91bnQiLCJkaXNwb3NlIiwic3BsaWNlIiwicmVtb3ZlQ2hpbGQiLCJwb3NpdGlvbiIsInNwcml0ZSIsIlNwcml0ZSIsImZyb20iLCJhbmNob3IiLCJTdGF0ZSIsInN1cGVyIiwidGltZW91dCIsImxvYWRlciIsIkxvYWRlciIsImciLCJsb2FkIiwidGVzdFRleHQiLCJCaXRtYXBUZXh0IiwiZm9udE5hbWUiLCJ0aW50IiwicG9wIiwiVGVzdFN0YXRlMiIsInRleHQiLCJ0ZXN0T2JqZWN0cyIsIm9ubG9hZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iXSwibWFwcGluZ3MiOiJvQkFlQUEsS0FBS0MsWUFBYyxDQUFDQyxFQUFHQyxFQUFHQyxFQUFJQyxPQUFPQyxVQUFZTixLQUFLTyxJQUFJTCxFQUFJQyxHQUFLQyxFQVNuRUosS0FBS1EsTUFBUSxDQUFDTixFQUFHTyxFQUFNLEVBQUdDLEVBQU0sSUFBTVIsRUFBSU8sRUFBTUEsRUFBT1AsRUFBSVEsRUFBTUEsRUFBTVIsRUFPdkVGLEtBQUtXLEtBQU9ULEdBQUtBLEdBQUssRUFBSUEsRUFBSUYsS0FBS1ksTUFBTVYsR0FBS0EsRUFBSUYsS0FBS2EsS0FBS1gsR0FTNURGLEtBQUtjLEtBQU8sQ0FBQ1osRUFBR0MsRUFBR1ksSUFBTWIsR0FBS0MsRUFBSUQsR0FBS2EsRUFTdkNmLEtBQUtnQixPQUFTLENBQUNkLEVBQUdDLEVB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a0YsRUFBeUJFLEdBQVksQ0FHakRuRixRQUFTLElBT1YsT0FIQW9GLEVBQW9CRCxHQUFVcEYsRUFBUUEsRUFBT0MsUUFBU2tGLEdBRy9DbkYsRUFBT0MsUUNsQmZrRixDQUFvQixNIiwiZmlsZSI6ImdhbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBvdmVydmlldyBBIGxpYnJhcnkgb2YgdXNlZnVsIGZ1bmN0aW9uc1xuICogQGF1dGhvciBHb3Jkb24gTGFycmlnYW5cbiAqIEB2ZXJzaW9uIDEuMi42XG4gKi9cblxuLyoqIEBjbGFzcyBNYXRoICovXG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIG51bWJlcnMgYXJlIGFwcHJveGltYXRlbHkgZXF1YWxcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIE51bWJlciBhXG4gKiBAcGFyYW0ge251bWJlcn0gYiBOdW1iZXIgYlxuICogQHBhcmFtIHtudW1iZXJ9IFtwPU51bWJlci5FUFNJTE9OXSBUaGUgcHJlY2lzaW9uIHZhbHVlXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG51bWJlcnMgYSBhbmQgYiBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5NYXRoLmZsb2F0RXF1YWxzID0gKGEsIGIsIHAgPSBOdW1iZXIuRVBTSUxPTikgPT4gTWF0aC5hYnMoYSAtIGIpIDwgcDtcblxuLyoqXG4gKiBDbGFtcCBhIG51bWJlciBiZXR3ZWVuIG1pbiBhbmQgbWF4XG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgbnVtYmVyIHRvIGNsYW1wXG4gKiBAcGFyYW0ge251bWJlcn0gW21pbj0wXSBUaGUgbWluaW11bSB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IFttYXg9MV0gVGhlIG1heGltdW0gdmFsdWVcbiAqIEByZXR1cm4ge251bWJlcn0gQSBjbGFtcGVkIG51bWJlclxuICovXG5NYXRoLmNsYW1wID0gKGEsIG1pbiA9IDAsIG1heCA9IDEpID0+IGEgPCBtaW4gPyBtaW4gOiAoYSA+IG1heCA/IG1heCA6IGEpO1xuXG4vKipcbiAqIEdldCB0aGUgZnJhY3Rpb25hbCBwYXJ0IG9mIGEgbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgbnVtYmVyIGZyb20gd2hpY2ggdG8gZ2V0IHRoZSBmcmFjdGlvbmFsIHBhcnRcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGZyYWN0aW9uYWwgcGFydCBvZiB0aGUgbnVtYmVyXG4gKi9cbk1hdGguZnJhYyA9IGEgPT4gYSA+PSAwID8gYSAtIE1hdGguZmxvb3IoYSkgOiBhIC0gTWF0aC5jZWlsKGEpO1xuXG4vKipcbiAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiBhIGFuZCBiXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgbWluaW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBtYXhpbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIGludGVycG9sYXRpb24gdmFsdWUsIHNob3VsZCBiZSBpbiB0aGUgaW50ZXJ2YWwgWzAsIDFdXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuIGludGVycG9sYXRlZCB2YWx1ZSBpbiB0aGUgaW50ZXJ2YWwgW2EsIGJdXG4gKi9cbk1hdGgubGVycCA9IChhLCBiLCBpKSA9PiBhICsgKGIgLSBhKSAqIGk7XG5cbi8qKlxuICogR2V0IHRoZSBwb3NpdGlvbiBvZiBpIGJldHdlZW4gYSBhbmQgYlxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIG1pbmltdW0gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgbWF4aW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gdGhlIGludGVydmFsIFthLCBiXVxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgcG9zaXRpb24gb2YgaSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuTWF0aC51bmxlcnAgPSAoYSwgYiwgaSkgPT4gKGkgLSBhKSAvIChiIC0gYSk7XG5cbi8qKlxuICogRG8gYSBiaWxpbmVhciBpbnRlcnBvbGF0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gYzAwIFRvcC1sZWZ0IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gYzEwIFRvcC1yaWdodCB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGMwMSBCb3R0b20tbGVmdCB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGMxMSBCb3R0b20tcmlnaHQgdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpeCBJbnRlcnBvbGF0aW9uIHZhbHVlIGFsb25nIHhcbiAqIEBwYXJhbSB7bnVtYmVyfSBpeSBJbnRlcnBvbGF0aW9uIHZhbHVlIGFsb25nIHlcbiAqIEByZXR1cm4ge251bWJlcn0gQSBiaWxpbmVhciBpbnRlcnBvbGF0ZWQgdmFsdWVcbiAqL1xuTWF0aC5ibGVycCA9IChjMDAsIGMxMCwgYzAxLCBjMTEsIGl4LCBpeSkgPT4gTWF0aC5sZXJwKE1hdGgubGVycChjMDAsIGMxMCwgaXgpLCBNYXRoLmxlcnAoYzAxLCBjMTEsIGl4KSwgaXkpO1xuXG4vKipcbiAqIFJlLW1hcCBhIG51bWJlciBpIGZyb20gcmFuZ2UgYTEtPmEyIHRvIGIxLT5iMlxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIG51bWJlciB0byByZS1tYXBcbiAqIEBwYXJhbSB7bnVtYmVyfSBhMVxuICogQHBhcmFtIHtudW1iZXJ9IGEyXG4gKiBAcGFyYW0ge251bWJlcn0gYjFcbiAqIEBwYXJhbSB7bnVtYmVyfSBiMlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5NYXRoLnJlbWFwID0gKGksIGExLCBhMiwgYjEsIGIyKSA9PiBiMSArIChpIC0gYTEpICogKGIyIC0gYjEpIC8gKGEyIC0gYTEpO1xuXG4vKipcbiAqIERvIGEgc21vb3RoIGludGVycG9sYXRpb24gYmV0d2VlbiBhIGFuZCBiXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgbWluaW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBtYXhpbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIGludGVycG9sYXRpb24gdmFsdWVcbiAqIEByZXR1cm4ge251bWJlcn0gQW4gaW50ZXJwb2xhdGVkIHZhbHVlIGluIHRoZSBpbnRlcnZhbCBbYSwgYl1cbiAqL1xuTWF0aC5zbW9vdGhzdGVwID0gKGEsIGIsIGkpID0+IE1hdGgubGVycChhLCBiLCAzICogTWF0aC5wb3coaSwgMikgLSAyICogTWF0aC5wb3coaSwgMykpO1xuXG4vKipcbiAqIEdldCBhbiBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gZGVncmVlcyBUaGUgYW5nbGUgaW4gZGVncmVlc1xuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYW5nbGUgaW4gcmFkaWFuc1xuICovXG5NYXRoLnJhZGlhbnMgPSBkZWdyZWVzID0+IChNYXRoLlBJIC8gMTgwKSAqIGRlZ3JlZXM7XG5cbi8qKlxuICogR2V0IGFuIGFuZ2xlIGluIGRlZ3JlZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpYW5zIFRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBhbmdsZSBpbiBkZWdyZWVzXG4gKi9cbk1hdGguZGVncmVlcyA9IHJhZGlhbnMgPT4gKDE4MCAvIE1hdGguUEkpICogcmFkaWFucztcblxuLyoqXG4gKiBHZXQgYSByYW5kb20gZmxvYXQgaW4gdGhlIGludGVydmFsIFttaW4sIG1heClcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gSW5jbHVzaXZlIG1pblxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBFeGNsdXNpdmUgbWF4XG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgcmFuZG9tIGZsb2F0IGluIHRoZSBpbnRlcnZhbCBbbWluLCBtYXgpXG4gKi9cbk1hdGgucmFuZG9tQmV0d2VlbiA9IChtaW4sIG1heCkgPT4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xuXG4vKipcbiAqIEdldCBhIHJhbmRvbSBpbnRlZ2VyIGluIHRoZSBpbnRlcnZhbCBbbWluLCBtYXhdXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIEluY2x1c2l2ZSBtaW5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggSW5jbHVzaXZlIG1heFxuICogQHJldHVybiB7bnVtYmVyfSBBIHJhbmRvbSBpbnRlZ2VyIGluIHRoZSBpbnRlcnZhbCBbbWluLCBtYXhdXG4gKi9cbk1hdGgucmFuZG9tSW50QmV0d2VlbiA9IChtaW4sIG1heCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcblxuLyoqXG4gKiBHZXQgYSBub3JtYWxseS1kaXN0cmlidXRlZCByYW5kb20gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gW211PTAuNV0gVGhlIG1lYW4gdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBbc2lnbWE9MC41XSBUaGUgc3RhbmRhcmQgZGV2aWF0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gW3NhbXBsZXM9Ml0gVGhlIG51bWJlciBvZiBzYW1wbGVzXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbm9ybWFsbHktZGlzdHJpYnV0ZWQgcmFuZG9tIG51bWJlclxuICovXG5NYXRoLmNsdFJhbmRvbSA9IChtdSA9IDAuNSwgc2lnbWEgPSAwLjUsIHNhbXBsZXMgPSAyKSA9PiB7XG4gIGxldCB0b3RhbCA9IDA7XG4gIGZvciAobGV0IGkgPSBzYW1wbGVzOyBpLS07KSB7XG4gICAgdG90YWwgKz0gTWF0aC5yYW5kb20oKTtcbiAgfVxuICByZXR1cm4gbXUgKyAodG90YWwgLSBzYW1wbGVzIC8gMikgLyAoc2FtcGxlcyAvIDIpICogc2lnbWE7XG59O1xuXG4vKipcbiAqIEdldCBhIG5vcm1hbGx5LWRpc3RyaWJ1dGVkIHJhbmRvbSBpbnRlZ2VyIGluIHRoZSBpbnRlcnZhbCBbbWluLCBtYXhdXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIEluY2x1c2l2ZSBtaW5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggSW5jbHVzaXZlIG1heFxuICogQHJldHVybiB7bnVtYmVyfSBBIG5vcm1hbGx5LWRpc3RyaWJ1dGVkIHJhbmRvbSBpbnRlZ2VyXG4gKi9cbk1hdGguY2x0UmFuZG9tSW50ID0gKG1pbiwgbWF4KSA9PiBNYXRoLmZsb29yKG1pbiArIE1hdGguY2x0UmFuZG9tKDAuNSwgMC41LCAyKSAqIChtYXggKyAxIC0gbWluKSk7XG5cbi8qKlxuICogUmV0dXJuIGEgd2VpZ2h0ZWQgcmFuZG9tIGludGVnZXJcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gdyBBbiBhcnJheSBvZiB3ZWlnaHRzXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuIGluZGV4IGZyb20gd1xuICovXG5NYXRoLndlaWdodGVkUmFuZG9tID0gdyA9PiB7XG4gIGxldCB0b3RhbCA9IHcucmVkdWNlKChhLCBpKSA9PiBhICsgaSwgMCksIG4gPSAwO1xuICBjb25zdCByID0gTWF0aC5yYW5kb20oKSAqIHRvdGFsO1xuICB3aGlsZSAodG90YWwgPiByKSB7XG4gICAgdG90YWwgLT0gd1tuKytdO1xuICB9XG4gIHJldHVybiBuIC0gMTtcbn07XG5cbi8qKlxuICogQW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvblxuICogQGNhbGxiYWNrIGludGVycG9sYXRpb25DYWxsYmFja1xuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIG1pbmltdW0gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgbWF4aW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSBpbnRlcnBvbGF0aW9uIHZhbHVlLCBzaG91bGQgYmUgaW4gdGhlIGludGVydmFsIFswLCAxXVxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW50ZXJwb2xhdGVkIHZhbHVlIGluIHRoZSBpbnRlcnZhbCBbYSwgYl1cbiAqL1xuXG4vKipcbiAqIFJldHVybiBhbiBpbnRlcnBvbGF0ZWQgdmFsdWUgZnJvbSBhbiBhcnJheVxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhIEFuIGFycmF5IG9mIHZhbHVlcyBpbnRlcnBvbGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IGkgQSBudW1iZXIgaW4gdGhlIGludGVydmFsIFswLCAxXVxuICogQHBhcmFtIHtpbnRlcnBvbGF0aW9uQ2FsbGJhY2t9IFtmPU1hdGgubGVycF0gVGhlIGludGVycG9sYXRpb24gZnVuY3Rpb24gdG8gdXNlXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuIGludGVycG9sYXRlZCB2YWx1ZSBpbiB0aGUgaW50ZXJ2YWwgW21pbihhKSwgbWF4KGEpXVxuICovXG5NYXRoLmxlcnBBcnJheSA9IChhLCBpLCBmID0gTWF0aC5sZXJwKSA9PiB7XG4gIGNvbnN0IHMgPSBpICogKGEubGVuZ3RoIC0gMSk7XG4gIGNvbnN0IHAgPSBNYXRoLmNsYW1wKE1hdGgudHJ1bmMocyksIDAsIGEubGVuZ3RoIC0gMSk7XG4gIHJldHVybiBmKGFbcF0gfHwgMCwgYVtwICsgMV0gfHwgMCwgTWF0aC5mcmFjKHMpKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gdmVjdG9yc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhIFZlY3RvciBhXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGIgVmVjdG9yIGJcbiAqIEByZXR1cm4ge251bWJlcn0gYSDiiJkgYlxuICovXG5NYXRoLmRvdCA9IChhLCBiKSA9PiBhLnJlZHVjZSgobiwgdiwgaSkgPT4gbiArIHYgKiBiW2ldLCAwKTtcblxuLyoqIEBjbGFzcyBBcnJheSAqL1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gZm9yIGdlbmVyYXRpbmcgYXJyYXkgdmFsdWVzXG4gKiBAY2FsbGJhY2sgdGltZXNDYWxsYmFja1xuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIGFycmF5IGluZGV4XG4gKiBAcmV0dXJuIHsqfSBUaGUgYXJyYXkgdmFsdWVcbiAqL1xuXG4vKipcbiAqIFJldHVybiBhIG5ldyBhcnJheSB3aXRoIGxlbmd0aCBuIGJ5IGNhbGxpbmcgZnVuY3Rpb24gZihpKSBvbiBlYWNoIGVsZW1lbnRcbiAqIEBwYXJhbSB7dGltZXNDYWxsYmFja30gZlxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIHNpemUgb2YgdGhlIGFycmF5XG4gKiBAcmV0dXJuIHtBcnJheTwqPn1cbiAqL1xuQXJyYXkudGltZXMgPSAoZiwgbikgPT4gQXJyYXkobikuZmlsbCgwKS5tYXAoKF8sIGkpID0+IGYoaSkpO1xuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBjb250YWluaW5nIG51bWJlcnMgMC0+KG4gLSAxKVxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIHNpemUgb2YgdGhlIGFycmF5XG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBBbiBhcnJheSBvZiBpbnRlZ2VycyAwLT4obiAtIDEpXG4gKi9cbkFycmF5LnJhbmdlID0gbiA9PiBBcnJheS50aW1lcyhpID0+IGksIG4pO1xuXG4vKipcbiAqIFJldHVybiBhcnJheVtpXSB3aXRoIHBvc2l0aXZlIGFuZCBuZWdhdGl2ZSB3cmFwcGluZ1xuICogQG5hbWUgYXRcbiAqIEBmdW5jdGlvblxuICogQG1lbWJlcm9mIEFycmF5LnByb3RvdHlwZVxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIHBvc2l0aXZlbHkvbmVnYXRpdmVseSB3cmFwcGVkIGFycmF5IGluZGV4XG4gKiBAcmV0dXJuIHsqfSBBbiBlbGVtZW50IGZyb20gdGhlIGFycmF5XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdhdCcsIHtcbiAgdmFsdWU6IGZ1bmN0aW9uIChpKSB7XG4gICAgY29uc3QgbCA9IHRoaXMubGVuZ3RoO1xuICAgIHJldHVybiB0aGlzW2kgPCAwID8gbCAtIChNYXRoLmFicyhpICsgMSkgJSBsKSAtIDEgOiBpICUgbF07XG4gIH1cbn0pO1xuXG4vKipcbiAqIENob3AgYW4gYXJyYXkgaW50byBjaHVua3Mgb2Ygc2l6ZSBuXG4gKiBAbmFtZSBjaHVua1xuICogQGZ1bmN0aW9uXG4gKiBAbWVtYmVyb2YgQXJyYXkucHJvdG90eXBlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgY2h1bmsgc2l6ZVxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8Kj4+fSBBbiBhcnJheSBvZiBhcnJheSBjaHVua3NcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2NodW5rJywge1xuICB2YWx1ZTogZnVuY3Rpb24gKG4pIHtcbiAgICByZXR1cm4gQXJyYXkudGltZXMoaSA9PiB0aGlzLnNsaWNlKGkgKiBuLCBpICogbiArIG4pLCBNYXRoLmNlaWwodGhpcy5sZW5ndGggLyBuKSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFJhbmRvbWx5IHNodWZmbGUgYW4gYXJyYXkgaW4tcGxhY2VcbiAqIEBuYW1lIHNodWZmbGVcbiAqIEBmdW5jdGlvblxuICogQG1lbWJlcm9mIEFycmF5LnByb3RvdHlwZVxuICogQHJldHVybiB7QXJyYXk8Kj59IFRoZSBzaHVmZmxlZCBhcnJheVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnc2h1ZmZsZScsIHtcbiAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoYSA9PiBbTWF0aC5yYW5kb20oKSwgYV0pLnNvcnQoKGEsIGIpID0+IGFbMF0gLSBiWzBdKS5tYXAoYSA9PiBhWzFdKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQSAyZCB2ZWN0b3JcbiAqIEB0eXBlZGVmIHtPYmplY3R9IHZlY1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHggVGhlIHggY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB5IFRoZSB5IGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXG4gKi9cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgdmVjdG9yXG4gKiBAcGFyYW0ge251bWJlcnx2ZWN9IFt4XSBUaGUgeCBjb21wb25lbnQgb2YgdGhlIHZlY3Rvciwgb3IgYSB2ZWN0b3IgdG8gY29weVxuICogQHBhcmFtIHtudW1iZXJ9IFt5XSBUaGUgeSBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxuICogQHJldHVybiB7dmVjfSBBIG5ldyB2ZWN0b3JcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlZhcmlvdXMgd2F5cyB0byBpbml0aWFsaXNlIGEgdmVjdG9yPC9jYXB0aW9uPlxuICogbGV0IGEgPSB2ZWMoMywgMik7ICAvLyAoMywgMilcbiAqIGxldCBiID0gdmVjKDQpOyAgICAgLy8gKDQsIDQpXG4gKiBsZXQgYyA9IHZlYyhhKTsgICAgIC8vICgzLCAyKVxuICogbGV0IGQgPSB2ZWMoKTsgICAgICAvLyAoMCwgMClcbiAqL1xuY29uc3QgdmVjID0gKHgsIHkpID0+ICgheCAmJiAheSA/XG4gIHsgeDogMCwgeTogMCB9IDogKHR5cGVvZiB4ID09PSAnb2JqZWN0JyA/XG4gICAgeyB4OiB4LnggfHwgMCwgeTogeC55IHx8IDAgfSA6ICh5ID09PSBudWxsIHx8IHkgPT09IHVuZGVmaW5lZCA/XG4gICAgICB7IHg6IHgsIHk6IHggfSA6IHsgeDogeCwgeTogeSB9KVxuICApXG4pO1xuXG4vKipcbiAqIEdldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlY3RvciBhcyBhbiBhcnJheVxuICogQHBhcmFtIHt2ZWN9IGEgVGhlIHZlY3RvciB0byBnZXQgY29tcG9uZW50cyBmcm9tXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgdmVjdG9yIGNvbXBvbmVudHMgYXMgYW4gYXJyYXlcbiAqL1xudmVjLmNvbXBvbmVudHMgPSBhID0+IFthLngsIGEueV07XG5cbi8qKlxuICogUmV0dXJuIGEgdW5pdCB2ZWN0b3IgKDEsIDApXG4gKiBAcmV0dXJuIHt2ZWN9IEEgdW5pdCB2ZWN0b3IgKDEsIDApXG4gKi9cbnZlYy51eCA9ICgpID0+IHZlYygxLCAwKTtcblxuLyoqXG4gKiBSZXR1cm4gYSB1bml0IHZlY3RvciAoMCwgMSlcbiAqIEByZXR1cm4ge3ZlY30gQSB1bml0IHZlY3RvciAoMCwgMSlcbiAqL1xudmVjLnV5ID0gKCkgPT4gdmVjKDAsIDEpO1xuXG4vKipcbiAqIEFkZCB2ZWN0b3JzXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHt2ZWN9IGIgVmVjdG9yIGJcbiAqIEByZXR1cm4ge3ZlY30gYSArIGJcbiAqL1xudmVjLmFkZCA9IChhLCBiKSA9PiAoeyB4OiBhLnggKyBiLngsIHk6IGEueSArIGIueSB9KTtcblxuLyoqXG4gKiBTY2FsZSBhIHZlY3RvclxuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFNjYWxhciBiXG4gKiBAcmV0dXJuIHt2ZWN9IGEgKiBiXG4gKi9cbnZlYy5tdWwgPSAoYSwgYikgPT4gKHsgeDogYS54ICogYiwgeTogYS55ICogYiB9KTtcblxuLyoqXG4gKiBTdWJ0cmFjdCB2ZWN0b3JzXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHt2ZWN9IGIgVmVjdG9yIGJcbiAqIEByZXR1cm4ge3ZlY30gYSAtIGJcbiAqL1xudmVjLnN1YiA9IChhLCBiKSA9PiAoeyB4OiBhLnggLSBiLngsIHk6IGEueSAtIGIueSB9KTtcblxuLyoqXG4gKiBHZXQgdGhlIGxlbmd0aCBvZiBhIHZlY3RvclxuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEByZXR1cm4ge251bWJlcn0gfGF8XG4gKi9cbnZlYy5sZW4gPSBhID0+IE1hdGguc3FydChhLnggKiBhLnggKyBhLnkgKiBhLnkpO1xuXG4vKipcbiAqIEdldCB0aGUgbGVuZ3RoIG9mIGEgdmVjdG9yIHVzaW5nIHRheGljYWIgZ2VvbWV0cnlcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHxhfFxuICovXG52ZWMubWFuaGF0dGFuID0gYSA9PiBNYXRoLmFicyhhLngpICsgTWF0aC5hYnMoYS55KTtcblxuLyoqXG4gKiBOb3JtYWxpc2UgYSB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjfSBhIFRoZSB2ZWN0b3IgdG8gbm9ybWFsaXNlXG4gKiBAcmV0dXJuIHt2ZWN9IF5hXG4gKi9cbnZlYy5ub3IgPSBhID0+IHtcbiAgbGV0IGxlbiA9IHZlYy5sZW4oYSk7XG4gIHJldHVybiBsZW4gPyB7IHg6IGEueCAvIGxlbiwgeTogYS55IC8gbGVuIH0gOiB2ZWMoKTtcbn07XG5cbi8qKlxuICogR2V0IGEgZG90IHByb2R1Y3Qgb2YgdmVjdG9yc1xuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEBwYXJhbSB7dmVjfSBiIFZlY3RvciBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9IGEg4oiZIGJcbiAqL1xudmVjLmRvdCA9IChhLCBiKSA9PiBhLnggKiBiLnggKyBhLnkgKiBiLnk7XG5cbi8qKlxuICogUm90YXRlIGEgdmVjdG9yIGJ5IHIgcmFkaWFuc1xuICogQHBhcmFtIHt2ZWN9IGEgVGhlIHZlY3RvciB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByIFRoZSBhbmdsZSB0byByb3RhdGUgYnksIG1lYXN1cmVkIGluIHJhZGlhbnNcbiAqIEByZXR1cm4ge3ZlY30gQSByb3RhdGVkIHZlY3RvclxuICovXG52ZWMucm90ID0gKGEsIHIpID0+IHtcbiAgbGV0IHMgPSBNYXRoLnNpbihyKSxcbiAgICBjID0gTWF0aC5jb3Mocik7XG4gIHJldHVybiB7IHg6IGMgKiBhLnggLSBzICogYS55LCB5OiBzICogYS54ICsgYyAqIGEueSB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHR3byB2ZWN0b3JzIGFyZSBlcXVhbFxuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEBwYXJhbSB7dmVjfSBiIFZlY3RvciBiXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHZlY3RvcnMgYSBhbmQgYiBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZVxuICovXG52ZWMuZXEgPSAoYSwgYikgPT4gYS54ID09PSBiLnggJiYgYS55ID09PSBiLnk7XG5cbi8qKlxuICogR2V0IHRoZSBhbmdsZSBvZiBhIHZlY3RvclxuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGFuZ2xlIG9mIHZlY3RvciBhIGluIHJhZGlhbnNcbiAqL1xudmVjLnJhZCA9IGEgPT4gTWF0aC5hdGFuMihhLnksIGEueCk7XG5cbi8qKlxuICogQ29weSBhIHZlY3RvclxuICogQHBhcmFtIHt2ZWN9IGEgVGhlIHZlY3RvciB0byBjb3B5XG4gKiBAcmV0dXJuIHt2ZWN9IEEgY29weSBvZiB2ZWN0b3IgYVxuICovXG52ZWMuY3B5ID0gYSA9PiB2ZWMoYSk7XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0byBjYWxsIG9uIGVhY2ggY29tcG9uZW50IG9mIGEgdmVjdG9yXG4gKiBAY2FsbGJhY2sgdmVjdG9yTWFwQ2FsbGJhY2tcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgY29tcG9uZW50IHZhbHVlXG4gKiBAcGFyYW0geyd4JyB8ICd5J30gbGFiZWwgVGhlIGNvbXBvbmVudCBsYWJlbCAoeCBvciB5KVxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWFwcGVkIGNvbXBvbmVudFxuICovXG5cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIG9uIGVhY2ggY29tcG9uZW50IG9mIGEgdmVjdG9yIGFuZCBidWlsZCBhIG5ldyB2ZWN0b3IgZnJvbSB0aGUgcmVzdWx0c1xuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEBwYXJhbSB7dmVjdG9yTWFwQ2FsbGJhY2t9IGYgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgb24gZWFjaCBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxuICogQHJldHVybiB7dmVjfSBWZWN0b3IgYSBtYXBwZWQgdGhyb3VnaCBmXG4gKi9cbnZlYy5tYXAgPSAoYSwgZikgPT4gKHsgeDogZihhLngsICd4JyksIHk6IGYoYS55LCAneScpIH0pO1xuXG4vKipcbiAqIENvbnZlcnQgYSB2ZWN0b3IgaW50byBhIHN0cmluZ1xuICogQHBhcmFtIHt2ZWN9IGEgVGhlIHZlY3RvciB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge3N0cmluZ30gW3M9JywgJ10gVGhlIHNlcGFyYXRvciBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3RvclxuICovXG52ZWMuc3RyID0gKGEsIHMgPSAnLCAnKSA9PiBgJHthLnh9JHtzfSR7YS55fWA7XG5cbi8qKlxuICogQSBtYXRyaXhcbiAqIEB0eXBlZGVmIHtPYmplY3R9IG1hdFxuICogQHByb3BlcnR5IHtudW1iZXJ9IG0gVGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBtYXRyaXhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgbWF0cml4XG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGVudHJpZXMgVGhlIG1hdHJpeCB2YWx1ZXNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBtYXRyaXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbT00XSBUaGUgbnVtYmVyIG9mIHJvd3NcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbj00XSBUaGUgbnVtYmVyIG9mIGNvbHVtbnNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2VudHJpZXM9W11dIE1hdHJpeCB2YWx1ZXMgaW4gcmVhZGluZyBvcmRlclxuICogQHJldHVybiB7bWF0fSBBIG5ldyBtYXRyaXhcbiAqL1xuY29uc3QgbWF0ID0gKG0gPSA0LCBuID0gNCwgZW50cmllcyA9IFtdKSA9PiAoe1xuICBtLCBuLFxuICBlbnRyaWVzOiBlbnRyaWVzLmNvbmNhdChBcnJheShtICogbikuZmlsbCgwKSkuc2xpY2UoMCwgbSAqIG4pXG59KTtcblxuLyoqXG4gKiBHZXQgYW4gaWRlbnRpdHkgbWF0cml4IG9mIHNpemUgblxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIHNpemUgb2YgdGhlIG1hdHJpeFxuICogQHJldHVybiB7bWF0fSBBbiBpZGVudGl0eSBtYXRyaXhcbiAqL1xubWF0LmlkZW50aXR5ID0gbiA9PiBtYXQobiwgbiwgQXJyYXkobiAqIG4pLmZpbGwoMCkubWFwKCh2LCBpKSA9PiArKE1hdGguZmxvb3IoaSAvIG4pID09PSBpICUgbikpKTtcblxuLyoqXG4gKiBHZXQgYW4gZW50cnkgZnJvbSBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSByb3cgb2Zmc2V0XG4gKiBAcGFyYW0ge251bWJlcn0gaiBUaGUgY29sdW1uIG9mZnNldFxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgdmFsdWUgYXQgcG9zaXRpb24gKGksIGopIGluIG1hdHJpeCBhXG4gKi9cbm1hdC5nZXQgPSAoYSwgaSwgaikgPT4gYS5lbnRyaWVzWyhqIC0gMSkgKyAoaSAtIDEpICogYS5uXTtcblxuLyoqXG4gKiBTZXQgYW4gZW50cnkgb2YgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgcm93IG9mZnNldFxuICogQHBhcmFtIHtudW1iZXJ9IGogVGhlIGNvbHVtbiBvZmZzZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSB2IFRoZSB2YWx1ZSB0byBzZXQgaW4gbWF0cml4IGFcbiAqL1xubWF0LnNldCA9IChhLCBpLCBqLCB2KSA9PiB7IGEuZW50cmllc1soaiAtIDEpICsgKGkgLSAxKSAqIGEubl0gPSB2OyB9O1xuXG4vKipcbiAqIEdldCBhIHJvdyBmcm9tIGEgbWF0cml4IGFzIGFuIGFycmF5XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHtudW1iZXJ9IG0gVGhlIHJvdyBvZmZzZXRcbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJvdyBtIGZyb20gbWF0cml4IGFcbiAqL1xubWF0LnJvdyA9IChhLCBtKSA9PiB7XG4gIGNvbnN0IHMgPSAobSAtIDEpICogYS5uO1xuICByZXR1cm4gYS5lbnRyaWVzLnNsaWNlKHMsIHMgKyBhLm4pO1xufTtcblxuLyoqXG4gKiBHZXQgYSBjb2x1bW4gZnJvbSBhIG1hdHJpeCBhcyBhbiBhcnJheVxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBjb2x1bW4gb2Zmc2V0XG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBDb2x1bW4gbiBmcm9tIG1hdHJpeCBhXG4gKi9cbm1hdC5jb2wgPSAoYSwgbikgPT4gQXJyYXkudGltZXMoaSA9PiBtYXQuZ2V0KGEsIChpICsgMSksIG4pLCBhLm0pO1xuXG4vKipcbiAqIEFkZCBtYXRyaWNlc1xuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bWF0fSBiIE1hdHJpeCBiXG4gKiBAcmV0dXJuIHttYXR9IGEgKyBiXG4gKi9cbm1hdC5hZGQgPSAoYSwgYikgPT4gYS5tID09PSBiLm0gJiYgYS5uID09PSBiLm4gJiYgbWF0Lm1hcChhLCAodiwgaSkgPT4gdiArIGIuZW50cmllc1tpXSk7XG5cbi8qKlxuICogU3VidHJhY3QgbWF0cmljZXNcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge21hdH0gYiBNYXRyaXggYlxuICogQHJldHVybiB7bWF0fSBhIC0gYlxuICovXG5tYXQuc3ViID0gKGEsIGIpID0+IGEubSA9PT0gYi5tICYmIGEubiA9PT0gYi5uICYmIG1hdC5tYXAoYSwgKHYsIGkpID0+IHYgLSBiLmVudHJpZXNbaV0pO1xuXG4vKipcbiAqIE11bHRpcGx5IG1hdHJpY2VzXG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHttYXR9IGIgTWF0cml4IGJcbiAqIEByZXR1cm4ge21hdHxib29sZWFufSBhYiBvciBmYWxzZSBpZiB0aGUgbWF0cmljZXMgY2Fubm90IGJlIG11bHRpcGxpZWRcbiAqL1xubWF0Lm11bCA9IChhLCBiKSA9PiB7XG4gIGlmIChhLm4gIT09IGIubSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgY29uc3QgcmVzdWx0ID0gbWF0KGEubSwgYi5uKTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gYS5tOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBiLm47IGorKykge1xuICAgICAgbWF0LnNldChyZXN1bHQsIGksIGosIE1hdGguZG90KG1hdC5yb3coYSwgaSksIG1hdC5jb2woYiwgaikpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogU2NhbGUgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge251bWJlcn0gYiBTY2FsYXIgYlxuICogQHJldHVybiB7bWF0fSBhICogYlxuICovXG5tYXQuc2NhbGUgPSAoYSwgYikgPT4gbWF0Lm1hcChhLCB2ID0+IHYgKiBiKTtcblxuLyoqXG4gKiBUcmFuc3Bvc2UgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIFRoZSBtYXRyaXggdG8gdHJhbnNwb3NlXG4gKiBAcmV0dXJuIHttYXR9IEEgdHJhbnNwb3NlZCBtYXRyaXhcbiAqL1xubWF0LnRyYW5zID0gYSA9PiBtYXQoYS5uLCBhLm0sIEFycmF5LnRpbWVzKGkgPT4gbWF0LmNvbChhLCAoaSArIDEpKSwgYS5uKS5mbGF0KCkpO1xuXG4vKipcbiAqIEdldCB0aGUgbWlub3Igb2YgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgcm93IG9mZnNldFxuICogQHBhcmFtIHtudW1iZXJ9IGogVGhlIGNvbHVtbiBvZmZzZXRcbiAqIEByZXR1cm4ge21hdHxib29sZWFufSBUaGUgKGksIGopIG1pbm9yIG9mIG1hdHJpeCBhIG9yIGZhbHNlIGlmIHRoZSBtYXRyaXggaXMgbm90IHNxdWFyZVxuICovXG5tYXQubWlub3IgPSAoYSwgaSwgaikgPT4ge1xuICBpZiAoYS5tICE9PSBhLm4pIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZm9yIChsZXQgaWkgPSAxOyBpaSA8PSBhLm07IGlpKyspIHtcbiAgICBpZiAoaWkgPT09IGkpIHsgY29udGludWU7IH1cbiAgICBmb3IgKGxldCBqaiA9IDE7IGpqIDw9IGEubjsgamorKykge1xuICAgICAgaWYgKGpqID09PSBqKSB7IGNvbnRpbnVlOyB9XG4gICAgICBlbnRyaWVzLnB1c2gobWF0LmdldChhLCBpaSwgamopKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1hdChhLm0gLSAxLCBhLm4gLSAxLCBlbnRyaWVzKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEByZXR1cm4ge251bWJlcnxib29sZWFufSB8YXwgb3IgZmFsc2UgaWYgdGhlIG1hdHJpeCBpcyBub3Qgc3F1YXJlXG4gKi9cbm1hdC5kZXQgPSBhID0+IHtcbiAgaWYgKGEubSAhPT0gYS5uKSB7IHJldHVybiBmYWxzZTsgfVxuICBpZiAoYS5tID09PSAxKSB7XG4gICAgcmV0dXJuIGEuZW50cmllc1swXTtcbiAgfVxuICBpZiAoYS5tID09PSAyKSB7XG4gICAgcmV0dXJuIGEuZW50cmllc1swXSAqIGEuZW50cmllc1szXSAtIGEuZW50cmllc1sxXSAqIGEuZW50cmllc1syXTtcbiAgfVxuICBsZXQgdG90YWwgPSAwLCBzaWduID0gMTtcbiAgZm9yIChsZXQgaiA9IDE7IGogPD0gYS5uOyBqKyspIHtcbiAgICB0b3RhbCArPSBzaWduICogYS5lbnRyaWVzW2ogLSAxXSAqIG1hdC5kZXQobWF0Lm1pbm9yKGEsIDEsIGopKTtcbiAgICBzaWduICo9IC0xO1xuICB9XG4gIHJldHVybiB0b3RhbDtcbn07XG5cbi8qKlxuICogTm9ybWFsaXNlIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBUaGUgbWF0cml4IHRvIG5vcm1hbGlzZVxuICogQHJldHVybiB7bWF0fGJvb2xlYW59IF5hIG9yIGZhbHNlIGlmIHRoZSBtYXRyaXggaXMgbm90IHNxdWFyZVxuICovXG5tYXQubm9yID0gYSA9PiB7XG4gIGlmIChhLm0gIT09IGEubikgeyByZXR1cm4gZmFsc2U7IH1cbiAgY29uc3QgZCA9IG1hdC5kZXQoYSk7XG4gIHJldHVybiBtYXQubWFwKGEsIGkgPT4gaSAqIGQpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGFkanVnYXRlIG9mIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBUaGUgbWF0cml4IGZyb20gd2hpY2ggdG8gZ2V0IHRoZSBhZGp1Z2F0ZVxuICogQHJldHVybiB7bWF0fSBUaGUgYWRqdWdhdGUgb2YgYVxuICovXG5tYXQuYWRqID0gYSA9PiB7XG4gIGNvbnN0IG1pbm9ycyA9IG1hdChhLm0sIGEubik7XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IGEubTsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDE7IGogPD0gYS5uOyBqKyspIHtcbiAgICAgIG1hdC5zZXQobWlub3JzLCBpLCBqLCBtYXQuZGV0KG1hdC5taW5vcihhLCBpLCBqKSkpO1xuICAgIH1cbiAgfVxuICBjb25zdCBjb2ZhY3RvcnMgPSBtYXQubWFwKG1pbm9ycywgKHYsIGkpID0+IHYgKiAoaSAlIDIgPyAtMSA6IDEpKTtcbiAgcmV0dXJuIG1hdC50cmFucyhjb2ZhY3RvcnMpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGludmVyc2Ugb2YgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIFRoZSBtYXRyaXggdG8gaW52ZXJ0XG4gKiBAcmV0dXJuIHttYXR8Ym9vbGVhbn0gYV4tMSBvciBmYWxzZSBpZiB0aGUgbWF0cml4IGhhcyBubyBpbnZlcnNlXG4gKi9cbm1hdC5pbnYgPSBhID0+IHtcbiAgaWYgKGEubSAhPT0gYS5uKSB7IHJldHVybiBmYWxzZTsgfVxuICBjb25zdCBkID0gbWF0LmRldChhKTtcbiAgaWYgKGQgPT09IDApIHsgcmV0dXJuIGZhbHNlOyB9XG4gIHJldHVybiBtYXQuc2NhbGUobWF0LmFkaihhKSwgMSAvIGQpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiB0d28gbWF0cmljZXMgYXJlIGVxdWFsXG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHttYXR9IGIgTWF0cml4IGJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbWF0cmljZXMgYSBhbmQgYiBhcmUgaWRlbnRpY2FsLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xubWF0LmVxID0gKGEsIGIpID0+IGEubSA9PT0gYi5tICYmIGEubiA9PT0gYi5uICYmIG1hdC5zdHIoYSkgPT09IG1hdC5zdHIoYik7XG5cbi8qKlxuICogQ29weSBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgVGhlIG1hdHJpeCB0byBjb3B5XG4gKiBAcmV0dXJuIHttYXR9IEEgY29weSBvZiBtYXRyaXggYVxuICovXG5tYXQuY3B5ID0gYSA9PiBtYXQoYS5tLCBhLm4sIFsuLi5hLmVudHJpZXNdKTtcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRvIGNhbGwgb24gZWFjaCBlbnRyeSBvZiBhIG1hdHJpeFxuICogQGNhbGxiYWNrIG1hdHJpeE1hcENhbGxiYWNrXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVGhlIGVudHJ5IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGVudHJ5IGluZGV4XG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVudHJpZXMgVGhlIGFycmF5IG9mIG1hdHJpeCBlbnRyaWVzXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXBwZWQgZW50cnlcbiAqL1xuXG4vKipcbiAqIENhbGwgYSBmdW5jdGlvbiBvbiBlYWNoIGVudHJ5IG9mIGEgbWF0cml4IGFuZCBidWlsZCBhIG5ldyBtYXRyaXggZnJvbSB0aGUgcmVzdWx0c1xuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bWF0cml4TWFwQ2FsbGJhY2t9IGYgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgb24gZWFjaCBlbnRyeSBvZiB0aGUgbWF0cml4XG4gKiBAcmV0dXJuIHttYXR9IE1hdHJpeCBhIG1hcHBlZCB0aHJvdWdoIGZcbiAqL1xubWF0Lm1hcCA9IChhLCBmKSA9PiBtYXQoYS5tLCBhLm4sIGEuZW50cmllcy5tYXAoZikpO1xuXG4vKipcbiAqIENvbnZlcnQgYSBtYXRyaXggaW50byBhIHN0cmluZ1xuICogQHBhcmFtIHttYXR9IGEgVGhlIG1hdHJpeCB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge3N0cmluZ30gW21zPScsICddIFRoZSBzZXBhcmF0b3Igc3RyaW5nIGZvciBjb2x1bW5zXG4gKiBAcGFyYW0ge3N0cmluZ30gW25zPSdcXG4nXSBUaGUgc2VwYXJhdG9yIHN0cmluZyBmb3Igcm93c1xuICogQHJldHVybiB7c3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4XG4gKi9cbm1hdC5zdHIgPSAoYSwgbXMgPSAnLCAnLCBucyA9ICdcXG4nKSA9PiBhLmVudHJpZXMuY2h1bmsoYS5uKS5tYXAociA9PiByLmpvaW4obXMpKS5qb2luKG5zKTtcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIG1vZHVsZS5leHBvcnRzID0geyB2ZWMsIG1hdCB9O1xufVxuIiwiaW1wb3J0ICogYXMgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCAqIGFzIGNvbmZpZyBmcm9tICcuL2NvbmZpZy5qc29uJztcbmltcG9ydCBTdGF0ZU1hbmFnZXIgZnJvbSAnLi9TdGF0ZU1hbmFnZXInO1xuXG4vLyBURVNUXG5pbXBvcnQgeyBUZXN0U3RhdGUxLCBUZXN0U3RhdGUyIH0gZnJvbSAnLi9UZXN0U3RhdGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHVibGljIGFwcGxpY2F0aW9uOiBQSVhJLkFwcGxpY2F0aW9uO1xuICBwdWJsaWMgc3RhdGVNYW5hZ2VyOiBTdGF0ZU1hbmFnZXI7XG5cbiAgY29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwpIHtcbiAgICBpZiAobnVsbCA9PT0gY29udGFpbmVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgdmFsaWQgY29udGFpbmVyIGVsZW1lbnQgbXVzdCBiZSBzcGVjaWZpZWQuJyk7XG4gICAgfVxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuXG4gICAgLy8gSW5pdGlhbGlzZSBQSVhJIGFwcGxpY2F0aW9uXG4gICAgdGhpcy5hcHBsaWNhdGlvbiA9IG5ldyBQSVhJLkFwcGxpY2F0aW9uKHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogMHgwLFxuICAgICAgYW50aWFsaWFzOiBmYWxzZSxcbiAgICAgIHJlc29sdXRpb246ICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKSAqIGNvbmZpZy5zY2FsZUZhY3RvclxuICAgIH0pO1xuICAgIFBJWEkuc2V0dGluZ3MuU0NBTEVfTU9ERSA9IFBJWEkuU0NBTEVfTU9ERVMuTkVBUkVTVDtcbiAgICBQSVhJLnNldHRpbmdzLlJPVU5EX1BJWEVMUyA9IHRydWU7XG5cbiAgICAvLyBBZGQgUElYSSBjYW52YXMgdG8gdGhlIGNvbnRhaW5lciBlbGVtZW50XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5hcHBsaWNhdGlvbi52aWV3KTtcblxuICAgIC8vIEhhbmRsZSByZXNpemVcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemUuYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIHRoaXMucmVzaXplKCk7XG5cbiAgICAvLyBJbml0aWFsaXNlIHN1YnN5c3RlbXNcbiAgICB0aGlzLnN0YXRlTWFuYWdlciA9IG5ldyBTdGF0ZU1hbmFnZXIodGhpcyk7XG4gIH1cblxuICBwcml2YXRlIHJlc2l6ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmFwcGxpY2F0aW9uLnJlbmRlcmVyLnJlc2l6ZShcbiAgICAgIE1hdGguZmxvb3Iod2luZG93LmlubmVyV2lkdGggLyBjb25maWcuc2NhbGVGYWN0b3IpLFxuICAgICAgTWF0aC5mbG9vcih3aW5kb3cuaW5uZXJIZWlnaHQgLyBjb25maWcuc2NhbGVGYWN0b3IpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBpbml0aWFsaXNlKCk6IHZvaWQge1xuXG4gICAgLy8gUHVzaCB0aGUgaW50cm8gc3RhdGVcblxuICAgIC8vIFRFU1RcbiAgICB0aGlzLnN0YXRlTWFuYWdlci5wdXNoKG5ldyBUZXN0U3RhdGUxKCkpO1xuXG4gICAgLy8gU3RhcnQgdGhlIGdhbWUgbG9vcFxuICAgIHRoaXMuYXBwbGljYXRpb24udGlja2VyLmFkZChkdCA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZShkdCAqIFBJWEkuc2V0dGluZ3MuVEFSR0VUX0ZQTVMpO1xuICAgICAgdGhpcy5kcmF3KCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zdGF0ZU1hbmFnZXIudXBkYXRlKGR0KTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhdygpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXRlTWFuYWdlci5kcmF3KCk7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgU3RhdGVNYW5hZ2VyIGZyb20gJy4vU3RhdGVNYW5hZ2VyJztcbmltcG9ydCB7IFN0YXRlVHJhbnNpdGlvblR5cGUgfSBmcm9tICcuL2VudW1zJztcblxuZXhwb3J0IHR5cGUgU3RhdGVPcHRpb25zID0ge1xuICB0cmFuc2l0aW9uVGltZTogbnVtYmVyLFxuICB0cmFuc3BhcmVudDogYm9vbGVhblxufTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFN0YXRlIHtcbiAgcHVibGljIHN0YXRlTWFuYWdlcjogU3RhdGVNYW5hZ2VyO1xuICBwdWJsaWMgdHJhbnNpdGlvblR5cGU6IFN0YXRlVHJhbnNpdGlvblR5cGUgPSBTdGF0ZVRyYW5zaXRpb25UeXBlLk5vbmU7XG4gIHB1YmxpYyB0cmFuc2l0aW9uQW1vdW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgdHJhbnNpdGlvblRpbWU6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBjb250YWluZXI6IFBJWEkuQ29udGFpbmVyO1xuICBwdWJsaWMgdHJhbnNwYXJlbnQ6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkZWZhdWx0T3B0aW9uczogU3RhdGVPcHRpb25zID0ge1xuICAgIHRyYW5zaXRpb25UaW1lOiA0LFxuICAgIHRyYW5zcGFyZW50OiBmYWxzZVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFBhcnRpYWw8U3RhdGVPcHRpb25zPiA9IHt9KSB7XG4gICAgY29uc3QgYWN0dWFsT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIHRoaXMudHJhbnNpdGlvblRpbWUgPSBhY3R1YWxPcHRpb25zLnRyYW5zaXRpb25UaW1lO1xuICAgIHRoaXMudHJhbnNwYXJlbnQgPSBhY3R1YWxPcHRpb25zLnRyYW5zcGFyZW50O1xuICAgIHRoaXMuY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG4gIH1cblxuICBwdWJsaWMgaW5pdGlhbGlzZSgpOiB2b2lkIHtcbiAgICAvL1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgLy9cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vXG4gIH1cblxuICBwdWJsaWMgZHJhdygpOiB2b2lkIHt9XG59XG4iLCJpbXBvcnQgR2FtZSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuL1N0YXRlJztcbmltcG9ydCB7IFN0YXRlVHJhbnNpdGlvblR5cGUgfSBmcm9tICcuL2VudW1zJztcbmltcG9ydCB7fSBmcm9tICdAYmFzZW1lbnR1bml2ZXJzZS9jb21tb25qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXRlTWFuYWdlciB7XG4gIHB1YmxpYyBnYW1lOiBHYW1lO1xuICBwcml2YXRlIHN0YXRlczogU3RhdGVbXTtcblxuICBjb25zdHJ1Y3RvcihnYW1lOiBHYW1lKSB7XG4gICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICB0aGlzLnN0YXRlcyA9IFtdO1xuICB9XG5cbiAgcHVibGljIHB1c2goc3RhdGU6IFN0YXRlKTogU3RhdGUge1xuICAgIHRoaXMuc3RhdGVzLnB1c2goc3RhdGUpO1xuXG4gICAgLy8gTWFrZSBzdXJlIHRoZSBzdGF0ZSBoYXMgYSByZWZlcmVuY2UgdG8gdGhlIHN0YXRlIG1hbmFnZXJcbiAgICBzdGF0ZS5zdGF0ZU1hbmFnZXIgPSB0aGlzO1xuXG4gICAgLy8gQWRkIHRoZSBzdGF0ZSdzIGNvbnRhaW5lciB0byB0aGUgc3RhZ2VcbiAgICB0aGlzLmdhbWUuYXBwbGljYXRpb24uc3RhZ2UuYWRkQ2hpbGQoc3RhdGUuY29udGFpbmVyKTtcblxuICAgIC8vIEluaXRpYWxpc2UgdGhlIHN0YXRlIGFuZCBzdGFydCB0cmFuc2l0aW9uaW5nIGluXG4gICAgc3RhdGUuaW5pdGlhbGlzZSgpO1xuICAgIHN0YXRlLnRyYW5zaXRpb25UeXBlID0gU3RhdGVUcmFuc2l0aW9uVHlwZS5JbjtcbiAgICBzdGF0ZS50cmFuc2l0aW9uQW1vdW50ID0gMDtcblxuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG4gIHB1YmxpYyBwb3AoKTogU3RhdGUgfCBudWxsIHtcbiAgICBpZiAodGhpcy5zdGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGxhc3Q6IG51bWJlciA9IHRoaXMuc3RhdGVzLmxlbmd0aCAtIDE7XG5cbiAgICAgIC8vIFJlbW92ZSB0aGUgdG9wLW1vc3Qgc3RhdGUgdGhhdCBpc24ndCBjdXJyZW50bHkgdHJhbnNpdGlvbmluZyBvdXRcbiAgICAgIHdoaWxlIChsYXN0ID4gMCAmJiB0aGlzLnN0YXRlc1tsYXN0XS50cmFuc2l0aW9uVHlwZSA9PT0gU3RhdGVUcmFuc2l0aW9uVHlwZS5PdXQpIHtcbiAgICAgICAgbGFzdC0tO1xuICAgICAgfVxuICAgICAgaWYgKGxhc3QgPj0gMCkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVzW2xhc3RdO1xuXG4gICAgICAgIC8vIFN0YXJ0IHRyYW5zaXRpb25pbmcgb3V0XG4gICAgICAgIHN0YXRlLnRyYW5zaXRpb25UeXBlID0gU3RhdGVUcmFuc2l0aW9uVHlwZS5PdXQ7XG4gICAgICAgIHN0YXRlLnRyYW5zaXRpb25BbW91bnQgPSAwO1xuXG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5zdGF0ZXMuZm9yRWFjaChzdGF0ZSA9PiB7XG4gICAgICBpZiAoc3RhdGUudHJhbnNpdGlvblR5cGUgIT09IFN0YXRlVHJhbnNpdGlvblR5cGUuT3V0KSB7XG5cbiAgICAgICAgLy8gU3RhcnQgdHJhbnNpdGlvbmluZyBvdXRcbiAgICAgICAgc3RhdGUudHJhbnNpdGlvblR5cGUgPSBTdGF0ZVRyYW5zaXRpb25UeXBlLk91dDtcbiAgICAgICAgc3RhdGUudHJhbnNpdGlvbkFtb3VudCA9IDA7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdGF0ZXMubGVuZ3RoKSB7XG5cbiAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSB0b3AtbW9zdCBzdGF0ZSB0aGF0IGlzbid0IGN1cnJlbnRseSB0cmFuc2l0aW9uaW5nIG91dFxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMuc3RhdGVzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZXNbaV0udHJhbnNpdGlvblR5cGUgIT09IFN0YXRlVHJhbnNpdGlvblR5cGUuT3V0KSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZXNbaV0udXBkYXRlKGR0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgYWxsIHN0YXRlIHRyYW5zaXRpb25zXG4gICAgICB0aGlzLnN0YXRlcy5mb3JFYWNoKChzdGF0ZSwgaSkgPT4ge1xuXG4gICAgICAgIC8vIFVwZGF0ZSBzdGF0ZSB0cmFuc2l0aW9uXG4gICAgICAgIGNvbnN0IGFtb3VudDogbnVtYmVyID0gZHQgLyBzdGF0ZS50cmFuc2l0aW9uVGltZTtcbiAgICAgICAgaWYgKHN0YXRlLnRyYW5zaXRpb25BbW91bnQgPCAxKSB7XG4gICAgICAgICAgc3RhdGUudHJhbnNpdGlvbkFtb3VudCA9IE1hdGguY2xhbXAoc3RhdGUudHJhbnNpdGlvbkFtb3VudCArIGFtb3VudCk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGFueSBzdGF0ZXMgdGhhdCBoYXZlIGZpbmlzaGVkIHRyYW5zaXRpb25pbmcgb3V0XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUudHJhbnNpdGlvblR5cGUgPT09IFN0YXRlVHJhbnNpdGlvblR5cGUuT3V0KSB7XG4gICAgICAgICAgc3RhdGUuZGlzcG9zZSgpO1xuICAgICAgICAgIHRoaXMuc3RhdGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICB0aGlzLmdhbWUuYXBwbGljYXRpb24uc3RhZ2UucmVtb3ZlQ2hpbGQoc3RhdGUuY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRyYXcoKTogdm9pZCB7XG4gICAgLy9cbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IHZlYyB9IGZyb20gJ0BiYXNlbWVudHVuaXZlcnNlL2NvbW1vbmpzJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9TdGF0ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRlc3RHYW1lT2JqZWN0IHtcbiAgcHJpdmF0ZSBwb3NpdGlvbjogdmVjO1xuICBwcml2YXRlIHNwcml0ZTogUElYSS5TcHJpdGU7XG5cbiAgY29uc3RydWN0b3Ioc3RhdGU6IFN0YXRlLCBwb3NpdGlvbjogdmVjKSB7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIHRoaXMuc3ByaXRlID0gUElYSS5TcHJpdGUuZnJvbSgnLi4vaW1hZ2VzL2Vycm9yLnBuZycpO1xuICAgIHRoaXMuc3ByaXRlLmFuY2hvci5zZXQoMC41KTtcbiAgICB0aGlzLnNwcml0ZS5wb3NpdGlvbi5zZXQoLi4udmVjLmNvbXBvbmVudHModGhpcy5wb3NpdGlvbikpO1xuICAgIHN0YXRlLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLnNwcml0ZSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHt9XG59XG4iLCJpbXBvcnQgeyBTdGF0ZSwgU3RhdGVPcHRpb25zIH0gZnJvbSAnLi9TdGF0ZSc7XG5pbXBvcnQgeyB2ZWMgfSBmcm9tICdAYmFzZW1lbnR1bml2ZXJzZS9jb21tb25qcyc7XG5pbXBvcnQgVGVzdEdhbWVPYmplY3QgZnJvbSAnLi9UZXN0R2FtZU9iamVjdCc7XG5pbXBvcnQgKiBhcyBQSVhJIGZyb20gJ3BpeGkuanMnO1xuaW1wb3J0IHsgU3RhdGVUcmFuc2l0aW9uVHlwZSB9IGZyb20gJy4vZW51bXMnO1xuXG5leHBvcnQgY2xhc3MgVGVzdFN0YXRlMSBleHRlbmRzIFN0YXRlIHtcbiAgcHJpdmF0ZSB0ZXN0VGV4dDogUElYSS5CaXRtYXBUZXh0O1xuICBwcml2YXRlIHRpbWVvdXQ6IG51bWJlciA9IDEwO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFBhcnRpYWw8U3RhdGVPcHRpb25zPiA9IHt9KSB7XG4gICAgc3VwZXIob3B0aW9ucyk7XG4gICAgY29uc3QgbG9hZGVyID0gbmV3IFBJWEkuTG9hZGVyKCk7XG4gICAgY29uc3QgZyA9IHRoaXM7XG4gICAgbG9hZGVyLmFkZCgndGVzdGZvbnQnLCAnZm9udHMvcmV0cm9fZ2FtaW5nLnhtbCcpLmxvYWQoKCkgPT4ge1xuICAgICAgLy8gY29uc29sZS5sb2coUElYSS5CaXRtYXBGb250LmF2YWlsYWJsZSk7XG4gICAgICBnLnRlc3RUZXh0ID0gbmV3IFBJWEkuQml0bWFwVGV4dCgnSGVsbG8sIHdvcmxkIScsIHtcbiAgICAgICAgZm9udE5hbWU6ICdSZXRyb0dhbWluZycsXG4gICAgICAgIHRpbnQ6IDB4ZmZmZmZmXG4gICAgICB9KTtcbiAgICAgIGcudGVzdFRleHQucG9zaXRpb24uc2V0KDMwLCA0MCk7XG4gICAgICBnLmNvbnRhaW5lci5hZGRDaGlsZChnLnRlc3RUZXh0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMudGltZW91dCAtPSBkdDtcbiAgICBpZiAodGhpcy50aW1lb3V0IDw9IDApIHtcbiAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyLnBvcCgpO1xuICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIucHVzaChuZXcgVGVzdFN0YXRlMigpKTtcbiAgICB9XG4gICAgbGV0IHRyYW5zaXRpb25UeXBlID0gJ25vbmUnO1xuICAgIGlmICh0aGlzLnRyYW5zaXRpb25UeXBlID09PSBTdGF0ZVRyYW5zaXRpb25UeXBlLkluKSB7XG4gICAgICB0cmFuc2l0aW9uVHlwZSA9ICdpbic7XG4gICAgfSBlbHNlIGlmICh0aGlzLnRyYW5zaXRpb25UeXBlID09PSBTdGF0ZVRyYW5zaXRpb25UeXBlLk91dCkge1xuICAgICAgdHJhbnNpdGlvblR5cGUgPSAnb3V0JztcbiAgICB9XG4gICAgaWYgKHRoaXMudGVzdFRleHQpIHtcbiAgICAgIHRoaXMudGVzdFRleHQudGV4dCA9IGAke3RyYW5zaXRpb25UeXBlfTogJHt0aGlzLnRyYW5zaXRpb25BbW91bnR9YDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRlc3RTdGF0ZTIgZXh0ZW5kcyBTdGF0ZSB7XG4gIHByaXZhdGUgdGVzdFRleHQ6IFBJWEkuQml0bWFwVGV4dDtcbiAgcHJpdmF0ZSB0ZXN0T2JqZWN0czogVGVzdEdhbWVPYmplY3RbXTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBQYXJ0aWFsPFN0YXRlT3B0aW9ucz4gPSB7fSkge1xuICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIHRoaXMudGVzdE9iamVjdHMgPSBbXTtcbiAgICBjb25zdCBsb2FkZXIgPSBuZXcgUElYSS5Mb2FkZXIoKTtcbiAgICBjb25zdCBnID0gdGhpcztcbiAgICBsb2FkZXIuYWRkKCd0ZXN0Zm9udCcsICdmb250cy9yZXRyb19nYW1pbmcueG1sJykubG9hZCgoKSA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhQSVhJLkJpdG1hcEZvbnQuYXZhaWxhYmxlKTtcbiAgICAgIGcudGVzdFRleHQgPSBuZXcgUElYSS5CaXRtYXBUZXh0KCdIZWxsbywgd29ybGQhJywge1xuICAgICAgICBmb250TmFtZTogJ1JldHJvR2FtaW5nJyxcbiAgICAgICAgdGludDogMHhmZmZmMDBcbiAgICAgIH0pO1xuICAgICAgZy50ZXN0VGV4dC5wb3NpdGlvbi5zZXQoMzAsIDcwKTtcbiAgICAgIGcuY29udGFpbmVyLmFkZENoaWxkKGcudGVzdFRleHQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGluaXRpYWxpc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuaW5pdGlhbGlzZSgpO1xuXG4gICAgdGhpcy50ZXN0T2JqZWN0cy5wdXNoKG5ldyBUZXN0R2FtZU9iamVjdCh0aGlzLCB2ZWMoNTAsIDUwKSkpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IHRyYW5zaXRpb25UeXBlID0gJ25vbmUnO1xuICAgIGlmICh0aGlzLnRyYW5zaXRpb25UeXBlID09PSBTdGF0ZVRyYW5zaXRpb25UeXBlLkluKSB7XG4gICAgICB0cmFuc2l0aW9uVHlwZSA9ICdpbic7XG4gICAgfSBlbHNlIGlmICh0aGlzLnRyYW5zaXRpb25UeXBlID09PSBTdGF0ZVRyYW5zaXRpb25UeXBlLk91dCkge1xuICAgICAgdHJhbnNpdGlvblR5cGUgPSAnb3V0JztcbiAgICB9XG4gICAgaWYgKHRoaXMudGVzdFRleHQpIHtcbiAgICAgIHRoaXMudGVzdFRleHQudGV4dCA9IGAke3RyYW5zaXRpb25UeXBlfTogJHt0aGlzLnRyYW5zaXRpb25BbW91bnR9YDtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBlbnVtIFN0YXRlVHJhbnNpdGlvblR5cGUge1xuICBJbixcbiAgT3V0LFxuICBOb25lXG59XG4iLCJpbXBvcnQgR2FtZSBmcm9tICcuL0dhbWUnO1xuXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICBjb25zdCBnYW1lID0gbmV3IEdhbWUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4tY29udGFpbmVyJykpO1xuICBnYW1lLmluaXRpYWxpc2UoKTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IFBJWEk7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgdXNlZCAnZXhwb3J0cycgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuIl0sInNvdXJjZVJvb3QiOiIifQ==