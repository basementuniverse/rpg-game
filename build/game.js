(()=>{var t={44:t=>{Math.floatEquals=(t,e,a=Number.EPSILON)=>Math.abs(t-e)<a,Math.clamp=(t,e=0,a=1)=>t<e?e:t>a?a:t,Math.frac=t=>t>=0?t-Math.floor(t):t-Math.ceil(t),Math.lerp=(t,e,a)=>t+(e-t)*a,Math.unlerp=(t,e,a)=>(a-t)/(e-t),Math.blerp=(t,e,a,r,n,s)=>Math.lerp(Math.lerp(t,e,n),Math.lerp(a,r,n),s),Math.remap=(t,e,a,r,n)=>r+(t-e)*(n-r)/(a-e),Math.smoothstep=(t,e,a)=>Math.lerp(t,e,3*Math.pow(a,2)-2*Math.pow(a,3)),Math.radians=t=>Math.PI/180*t,Math.degrees=t=>180/Math.PI*t,Math.randomBetween=(t,e)=>Math.random()*(e-t)+t,Math.randomIntBetween=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,Math.cltRandom=(t=.5,e=.5,a=2)=>{let r=0;for(let t=a;t--;)r+=Math.random();return t+(r-a/2)/(a/2)*e},Math.cltRandomInt=(t,e)=>Math.floor(t+Math.cltRandom(.5,.5,2)*(e+1-t)),Math.weightedRandom=t=>{let e=t.reduce(((t,e)=>t+e),0),a=0;const r=Math.random()*e;for(;e>r;)e-=t[a++];return a-1},Math.lerpArray=(t,e,a=Math.lerp)=>{const r=e*(t.length-1),n=Math.clamp(Math.trunc(r),0,t.length-1);return a(t[n]||0,t[n+1]||0,Math.frac(r))},Math.dot=(t,e)=>t.reduce(((t,a,r)=>t+a*e[r]),0),Array.times=(t,e)=>Array(e).fill(0).map(((e,a)=>t(a))),Array.range=t=>Array.times((t=>t),t),Object.defineProperty(Array.prototype,"at",{value:function(t){const e=this.length;return this[t<0?e-Math.abs(t+1)%e-1:t%e]}}),Object.defineProperty(Array.prototype,"chunk",{value:function(t){return Array.times((e=>this.slice(e*t,e*t+t)),Math.ceil(this.length/t))}}),Object.defineProperty(Array.prototype,"shuffle",{value:function(){return this.map((t=>[Math.random(),t])).sort(((t,e)=>t[0]-e[0])).map((t=>t[1]))}});const e=(t,e)=>t||e?"object"==typeof t?{x:t.x||0,y:t.y||0}:null==e?{x:t,y:t}:{x:t,y:e}:{x:0,y:0};e.components=t=>[t.x,t.y],e.ux=()=>e(1,0),e.uy=()=>e(0,1),e.add=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),e.mul=(t,e)=>({x:t.x*e,y:t.y*e}),e.sub=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),e.len=t=>Math.sqrt(t.x*t.x+t.y*t.y),e.manhattan=t=>Math.abs(t.x)+Math.abs(t.y),e.nor=t=>{let a=e.len(t);return a?{x:t.x/a,y:t.y/a}:e()},e.dot=(t,e)=>t.x*e.x+t.y*e.y,e.rot=(t,e)=>{let a=Math.sin(e),r=Math.cos(e);return{x:r*t.x-a*t.y,y:a*t.x+r*t.y}},e.eq=(t,e)=>t.x===e.x&&t.y===e.y,e.rad=t=>Math.atan2(t.y,t.x),e.cpy=t=>e(t),e.map=(t,e)=>({x:e(t.x,"x"),y:e(t.y,"y")}),e.str=(t,e=", ")=>`${t.x}${e}${t.y}`;const a=(t=4,e=4,a=[])=>({m:t,n:e,entries:a.concat(Array(t*e).fill(0)).slice(0,t*e)});a.identity=t=>a(t,t,Array(t*t).fill(0).map(((e,a)=>+(Math.floor(a/t)===a%t)))),a.get=(t,e,a)=>t.entries[a-1+(e-1)*t.n],a.set=(t,e,a,r)=>{t.entries[a-1+(e-1)*t.n]=r},a.row=(t,e)=>{const a=(e-1)*t.n;return t.entries.slice(a,a+t.n)},a.col=(t,e)=>Array.times((r=>a.get(t,r+1,e)),t.m),a.add=(t,e)=>t.m===e.m&&t.n===e.n&&a.map(t,((t,a)=>t+e.entries[a])),a.sub=(t,e)=>t.m===e.m&&t.n===e.n&&a.map(t,((t,a)=>t-e.entries[a])),a.mul=(t,e)=>{if(t.n!==e.m)return!1;const r=a(t.m,e.n);for(let n=1;n<=t.m;n++)for(let s=1;s<=e.n;s++)a.set(r,n,s,Math.dot(a.row(t,n),a.col(e,s)));return r},a.scale=(t,e)=>a.map(t,(t=>t*e)),a.trans=t=>a(t.n,t.m,Array.times((e=>a.col(t,e+1)),t.n).flat()),a.minor=(t,e,r)=>{if(t.m!==t.n)return!1;const n=[];for(let s=1;s<=t.m;s++)if(s!==e)for(let e=1;e<=t.n;e++)e!==r&&n.push(a.get(t,s,e));return a(t.m-1,t.n-1,n)},a.det=t=>{if(t.m!==t.n)return!1;if(1===t.m)return t.entries[0];if(2===t.m)return t.entries[0]*t.entries[3]-t.entries[1]*t.entries[2];let e=0,r=1;for(let n=1;n<=t.n;n++)e+=r*t.entries[n-1]*a.det(a.minor(t,1,n)),r*=-1;return e},a.nor=t=>{if(t.m!==t.n)return!1;const e=a.det(t);return a.map(t,(t=>t*e))},a.adj=t=>{const e=a(t.m,t.n);for(let r=1;r<=t.m;r++)for(let n=1;n<=t.n;n++)a.set(e,r,n,a.det(a.minor(t,r,n)));const r=a.map(e,((t,e)=>t*(e%2?-1:1)));return a.trans(r)},a.inv=t=>{if(t.m!==t.n)return!1;const e=a.det(t);return 0!==e&&a.scale(a.adj(t),1/e)},a.eq=(t,e)=>t.m===e.m&&t.n===e.n&&a.str(t)===a.str(e),a.cpy=t=>a(t.m,t.n,[...t.entries]),a.map=(t,e)=>a(t.m,t.n,t.entries.map(e)),a.str=(t,e=", ",a="\n")=>t.entries.chunk(t.n).map((t=>t.join(e))).join(a),t.exports={vec:e,mat:a}},76:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=a(44),n=a(269);class s{constructor(t={}){this.defaultOptions={margin:10,padding:4,font:"10pt Lucida Console, monospace",lineHeight:12,foregroundColour:"#fff",backgroundColour:"#3338",defaultValue:{align:"left",showLabel:!0},defaultMarker:{showLabel:!0,showValue:!0,showMarker:!0,markerSize:6,markerStyle:"x",markerColour:"#ccc",space:"world",labelOffset:r.vec(10)}},this.options=Object.assign({},this.defaultOptions,t),this.values=new Map,this.markers=new Map}static initialise(t={}){s.instance=new s(t)}static getInstance(){return null==s.instance&&s.initialise(),s.instance}static value(t,e,a={}){const r=s.getInstance();r.values.set(t,Object.assign({label:t,value:e},r.defaultOptions.defaultValue,a))}static marker(t,e,a,r={}){const n=s.getInstance();n.markers.set(t,Object.assign({label:t,value:e,position:a},n.defaultOptions.defaultMarker,r))}static draw(t,e){const a=s.getInstance();let n;t.save(),a.markers.forEach((e=>{"world"===e.space&&a.drawMarker(t,e)})),t.setTransform(1,0,0,1,0,0);let o=a.options.margin,i=a.options.margin;const l=a.options.lineHeight+2*a.options.padding;a.values.forEach((s=>{var h,c,u,m;switch(s.align){case"left":n=r.vec(a.options.margin,o),o+=l;break;case"right":n=r.vec(e-a.options.margin,i),i+=l}a.drawLabel(t,(s.showLabel?s.label+": ":"")+s.value,n,s.align,null!==(h=s.padding)&&void 0!==h?h:a.options.padding,null!==(c=s.font)&&void 0!==c?c:a.options.font,null!==(u=s.foregroundColour)&&void 0!==u?u:a.options.foregroundColour,null!==(m=s.backgroundColour)&&void 0!==m?m:a.options.backgroundColour)})),a.markers.forEach((e=>{"screen"===e.space&&a.drawMarker(t,e)})),a.values.clear(),a.markers.clear(),t.restore()}drawMarker(t,e){var a,s,o,i,l;t.save(),"world"===e.space&&t.scale(1/n.scaleFactor,1/n.scaleFactor);const h=r.vec.mul(null!==(a=e.position)&&void 0!==a?a:r.vec(),n.scaleFactor);if((e.showLabel||e.showValue)&&this.drawLabel(t,(e.showLabel?e.label+": ":"")+(e.showValue?""+e.value:""),r.vec.add(null!=h?h:r.vec(),e.labelOffset),"left",null!==(s=e.padding)&&void 0!==s?s:this.options.padding,null!==(o=e.font)&&void 0!==o?o:this.options.font,null!==(i=e.foregroundColour)&&void 0!==i?i:this.options.foregroundColour,null!==(l=e.backgroundColour)&&void 0!==l?l:this.options.backgroundColour),e.showMarker)switch(t.lineWidth=2,t.strokeStyle=t.fillStyle=e.markerColour,e.markerStyle){case"x":this.drawCross(t,h,e.markerSize);break;case"+":this.drawPlus(t,h,e.markerSize);break;case".":this.drawDot(t,h,e.markerSize)}t.restore()}drawLabel(t,e,a,r,n,s,o,i){t.save(),t.font=s,t.textBaseline="top";const l={width:t.measureText(e).width+2*n,height:this.options.lineHeight+2*n},h="right"===r?a.x-l.width:a.x;t.fillStyle=i,t.fillRect(h-n,a.y-n,l.width,l.height),t.fillStyle=o,t.fillText(e,h,a.y),t.restore()}drawCross(t,e,a){t.beginPath();const r=a/2;t.moveTo(e.x-r,e.y-r),t.lineTo(e.x+r,e.y+r),t.moveTo(e.x-r,e.y+r),t.lineTo(e.x+r,e.y-r),t.stroke()}drawPlus(t,e,a){t.beginPath();const r=a/2;t.moveTo(e.x,e.y-r),t.lineTo(e.x,e.y+r),t.moveTo(e.x-r,e.y),t.lineTo(e.x+r,e.y),t.stroke()}drawDot(t,e,a){t.beginPath(),t.arc(e.x,e.y,a/2,0,2*Math.PI),t.fill()}}e.default=s},221:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=a(269),n=a(601),s=a(76),o=a(44);e.default=class{constructor(t){if(this.frameRate=0,this.frameCount=0,this.testOffset=0,this.testTime=0,null===t)throw new Error("A valid container element must be specified.");if("canvas"!==t.tagName.toLowerCase())throw new Error("Container element must be a canvas.");this.canvas=t;const e=this.canvas.getContext("2d");if(null===e)throw new Error("Couldn't get a 2d context.");this.context=e,window.addEventListener("resize",this.resize.bind(this),!1),this.resize(),s.default.initialise()}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.context.imageSmoothingEnabled=!1}initialise(){this.testImage=new Image,this.testImage.src="../images/error.png",this.lastFrameTime=this.lastFrameCountTime=performance.now(),this.loop()}loop(){const t=performance.now(),e=Math.min(t-this.lastFrameTime,n.FPS_MIN);t-this.lastFrameCountTime>=1e3&&(this.lastFrameCountTime=t,this.frameRate=this.frameCount,this.frameCount=0),this.frameCount++,this.lastFrameTime=t,r.showFPS&&s.default.value("FPS",this.frameRate),this.update(e),this.draw(),window.requestAnimationFrame(this.loop.bind(this))}update(t){this.testTime+=t,this.testOffset=100*Math.sin(this.testTime/10),s.default.marker("world",this.testTime,o.vec(30,30)),s.default.marker("screen","hello!",o.vec(100,100),{showLabel:!1,space:"screen",markerStyle:"+"}),s.default.marker("screen2","hello2!",o.vec(100,130),{space:"screen",markerStyle:"."})}draw(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.setTransform(r.scaleFactor,0,0,r.scaleFactor,100+this.testOffset,100),this.context.drawImage(this.testImage,0,0),s.default.draw(this.context,this.canvas.width)}}},601:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FPS_MIN=void 0,e.FPS_MIN=1/30},607:(t,e,a)=>{"use strict";const r=a(221);window.onload=()=>{new r.default(document.querySelector("#game")).initialise()}},269:t=>{"use strict";t.exports=JSON.parse('{"title":"RPG Game","scaleFactor":2,"showFPS":true}')}},e={};!function a(r){if(e[r])return e[r].exports;var n=e[r]={exports:{}};return t[r](n,n.exports,a),n.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ycGctZ2FtZS8uL25vZGVfbW9kdWxlcy9AYmFzZW1lbnR1bml2ZXJzZS9jb21tb25qcy9jb21tb24uanMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvRGVidWcudHMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvR2FtZS50cyIsIndlYnBhY2s6Ly9ycGctZ2FtZS8uL3NyYy9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbIk1hdGgiLCJmbG9hdEVxdWFscyIsImEiLCJiIiwicCIsIk51bWJlciIsIkVQU0lMT04iLCJhYnMiLCJjbGFtcCIsIm1pbiIsIm1heCIsImZyYWMiLCJmbG9vciIsImNlaWwiLCJsZXJwIiwiaSIsInVubGVycCIsImJsZXJwIiwiYzAwIiwiYzEwIiwiYzAxIiwiYzExIiwiaXgiLCJpeSIsInJlbWFwIiwiYTEiLCJhMiIsImIxIiwiYjIiLCJzbW9vdGhzdGVwIiwicG93IiwicmFkaWFucyIsImRlZ3JlZXMiLCJQSSIsInJhbmRvbUJldHdlZW4iLCJyYW5kb20iLCJyYW5kb21JbnRCZXR3ZWVuIiwiY2x0UmFuZG9tIiwibXUiLCJzaWdtYSIsInNhbXBsZXMiLCJ0b3RhbCIsImNsdFJhbmRvbUludCIsIndlaWdodGVkUmFuZG9tIiwidyIsInJlZHVjZSIsIm4iLCJyIiwibGVycEFycmF5IiwiZiIsInMiLCJsZW5ndGgiLCJ0cnVuYyIsImRvdCIsInYiLCJBcnJheSIsInRpbWVzIiwiZmlsbCIsIm1hcCIsIl8iLCJyYW5nZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwicHJvdG90eXBlIiwidmFsdWUiLCJsIiwidGhpcyIsInNsaWNlIiwic29ydCIsInZlYyIsIngiLCJ5IiwiY29tcG9uZW50cyIsInV4IiwidXkiLCJhZGQiLCJtdWwiLCJzdWIiLCJsZW4iLCJzcXJ0IiwibWFuaGF0dGFuIiwibm9yIiwicm90Iiwic2luIiwiYyIsImNvcyIsImVxIiwicmFkIiwiYXRhbjIiLCJjcHkiLCJzdHIiLCJtYXQiLCJtIiwiZW50cmllcyIsImNvbmNhdCIsImlkZW50aXR5IiwiZ2V0IiwiaiIsInNldCIsInJvdyIsImNvbCIsInJlc3VsdCIsInNjYWxlIiwidHJhbnMiLCJmbGF0IiwibWlub3IiLCJpaSIsImpqIiwicHVzaCIsImRldCIsInNpZ24iLCJkIiwiYWRqIiwibWlub3JzIiwiY29mYWN0b3JzIiwiaW52IiwibXMiLCJucyIsImNodW5rIiwiam9pbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJEZWJ1ZyIsIm9wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsIm1hcmdpbiIsInBhZGRpbmciLCJmb250IiwibGluZUhlaWdodCIsImZvcmVncm91bmRDb2xvdXIiLCJiYWNrZ3JvdW5kQ29sb3VyIiwiZGVmYXVsdFZhbHVlIiwiYWxpZ24iLCJzaG93TGFiZWwiLCJkZWZhdWx0TWFya2VyIiwic2hvd1ZhbHVlIiwic2hvd01hcmtlciIsIm1hcmtlclNpemUiLCJtYXJrZXJTdHlsZSIsIm1hcmtlckNvbG91ciIsInNwYWNlIiwibGFiZWxPZmZzZXQiLCJhc3NpZ24iLCJ2YWx1ZXMiLCJNYXAiLCJtYXJrZXJzIiwiaW5zdGFuY2UiLCJpbml0aWFsaXNlIiwibGFiZWwiLCJkZWJ1ZyIsImdldEluc3RhbmNlIiwicG9zaXRpb24iLCJjb250ZXh0Iiwid2lkdGgiLCJzYXZlIiwiZm9yRWFjaCIsIm1hcmtlciIsImRyYXdNYXJrZXIiLCJzZXRUcmFuc2Zvcm0iLCJsZWZ0WSIsInJpZ2h0WSIsImRyYXdMYWJlbCIsImNsZWFyIiwicmVzdG9yZSIsImNvbmZpZyIsInNjYWxlRmFjdG9yIiwibGluZVdpZHRoIiwic3Ryb2tlU3R5bGUiLCJmaWxsU3R5bGUiLCJkcmF3Q3Jvc3MiLCJkcmF3UGx1cyIsImRyYXdEb3QiLCJ0ZXh0IiwidGV4dEJhc2VsaW5lIiwiYmFja2dyb3VuZFNpemUiLCJtZWFzdXJlVGV4dCIsImhlaWdodCIsImZpbGxSZWN0IiwiZmlsbFRleHQiLCJzaXplIiwiYmVnaW5QYXRoIiwiaGFsZlNpemUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJhcmMiLCJjb250YWluZXIiLCJmcmFtZVJhdGUiLCJmcmFtZUNvdW50IiwidGVzdE9mZnNldCIsInRlc3RUaW1lIiwiRXJyb3IiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJjYW52YXMiLCJnZXRDb250ZXh0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2l6ZSIsImJpbmQiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJ0ZXN0SW1hZ2UiLCJJbWFnZSIsInNyYyIsImxhc3RGcmFtZVRpbWUiLCJsYXN0RnJhbWVDb3VudFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImxvb3AiLCJlbGFwc2VkVGltZSIsImNvbnN0YW50cyIsIkZQU19NSU4iLCJzaG93RlBTIiwidXBkYXRlIiwiZHJhdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImR0IiwiY2xlYXJSZWN0IiwiZHJhd0ltYWdlIiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyJdLCJtYXBwaW5ncyI6Im9CQWVBQSxLQUFLQyxZQUFjLENBQUNDLEVBQUdDLEVBQUdDLEVBQUlDLE9BQU9DLFVBQVlOLEtBQUtPLElBQUlMLEVBQUlDLEdBQUtDLEVBU25FSixLQUFLUSxNQUFRLENBQUNOLEVBQUdPLEVBQU0sRUFBR0MsRUFBTSxJQUFNUixFQUFJTyxFQUFNQSxFQUFPUCxFQUFJUSxFQUFNQSxFQUFNUixFQU92RUYsS0FBS1csS0FBT1QsR0FBS0EsR0FBSyxFQUFJQSxFQUFJRixLQUFLWSxNQUFNVixH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RyxHQUcvQ3pHLEVBQU9DLFFDbEJmd0csQ0FBb0IsTSIsImZpbGUiOiJnYW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAb3ZlcnZpZXcgQSBsaWJyYXJ5IG9mIHVzZWZ1bCBmdW5jdGlvbnNcbiAqIEBhdXRob3IgR29yZG9uIExhcnJpZ2FuXG4gKiBAdmVyc2lvbiAxLjIuNlxuICovXG5cbi8qKiBAY2xhc3MgTWF0aCAqL1xuXG4vKipcbiAqIENoZWNrIGlmIHR3byBudW1iZXJzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKiBAcGFyYW0ge251bWJlcn0gYSBOdW1iZXIgYVxuICogQHBhcmFtIHtudW1iZXJ9IGIgTnVtYmVyIGJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbcD1OdW1iZXIuRVBTSUxPTl0gVGhlIHByZWNpc2lvbiB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBudW1iZXJzIGEgYW5kIGIgYXJlIGFwcHJveGltYXRlbHkgZXF1YWxcbiAqL1xuTWF0aC5mbG9hdEVxdWFscyA9IChhLCBiLCBwID0gTnVtYmVyLkVQU0lMT04pID0+IE1hdGguYWJzKGEgLSBiKSA8IHA7XG5cbi8qKlxuICogQ2xhbXAgYSBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heFxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIG51bWJlciB0byBjbGFtcFxuICogQHBhcmFtIHtudW1iZXJ9IFttaW49MF0gVGhlIG1pbmltdW0gdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4PTFdIFRoZSBtYXhpbXVtIHZhbHVlXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgY2xhbXBlZCBudW1iZXJcbiAqL1xuTWF0aC5jbGFtcCA9IChhLCBtaW4gPSAwLCBtYXggPSAxKSA9PiBhIDwgbWluID8gbWluIDogKGEgPiBtYXggPyBtYXggOiBhKTtcblxuLyoqXG4gKiBHZXQgdGhlIGZyYWN0aW9uYWwgcGFydCBvZiBhIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIG51bWJlciBmcm9tIHdoaWNoIHRvIGdldCB0aGUgZnJhY3Rpb25hbCBwYXJ0XG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBmcmFjdGlvbmFsIHBhcnQgb2YgdGhlIG51bWJlclxuICovXG5NYXRoLmZyYWMgPSBhID0+IGEgPj0gMCA/IGEgLSBNYXRoLmZsb29yKGEpIDogYSAtIE1hdGguY2VpbChhKTtcblxuLyoqXG4gKiBEbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gYSBhbmQgYlxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIG1pbmltdW0gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgbWF4aW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSBpbnRlcnBvbGF0aW9uIHZhbHVlLCBzaG91bGQgYmUgaW4gdGhlIGludGVydmFsIFswLCAxXVxuICogQHJldHVybiB7bnVtYmVyfSBBbiBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gdGhlIGludGVydmFsIFthLCBiXVxuICovXG5NYXRoLmxlcnAgPSAoYSwgYiwgaSkgPT4gYSArIChiIC0gYSkgKiBpO1xuXG4vKipcbiAqIEdldCB0aGUgcG9zaXRpb24gb2YgaSBiZXR3ZWVuIGEgYW5kIGJcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIFRoZSBtaW5pbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGIgVGhlIG1heGltdW0gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgaW50ZXJwb2xhdGVkIHZhbHVlIGluIHRoZSBpbnRlcnZhbCBbYSwgYl1cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHBvc2l0aW9uIG9mIGkgYmV0d2VlbiBhIGFuZCBiXG4gKi9cbk1hdGgudW5sZXJwID0gKGEsIGIsIGkpID0+IChpIC0gYSkgLyAoYiAtIGEpO1xuXG4vKipcbiAqIERvIGEgYmlsaW5lYXIgaW50ZXJwb2xhdGlvblxuICogQHBhcmFtIHtudW1iZXJ9IGMwMCBUb3AtbGVmdCB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGMxMCBUb3AtcmlnaHQgdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjMDEgQm90dG9tLWxlZnQgdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjMTEgQm90dG9tLXJpZ2h0IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gaXggSW50ZXJwb2xhdGlvbiB2YWx1ZSBhbG9uZyB4XG4gKiBAcGFyYW0ge251bWJlcn0gaXkgSW50ZXJwb2xhdGlvbiB2YWx1ZSBhbG9uZyB5XG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgYmlsaW5lYXIgaW50ZXJwb2xhdGVkIHZhbHVlXG4gKi9cbk1hdGguYmxlcnAgPSAoYzAwLCBjMTAsIGMwMSwgYzExLCBpeCwgaXkpID0+IE1hdGgubGVycChNYXRoLmxlcnAoYzAwLCBjMTAsIGl4KSwgTWF0aC5sZXJwKGMwMSwgYzExLCBpeCksIGl5KTtcblxuLyoqXG4gKiBSZS1tYXAgYSBudW1iZXIgaSBmcm9tIHJhbmdlIGExLT5hMiB0byBiMS0+YjJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSBudW1iZXIgdG8gcmUtbWFwXG4gKiBAcGFyYW0ge251bWJlcn0gYTFcbiAqIEBwYXJhbSB7bnVtYmVyfSBhMlxuICogQHBhcmFtIHtudW1iZXJ9IGIxXG4gKiBAcGFyYW0ge251bWJlcn0gYjJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuTWF0aC5yZW1hcCA9IChpLCBhMSwgYTIsIGIxLCBiMikgPT4gYjEgKyAoaSAtIGExKSAqIChiMiAtIGIxKSAvIChhMiAtIGExKTtcblxuLyoqXG4gKiBEbyBhIHNtb290aCBpbnRlcnBvbGF0aW9uIGJldHdlZW4gYSBhbmQgYlxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIG1pbmltdW0gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgbWF4aW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSBpbnRlcnBvbGF0aW9uIHZhbHVlXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuIGludGVycG9sYXRlZCB2YWx1ZSBpbiB0aGUgaW50ZXJ2YWwgW2EsIGJdXG4gKi9cbk1hdGguc21vb3Roc3RlcCA9IChhLCBiLCBpKSA9PiBNYXRoLmxlcnAoYSwgYiwgMyAqIE1hdGgucG93KGksIDIpIC0gMiAqIE1hdGgucG93KGksIDMpKTtcblxuLyoqXG4gKiBHZXQgYW4gYW5nbGUgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGRlZ3JlZXMgVGhlIGFuZ2xlIGluIGRlZ3JlZXNcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqL1xuTWF0aC5yYWRpYW5zID0gZGVncmVlcyA9PiAoTWF0aC5QSSAvIDE4MCkgKiBkZWdyZWVzO1xuXG4vKipcbiAqIEdldCBhbiBhbmdsZSBpbiBkZWdyZWVzXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFucyBUaGUgYW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYW5nbGUgaW4gZGVncmVlc1xuICovXG5NYXRoLmRlZ3JlZXMgPSByYWRpYW5zID0+ICgxODAgLyBNYXRoLlBJKSAqIHJhZGlhbnM7XG5cbi8qKlxuICogR2V0IGEgcmFuZG9tIGZsb2F0IGluIHRoZSBpbnRlcnZhbCBbbWluLCBtYXgpXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIEluY2x1c2l2ZSBtaW5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggRXhjbHVzaXZlIG1heFxuICogQHJldHVybiB7bnVtYmVyfSBBIHJhbmRvbSBmbG9hdCBpbiB0aGUgaW50ZXJ2YWwgW21pbiwgbWF4KVxuICovXG5NYXRoLnJhbmRvbUJldHdlZW4gPSAobWluLCBtYXgpID0+IE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjtcblxuLyoqXG4gKiBHZXQgYSByYW5kb20gaW50ZWdlciBpbiB0aGUgaW50ZXJ2YWwgW21pbiwgbWF4XVxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiBJbmNsdXNpdmUgbWluXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IEluY2x1c2l2ZSBtYXhcbiAqIEByZXR1cm4ge251bWJlcn0gQSByYW5kb20gaW50ZWdlciBpbiB0aGUgaW50ZXJ2YWwgW21pbiwgbWF4XVxuICovXG5NYXRoLnJhbmRvbUludEJldHdlZW4gPSAobWluLCBtYXgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG5cbi8qKlxuICogR2V0IGEgbm9ybWFsbHktZGlzdHJpYnV0ZWQgcmFuZG9tIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IFttdT0wLjVdIFRoZSBtZWFuIHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gW3NpZ21hPTAuNV0gVGhlIHN0YW5kYXJkIGRldmlhdGlvblxuICogQHBhcmFtIHtudW1iZXJ9IFtzYW1wbGVzPTJdIFRoZSBudW1iZXIgb2Ygc2FtcGxlc1xuICogQHJldHVybiB7bnVtYmVyfSBBIG5vcm1hbGx5LWRpc3RyaWJ1dGVkIHJhbmRvbSBudW1iZXJcbiAqL1xuTWF0aC5jbHRSYW5kb20gPSAobXUgPSAwLjUsIHNpZ21hID0gMC41LCBzYW1wbGVzID0gMikgPT4ge1xuICBsZXQgdG90YWwgPSAwO1xuICBmb3IgKGxldCBpID0gc2FtcGxlczsgaS0tOykge1xuICAgIHRvdGFsICs9IE1hdGgucmFuZG9tKCk7XG4gIH1cbiAgcmV0dXJuIG11ICsgKHRvdGFsIC0gc2FtcGxlcyAvIDIpIC8gKHNhbXBsZXMgLyAyKSAqIHNpZ21hO1xufTtcblxuLyoqXG4gKiBHZXQgYSBub3JtYWxseS1kaXN0cmlidXRlZCByYW5kb20gaW50ZWdlciBpbiB0aGUgaW50ZXJ2YWwgW21pbiwgbWF4XVxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiBJbmNsdXNpdmUgbWluXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IEluY2x1c2l2ZSBtYXhcbiAqIEByZXR1cm4ge251bWJlcn0gQSBub3JtYWxseS1kaXN0cmlidXRlZCByYW5kb20gaW50ZWdlclxuICovXG5NYXRoLmNsdFJhbmRvbUludCA9IChtaW4sIG1heCkgPT4gTWF0aC5mbG9vcihtaW4gKyBNYXRoLmNsdFJhbmRvbSgwLjUsIDAuNSwgMikgKiAobWF4ICsgMSAtIG1pbikpO1xuXG4vKipcbiAqIFJldHVybiBhIHdlaWdodGVkIHJhbmRvbSBpbnRlZ2VyXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHcgQW4gYXJyYXkgb2Ygd2VpZ2h0c1xuICogQHJldHVybiB7bnVtYmVyfSBBbiBpbmRleCBmcm9tIHdcbiAqL1xuTWF0aC53ZWlnaHRlZFJhbmRvbSA9IHcgPT4ge1xuICBsZXQgdG90YWwgPSB3LnJlZHVjZSgoYSwgaSkgPT4gYSArIGksIDApLCBuID0gMDtcbiAgY29uc3QgciA9IE1hdGgucmFuZG9tKCkgKiB0b3RhbDtcbiAgd2hpbGUgKHRvdGFsID4gcikge1xuICAgIHRvdGFsIC09IHdbbisrXTtcbiAgfVxuICByZXR1cm4gbiAtIDE7XG59O1xuXG4vKipcbiAqIEFuIGludGVycG9sYXRpb24gZnVuY3Rpb25cbiAqIEBjYWxsYmFjayBpbnRlcnBvbGF0aW9uQ2FsbGJhY2tcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIFRoZSBtaW5pbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGIgVGhlIG1heGltdW0gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgaW50ZXJwb2xhdGlvbiB2YWx1ZSwgc2hvdWxkIGJlIGluIHRoZSBpbnRlcnZhbCBbMCwgMV1cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGludGVycG9sYXRlZCB2YWx1ZSBpbiB0aGUgaW50ZXJ2YWwgW2EsIGJdXG4gKi9cblxuLyoqXG4gKiBSZXR1cm4gYW4gaW50ZXJwb2xhdGVkIHZhbHVlIGZyb20gYW4gYXJyYXlcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYSBBbiBhcnJheSBvZiB2YWx1ZXMgaW50ZXJwb2xhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIEEgbnVtYmVyIGluIHRoZSBpbnRlcnZhbCBbMCwgMV1cbiAqIEBwYXJhbSB7aW50ZXJwb2xhdGlvbkNhbGxiYWNrfSBbZj1NYXRoLmxlcnBdIFRoZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uIHRvIHVzZVxuICogQHJldHVybiB7bnVtYmVyfSBBbiBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gdGhlIGludGVydmFsIFttaW4oYSksIG1heChhKV1cbiAqL1xuTWF0aC5sZXJwQXJyYXkgPSAoYSwgaSwgZiA9IE1hdGgubGVycCkgPT4ge1xuICBjb25zdCBzID0gaSAqIChhLmxlbmd0aCAtIDEpO1xuICBjb25zdCBwID0gTWF0aC5jbGFtcChNYXRoLnRydW5jKHMpLCAwLCBhLmxlbmd0aCAtIDEpO1xuICByZXR1cm4gZihhW3BdIHx8IDAsIGFbcCArIDFdIHx8IDAsIE1hdGguZnJhYyhzKSk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYSBWZWN0b3IgYVxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBiIFZlY3RvciBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9IGEg4oiZIGJcbiAqL1xuTWF0aC5kb3QgPSAoYSwgYikgPT4gYS5yZWR1Y2UoKG4sIHYsIGkpID0+IG4gKyB2ICogYltpXSwgMCk7XG5cbi8qKiBAY2xhc3MgQXJyYXkgKi9cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIGZvciBnZW5lcmF0aW5nIGFycmF5IHZhbHVlc1xuICogQGNhbGxiYWNrIHRpbWVzQ2FsbGJhY2tcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSBhcnJheSBpbmRleFxuICogQHJldHVybiB7Kn0gVGhlIGFycmF5IHZhbHVlXG4gKi9cblxuLyoqXG4gKiBSZXR1cm4gYSBuZXcgYXJyYXkgd2l0aCBsZW5ndGggbiBieSBjYWxsaW5nIGZ1bmN0aW9uIGYoaSkgb24gZWFjaCBlbGVtZW50XG4gKiBAcGFyYW0ge3RpbWVzQ2FsbGJhY2t9IGZcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBzaXplIG9mIHRoZSBhcnJheVxuICogQHJldHVybiB7QXJyYXk8Kj59XG4gKi9cbkFycmF5LnRpbWVzID0gKGYsIG4pID0+IEFycmF5KG4pLmZpbGwoMCkubWFwKChfLCBpKSA9PiBmKGkpKTtcblxuLyoqXG4gKiBSZXR1cm4gYW4gYXJyYXkgY29udGFpbmluZyBudW1iZXJzIDAtPihuIC0gMSlcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBzaXplIG9mIHRoZSBhcnJheVxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gQW4gYXJyYXkgb2YgaW50ZWdlcnMgMC0+KG4gLSAxKVxuICovXG5BcnJheS5yYW5nZSA9IG4gPT4gQXJyYXkudGltZXMoaSA9PiBpLCBuKTtcblxuLyoqXG4gKiBSZXR1cm4gYXJyYXlbaV0gd2l0aCBwb3NpdGl2ZSBhbmQgbmVnYXRpdmUgd3JhcHBpbmdcbiAqIEBuYW1lIGF0XG4gKiBAZnVuY3Rpb25cbiAqIEBtZW1iZXJvZiBBcnJheS5wcm90b3R5cGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSBwb3NpdGl2ZWx5L25lZ2F0aXZlbHkgd3JhcHBlZCBhcnJheSBpbmRleFxuICogQHJldHVybiB7Kn0gQW4gZWxlbWVudCBmcm9tIHRoZSBhcnJheVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnYXQnLCB7XG4gIHZhbHVlOiBmdW5jdGlvbiAoaSkge1xuICAgIGNvbnN0IGwgPSB0aGlzLmxlbmd0aDtcbiAgICByZXR1cm4gdGhpc1tpIDwgMCA/IGwgLSAoTWF0aC5hYnMoaSArIDEpICUgbCkgLSAxIDogaSAlIGxdO1xuICB9XG59KTtcblxuLyoqXG4gKiBDaG9wIGFuIGFycmF5IGludG8gY2h1bmtzIG9mIHNpemUgblxuICogQG5hbWUgY2h1bmtcbiAqIEBmdW5jdGlvblxuICogQG1lbWJlcm9mIEFycmF5LnByb3RvdHlwZVxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIGNodW5rIHNpemVcbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PCo+Pn0gQW4gYXJyYXkgb2YgYXJyYXkgY2h1bmtzXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdjaHVuaycsIHtcbiAgdmFsdWU6IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIEFycmF5LnRpbWVzKGkgPT4gdGhpcy5zbGljZShpICogbiwgaSAqIG4gKyBuKSwgTWF0aC5jZWlsKHRoaXMubGVuZ3RoIC8gbikpO1xuICB9XG59KTtcblxuLyoqXG4gKiBSYW5kb21seSBzaHVmZmxlIGFuIGFycmF5IGluLXBsYWNlXG4gKiBAbmFtZSBzaHVmZmxlXG4gKiBAZnVuY3Rpb25cbiAqIEBtZW1iZXJvZiBBcnJheS5wcm90b3R5cGVcbiAqIEByZXR1cm4ge0FycmF5PCo+fSBUaGUgc2h1ZmZsZWQgYXJyYXlcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ3NodWZmbGUnLCB7XG4gIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGEgPT4gW01hdGgucmFuZG9tKCksIGFdKS5zb3J0KChhLCBiKSA9PiBhWzBdIC0gYlswXSkubWFwKGEgPT4gYVsxXSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEEgMmQgdmVjdG9yXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSB2ZWNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB4IFRoZSB4IGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXG4gKiBAcHJvcGVydHkge251bWJlcn0geSBUaGUgeSBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxuICovXG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHZlY3RvclxuICogQHBhcmFtIHtudW1iZXJ8dmVjfSBbeF0gVGhlIHggY29tcG9uZW50IG9mIHRoZSB2ZWN0b3IsIG9yIGEgdmVjdG9yIHRvIGNvcHlcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeV0gVGhlIHkgY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcbiAqIEByZXR1cm4ge3ZlY30gQSBuZXcgdmVjdG9yXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5WYXJpb3VzIHdheXMgdG8gaW5pdGlhbGlzZSBhIHZlY3RvcjwvY2FwdGlvbj5cbiAqIGxldCBhID0gdmVjKDMsIDIpOyAgLy8gKDMsIDIpXG4gKiBsZXQgYiA9IHZlYyg0KTsgICAgIC8vICg0LCA0KVxuICogbGV0IGMgPSB2ZWMoYSk7ICAgICAvLyAoMywgMilcbiAqIGxldCBkID0gdmVjKCk7ICAgICAgLy8gKDAsIDApXG4gKi9cbmNvbnN0IHZlYyA9ICh4LCB5KSA9PiAoIXggJiYgIXkgP1xuICB7IHg6IDAsIHk6IDAgfSA6ICh0eXBlb2YgeCA9PT0gJ29iamVjdCcgP1xuICAgIHsgeDogeC54IHx8IDAsIHk6IHgueSB8fCAwIH0gOiAoeSA9PT0gbnVsbCB8fCB5ID09PSB1bmRlZmluZWQgP1xuICAgICAgeyB4OiB4LCB5OiB4IH0gOiB7IHg6IHgsIHk6IHkgfSlcbiAgKVxuKTtcblxuLyoqXG4gKiBHZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWN0b3IgYXMgYW4gYXJyYXlcbiAqIEBwYXJhbSB7dmVjfSBhIFRoZSB2ZWN0b3IgdG8gZ2V0IGNvbXBvbmVudHMgZnJvbVxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVGhlIHZlY3RvciBjb21wb25lbnRzIGFzIGFuIGFycmF5XG4gKi9cbnZlYy5jb21wb25lbnRzID0gYSA9PiBbYS54LCBhLnldO1xuXG4vKipcbiAqIFJldHVybiBhIHVuaXQgdmVjdG9yICgxLCAwKVxuICogQHJldHVybiB7dmVjfSBBIHVuaXQgdmVjdG9yICgxLCAwKVxuICovXG52ZWMudXggPSAoKSA9PiB2ZWMoMSwgMCk7XG5cbi8qKlxuICogUmV0dXJuIGEgdW5pdCB2ZWN0b3IgKDAsIDEpXG4gKiBAcmV0dXJuIHt2ZWN9IEEgdW5pdCB2ZWN0b3IgKDAsIDEpXG4gKi9cbnZlYy51eSA9ICgpID0+IHZlYygwLCAxKTtcblxuLyoqXG4gKiBBZGQgdmVjdG9yc1xuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEBwYXJhbSB7dmVjfSBiIFZlY3RvciBiXG4gKiBAcmV0dXJuIHt2ZWN9IGEgKyBiXG4gKi9cbnZlYy5hZGQgPSAoYSwgYikgPT4gKHsgeDogYS54ICsgYi54LCB5OiBhLnkgKyBiLnkgfSk7XG5cbi8qKlxuICogU2NhbGUgYSB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcGFyYW0ge251bWJlcn0gYiBTY2FsYXIgYlxuICogQHJldHVybiB7dmVjfSBhICogYlxuICovXG52ZWMubXVsID0gKGEsIGIpID0+ICh7IHg6IGEueCAqIGIsIHk6IGEueSAqIGIgfSk7XG5cbi8qKlxuICogU3VidHJhY3QgdmVjdG9yc1xuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEBwYXJhbSB7dmVjfSBiIFZlY3RvciBiXG4gKiBAcmV0dXJuIHt2ZWN9IGEgLSBiXG4gKi9cbnZlYy5zdWIgPSAoYSwgYikgPT4gKHsgeDogYS54IC0gYi54LCB5OiBhLnkgLSBiLnkgfSk7XG5cbi8qKlxuICogR2V0IHRoZSBsZW5ndGggb2YgYSB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHxhfFxuICovXG52ZWMubGVuID0gYSA9PiBNYXRoLnNxcnQoYS54ICogYS54ICsgYS55ICogYS55KTtcblxuLyoqXG4gKiBHZXQgdGhlIGxlbmd0aCBvZiBhIHZlY3RvciB1c2luZyB0YXhpY2FiIGdlb21ldHJ5XG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHJldHVybiB7bnVtYmVyfSB8YXxcbiAqL1xudmVjLm1hbmhhdHRhbiA9IGEgPT4gTWF0aC5hYnMoYS54KSArIE1hdGguYWJzKGEueSk7XG5cbi8qKlxuICogTm9ybWFsaXNlIGEgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlY30gYSBUaGUgdmVjdG9yIHRvIG5vcm1hbGlzZVxuICogQHJldHVybiB7dmVjfSBeYVxuICovXG52ZWMubm9yID0gYSA9PiB7XG4gIGxldCBsZW4gPSB2ZWMubGVuKGEpO1xuICByZXR1cm4gbGVuID8geyB4OiBhLnggLyBsZW4sIHk6IGEueSAvIGxlbiB9IDogdmVjKCk7XG59O1xuXG4vKipcbiAqIEdldCBhIGRvdCBwcm9kdWN0IG9mIHZlY3RvcnNcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcGFyYW0ge3ZlY30gYiBWZWN0b3IgYlxuICogQHJldHVybiB7bnVtYmVyfSBhIOKImSBiXG4gKi9cbnZlYy5kb3QgPSAoYSwgYikgPT4gYS54ICogYi54ICsgYS55ICogYi55O1xuXG4vKipcbiAqIFJvdGF0ZSBhIHZlY3RvciBieSByIHJhZGlhbnNcbiAqIEBwYXJhbSB7dmVjfSBhIFRoZSB2ZWN0b3IgdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gciBUaGUgYW5nbGUgdG8gcm90YXRlIGJ5LCBtZWFzdXJlZCBpbiByYWRpYW5zXG4gKiBAcmV0dXJuIHt2ZWN9IEEgcm90YXRlZCB2ZWN0b3JcbiAqL1xudmVjLnJvdCA9IChhLCByKSA9PiB7XG4gIGxldCBzID0gTWF0aC5zaW4ociksXG4gICAgYyA9IE1hdGguY29zKHIpO1xuICByZXR1cm4geyB4OiBjICogYS54IC0gcyAqIGEueSwgeTogcyAqIGEueCArIGMgKiBhLnkgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gdmVjdG9ycyBhcmUgZXF1YWxcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcGFyYW0ge3ZlY30gYiBWZWN0b3IgYlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB2ZWN0b3JzIGEgYW5kIGIgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xudmVjLmVxID0gKGEsIGIpID0+IGEueCA9PT0gYi54ICYmIGEueSA9PT0gYi55O1xuXG4vKipcbiAqIEdldCB0aGUgYW5nbGUgb2YgYSB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBhbmdsZSBvZiB2ZWN0b3IgYSBpbiByYWRpYW5zXG4gKi9cbnZlYy5yYWQgPSBhID0+IE1hdGguYXRhbjIoYS55LCBhLngpO1xuXG4vKipcbiAqIENvcHkgYSB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjfSBhIFRoZSB2ZWN0b3IgdG8gY29weVxuICogQHJldHVybiB7dmVjfSBBIGNvcHkgb2YgdmVjdG9yIGFcbiAqL1xudmVjLmNweSA9IGEgPT4gdmVjKGEpO1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gdG8gY2FsbCBvbiBlYWNoIGNvbXBvbmVudCBvZiBhIHZlY3RvclxuICogQGNhbGxiYWNrIHZlY3Rvck1hcENhbGxiYWNrXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVGhlIGNvbXBvbmVudCB2YWx1ZVxuICogQHBhcmFtIHsneCcgfCAneSd9IGxhYmVsIFRoZSBjb21wb25lbnQgbGFiZWwgKHggb3IgeSlcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1hcHBlZCBjb21wb25lbnRcbiAqL1xuXG4vKipcbiAqIENhbGwgYSBmdW5jdGlvbiBvbiBlYWNoIGNvbXBvbmVudCBvZiBhIHZlY3RvciBhbmQgYnVpbGQgYSBuZXcgdmVjdG9yIGZyb20gdGhlIHJlc3VsdHNcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcGFyYW0ge3ZlY3Rvck1hcENhbGxiYWNrfSBmIFRoZSBmdW5jdGlvbiB0byBjYWxsIG9uIGVhY2ggY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcbiAqIEByZXR1cm4ge3ZlY30gVmVjdG9yIGEgbWFwcGVkIHRocm91Z2ggZlxuICovXG52ZWMubWFwID0gKGEsIGYpID0+ICh7IHg6IGYoYS54LCAneCcpLCB5OiBmKGEueSwgJ3knKSB9KTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgdmVjdG9yIGludG8gYSBzdHJpbmdcbiAqIEBwYXJhbSB7dmVjfSBhIFRoZSB2ZWN0b3IgdG8gY29udmVydFxuICogQHBhcmFtIHtzdHJpbmd9IFtzPScsICddIFRoZSBzZXBhcmF0b3Igc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xudmVjLnN0ciA9IChhLCBzID0gJywgJykgPT4gYCR7YS54fSR7c30ke2EueX1gO1xuXG4vKipcbiAqIEEgbWF0cml4XG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBtYXRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtIFRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgbWF0cml4XG4gKiBAcHJvcGVydHkge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIG1hdHJpeFxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBlbnRyaWVzIFRoZSBtYXRyaXggdmFsdWVzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbWF0cml4XG4gKiBAcGFyYW0ge251bWJlcn0gW209NF0gVGhlIG51bWJlciBvZiByb3dzXG4gKiBAcGFyYW0ge251bWJlcn0gW249NF0gVGhlIG51bWJlciBvZiBjb2x1bW5zXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtlbnRyaWVzPVtdXSBNYXRyaXggdmFsdWVzIGluIHJlYWRpbmcgb3JkZXJcbiAqIEByZXR1cm4ge21hdH0gQSBuZXcgbWF0cml4XG4gKi9cbmNvbnN0IG1hdCA9IChtID0gNCwgbiA9IDQsIGVudHJpZXMgPSBbXSkgPT4gKHtcbiAgbSwgbixcbiAgZW50cmllczogZW50cmllcy5jb25jYXQoQXJyYXkobSAqIG4pLmZpbGwoMCkpLnNsaWNlKDAsIG0gKiBuKVxufSk7XG5cbi8qKlxuICogR2V0IGFuIGlkZW50aXR5IG1hdHJpeCBvZiBzaXplIG5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBzaXplIG9mIHRoZSBtYXRyaXhcbiAqIEByZXR1cm4ge21hdH0gQW4gaWRlbnRpdHkgbWF0cml4XG4gKi9cbm1hdC5pZGVudGl0eSA9IG4gPT4gbWF0KG4sIG4sIEFycmF5KG4gKiBuKS5maWxsKDApLm1hcCgodiwgaSkgPT4gKyhNYXRoLmZsb29yKGkgLyBuKSA9PT0gaSAlIG4pKSk7XG5cbi8qKlxuICogR2V0IGFuIGVudHJ5IGZyb20gYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgcm93IG9mZnNldFxuICogQHBhcmFtIHtudW1iZXJ9IGogVGhlIGNvbHVtbiBvZmZzZXRcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHZhbHVlIGF0IHBvc2l0aW9uIChpLCBqKSBpbiBtYXRyaXggYVxuICovXG5tYXQuZ2V0ID0gKGEsIGksIGopID0+IGEuZW50cmllc1soaiAtIDEpICsgKGkgLSAxKSAqIGEubl07XG5cbi8qKlxuICogU2V0IGFuIGVudHJ5IG9mIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIHJvdyBvZmZzZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBqIFRoZSBjb2x1bW4gb2Zmc2V0XG4gKiBAcGFyYW0ge251bWJlcn0gdiBUaGUgdmFsdWUgdG8gc2V0IGluIG1hdHJpeCBhXG4gKi9cbm1hdC5zZXQgPSAoYSwgaSwgaiwgdikgPT4geyBhLmVudHJpZXNbKGogLSAxKSArIChpIC0gMSkgKiBhLm5dID0gdjsgfTtcblxuLyoqXG4gKiBHZXQgYSByb3cgZnJvbSBhIG1hdHJpeCBhcyBhbiBhcnJheVxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBtIFRoZSByb3cgb2Zmc2V0XG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBSb3cgbSBmcm9tIG1hdHJpeCBhXG4gKi9cbm1hdC5yb3cgPSAoYSwgbSkgPT4ge1xuICBjb25zdCBzID0gKG0gLSAxKSAqIGEubjtcbiAgcmV0dXJuIGEuZW50cmllcy5zbGljZShzLCBzICsgYS5uKTtcbn07XG5cbi8qKlxuICogR2V0IGEgY29sdW1uIGZyb20gYSBtYXRyaXggYXMgYW4gYXJyYXlcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgY29sdW1uIG9mZnNldFxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gQ29sdW1uIG4gZnJvbSBtYXRyaXggYVxuICovXG5tYXQuY29sID0gKGEsIG4pID0+IEFycmF5LnRpbWVzKGkgPT4gbWF0LmdldChhLCAoaSArIDEpLCBuKSwgYS5tKTtcblxuLyoqXG4gKiBBZGQgbWF0cmljZXNcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge21hdH0gYiBNYXRyaXggYlxuICogQHJldHVybiB7bWF0fSBhICsgYlxuICovXG5tYXQuYWRkID0gKGEsIGIpID0+IGEubSA9PT0gYi5tICYmIGEubiA9PT0gYi5uICYmIG1hdC5tYXAoYSwgKHYsIGkpID0+IHYgKyBiLmVudHJpZXNbaV0pO1xuXG4vKipcbiAqIFN1YnRyYWN0IG1hdHJpY2VzXG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHttYXR9IGIgTWF0cml4IGJcbiAqIEByZXR1cm4ge21hdH0gYSAtIGJcbiAqL1xubWF0LnN1YiA9IChhLCBiKSA9PiBhLm0gPT09IGIubSAmJiBhLm4gPT09IGIubiAmJiBtYXQubWFwKGEsICh2LCBpKSA9PiB2IC0gYi5lbnRyaWVzW2ldKTtcblxuLyoqXG4gKiBNdWx0aXBseSBtYXRyaWNlc1xuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bWF0fSBiIE1hdHJpeCBiXG4gKiBAcmV0dXJuIHttYXR8Ym9vbGVhbn0gYWIgb3IgZmFsc2UgaWYgdGhlIG1hdHJpY2VzIGNhbm5vdCBiZSBtdWx0aXBsaWVkXG4gKi9cbm1hdC5tdWwgPSAoYSwgYikgPT4ge1xuICBpZiAoYS5uICE9PSBiLm0pIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGNvbnN0IHJlc3VsdCA9IG1hdChhLm0sIGIubik7XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IGEubTsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDE7IGogPD0gYi5uOyBqKyspIHtcbiAgICAgIG1hdC5zZXQocmVzdWx0LCBpLCBqLCBNYXRoLmRvdChtYXQucm93KGEsIGkpLCBtYXQuY29sKGIsIGopKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFNjYWxlIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHtudW1iZXJ9IGIgU2NhbGFyIGJcbiAqIEByZXR1cm4ge21hdH0gYSAqIGJcbiAqL1xubWF0LnNjYWxlID0gKGEsIGIpID0+IG1hdC5tYXAoYSwgdiA9PiB2ICogYik7XG5cbi8qKlxuICogVHJhbnNwb3NlIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBUaGUgbWF0cml4IHRvIHRyYW5zcG9zZVxuICogQHJldHVybiB7bWF0fSBBIHRyYW5zcG9zZWQgbWF0cml4XG4gKi9cbm1hdC50cmFucyA9IGEgPT4gbWF0KGEubiwgYS5tLCBBcnJheS50aW1lcyhpID0+IG1hdC5jb2woYSwgKGkgKyAxKSksIGEubikuZmxhdCgpKTtcblxuLyoqXG4gKiBHZXQgdGhlIG1pbm9yIG9mIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIHJvdyBvZmZzZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBqIFRoZSBjb2x1bW4gb2Zmc2V0XG4gKiBAcmV0dXJuIHttYXR8Ym9vbGVhbn0gVGhlIChpLCBqKSBtaW5vciBvZiBtYXRyaXggYSBvciBmYWxzZSBpZiB0aGUgbWF0cml4IGlzIG5vdCBzcXVhcmVcbiAqL1xubWF0Lm1pbm9yID0gKGEsIGksIGopID0+IHtcbiAgaWYgKGEubSAhPT0gYS5uKSB7IHJldHVybiBmYWxzZTsgfVxuICBjb25zdCBlbnRyaWVzID0gW107XG4gIGZvciAobGV0IGlpID0gMTsgaWkgPD0gYS5tOyBpaSsrKSB7XG4gICAgaWYgKGlpID09PSBpKSB7IGNvbnRpbnVlOyB9XG4gICAgZm9yIChsZXQgamogPSAxOyBqaiA8PSBhLm47IGpqKyspIHtcbiAgICAgIGlmIChqaiA9PT0gaikgeyBjb250aW51ZTsgfVxuICAgICAgZW50cmllcy5wdXNoKG1hdC5nZXQoYSwgaWksIGpqKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXQoYS5tIC0gMSwgYS5uIC0gMSwgZW50cmllcyk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcmV0dXJuIHtudW1iZXJ8Ym9vbGVhbn0gfGF8IG9yIGZhbHNlIGlmIHRoZSBtYXRyaXggaXMgbm90IHNxdWFyZVxuICovXG5tYXQuZGV0ID0gYSA9PiB7XG4gIGlmIChhLm0gIT09IGEubikgeyByZXR1cm4gZmFsc2U7IH1cbiAgaWYgKGEubSA9PT0gMSkge1xuICAgIHJldHVybiBhLmVudHJpZXNbMF07XG4gIH1cbiAgaWYgKGEubSA9PT0gMikge1xuICAgIHJldHVybiBhLmVudHJpZXNbMF0gKiBhLmVudHJpZXNbM10gLSBhLmVudHJpZXNbMV0gKiBhLmVudHJpZXNbMl07XG4gIH1cbiAgbGV0IHRvdGFsID0gMCwgc2lnbiA9IDE7XG4gIGZvciAobGV0IGogPSAxOyBqIDw9IGEubjsgaisrKSB7XG4gICAgdG90YWwgKz0gc2lnbiAqIGEuZW50cmllc1tqIC0gMV0gKiBtYXQuZGV0KG1hdC5taW5vcihhLCAxLCBqKSk7XG4gICAgc2lnbiAqPSAtMTtcbiAgfVxuICByZXR1cm4gdG90YWw7XG59O1xuXG4vKipcbiAqIE5vcm1hbGlzZSBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgVGhlIG1hdHJpeCB0byBub3JtYWxpc2VcbiAqIEByZXR1cm4ge21hdHxib29sZWFufSBeYSBvciBmYWxzZSBpZiB0aGUgbWF0cml4IGlzIG5vdCBzcXVhcmVcbiAqL1xubWF0Lm5vciA9IGEgPT4ge1xuICBpZiAoYS5tICE9PSBhLm4pIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGNvbnN0IGQgPSBtYXQuZGV0KGEpO1xuICByZXR1cm4gbWF0Lm1hcChhLCBpID0+IGkgKiBkKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBhZGp1Z2F0ZSBvZiBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgVGhlIG1hdHJpeCBmcm9tIHdoaWNoIHRvIGdldCB0aGUgYWRqdWdhdGVcbiAqIEByZXR1cm4ge21hdH0gVGhlIGFkanVnYXRlIG9mIGFcbiAqL1xubWF0LmFkaiA9IGEgPT4ge1xuICBjb25zdCBtaW5vcnMgPSBtYXQoYS5tLCBhLm4pO1xuICBmb3IgKGxldCBpID0gMTsgaSA8PSBhLm07IGkrKykge1xuICAgIGZvciAobGV0IGogPSAxOyBqIDw9IGEubjsgaisrKSB7XG4gICAgICBtYXQuc2V0KG1pbm9ycywgaSwgaiwgbWF0LmRldChtYXQubWlub3IoYSwgaSwgaikpKTtcbiAgICB9XG4gIH1cbiAgY29uc3QgY29mYWN0b3JzID0gbWF0Lm1hcChtaW5vcnMsICh2LCBpKSA9PiB2ICogKGkgJSAyID8gLTEgOiAxKSk7XG4gIHJldHVybiBtYXQudHJhbnMoY29mYWN0b3JzKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBpbnZlcnNlIG9mIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBUaGUgbWF0cml4IHRvIGludmVydFxuICogQHJldHVybiB7bWF0fGJvb2xlYW59IGFeLTEgb3IgZmFsc2UgaWYgdGhlIG1hdHJpeCBoYXMgbm8gaW52ZXJzZVxuICovXG5tYXQuaW52ID0gYSA9PiB7XG4gIGlmIChhLm0gIT09IGEubikgeyByZXR1cm4gZmFsc2U7IH1cbiAgY29uc3QgZCA9IG1hdC5kZXQoYSk7XG4gIGlmIChkID09PSAwKSB7IHJldHVybiBmYWxzZTsgfVxuICByZXR1cm4gbWF0LnNjYWxlKG1hdC5hZGooYSksIDEgLyBkKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIG1hdHJpY2VzIGFyZSBlcXVhbFxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bWF0fSBiIE1hdHJpeCBiXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1hdHJpY2VzIGEgYW5kIGIgYXJlIGlkZW50aWNhbCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbm1hdC5lcSA9IChhLCBiKSA9PiBhLm0gPT09IGIubSAmJiBhLm4gPT09IGIubiAmJiBtYXQuc3RyKGEpID09PSBtYXQuc3RyKGIpO1xuXG4vKipcbiAqIENvcHkgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIFRoZSBtYXRyaXggdG8gY29weVxuICogQHJldHVybiB7bWF0fSBBIGNvcHkgb2YgbWF0cml4IGFcbiAqL1xubWF0LmNweSA9IGEgPT4gbWF0KGEubSwgYS5uLCBbLi4uYS5lbnRyaWVzXSk7XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0byBjYWxsIG9uIGVhY2ggZW50cnkgb2YgYSBtYXRyaXhcbiAqIEBjYWxsYmFjayBtYXRyaXhNYXBDYWxsYmFja1xuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBlbnRyeSB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBlbnRyeSBpbmRleFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbnRyaWVzIFRoZSBhcnJheSBvZiBtYXRyaXggZW50cmllc1xuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWFwcGVkIGVudHJ5XG4gKi9cblxuLyoqXG4gKiBDYWxsIGEgZnVuY3Rpb24gb24gZWFjaCBlbnRyeSBvZiBhIG1hdHJpeCBhbmQgYnVpbGQgYSBuZXcgbWF0cml4IGZyb20gdGhlIHJlc3VsdHNcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge21hdHJpeE1hcENhbGxiYWNrfSBmIFRoZSBmdW5jdGlvbiB0byBjYWxsIG9uIGVhY2ggZW50cnkgb2YgdGhlIG1hdHJpeFxuICogQHJldHVybiB7bWF0fSBNYXRyaXggYSBtYXBwZWQgdGhyb3VnaCBmXG4gKi9cbm1hdC5tYXAgPSAoYSwgZikgPT4gbWF0KGEubSwgYS5uLCBhLmVudHJpZXMubWFwKGYpKTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgbWF0cml4IGludG8gYSBzdHJpbmdcbiAqIEBwYXJhbSB7bWF0fSBhIFRoZSBtYXRyaXggdG8gY29udmVydFxuICogQHBhcmFtIHtzdHJpbmd9IFttcz0nLCAnXSBUaGUgc2VwYXJhdG9yIHN0cmluZyBmb3IgY29sdW1uc1xuICogQHBhcmFtIHtzdHJpbmd9IFtucz0nXFxuJ10gVGhlIHNlcGFyYXRvciBzdHJpbmcgZm9yIHJvd3NcbiAqIEByZXR1cm4ge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeFxuICovXG5tYXQuc3RyID0gKGEsIG1zID0gJywgJywgbnMgPSAnXFxuJykgPT4gYS5lbnRyaWVzLmNodW5rKGEubikubWFwKHIgPT4gci5qb2luKG1zKSkuam9pbihucyk7XG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHsgdmVjLCBtYXQgfTtcbn1cbiIsImltcG9ydCB7IHZlYyB9IGZyb20gXCJAYmFzZW1lbnR1bml2ZXJzZS9jb21tb25qc1wiO1xuaW1wb3J0ICogYXMgY29uZmlnIGZyb20gJy4vY29uZmlnLmpzb24nO1xuXG50eXBlIERlYnVnT3B0aW9ucyA9IHtcbiAgbWFyZ2luOiBudW1iZXIsXG4gIHBhZGRpbmc6IG51bWJlcixcbiAgZm9udDogc3RyaW5nLFxuICBsaW5lSGVpZ2h0OiBudW1iZXIsXG4gIGZvcmVncm91bmRDb2xvdXI6IENvbG91cixcbiAgYmFja2dyb3VuZENvbG91cjogQ29sb3VyLFxuICBkZWZhdWx0VmFsdWU6IERlYnVnVmFsdWUsXG4gIGRlZmF1bHRNYXJrZXI6IERlYnVnTWFya2VyXG59O1xuXG50eXBlIERlYnVnVmFsdWUgPSB7XG4gIGxhYmVsPzogc3RyaW5nLFxuICB2YWx1ZT86IG51bWJlciB8IHN0cmluZyxcbiAgYWxpZ246ICdsZWZ0JyB8ICdyaWdodCcsXG4gIHNob3dMYWJlbDogYm9vbGVhbixcbiAgcGFkZGluZz86IG51bWJlcixcbiAgZm9udD86IHN0cmluZyxcbiAgZm9yZWdyb3VuZENvbG91cj86IENvbG91cixcbiAgYmFja2dyb3VuZENvbG91cj86IENvbG91clxufTtcblxudHlwZSBEZWJ1Z01hcmtlciA9IHtcbiAgbGFiZWw/OiBzdHJpbmcsXG4gIHZhbHVlPzogbnVtYmVyIHwgc3RyaW5nLFxuICBwb3NpdGlvbj86IHZlYyxcbiAgc2hvd0xhYmVsOiBib29sZWFuLFxuICBzaG93VmFsdWU6IGJvb2xlYW4sXG4gIHNob3dNYXJrZXI6IGJvb2xlYW4sXG4gIG1hcmtlclNpemU6IG51bWJlcixcbiAgbWFya2VyU3R5bGU6ICd4JyB8ICcrJyB8ICcuJyxcbiAgbWFya2VyQ29sb3VyOiBDb2xvdXIsXG4gIHNwYWNlOiAnd29ybGQnIHwgJ3NjcmVlbicsXG4gIHBhZGRpbmc/OiBudW1iZXIsXG4gIGZvbnQ/OiBzdHJpbmcsXG4gIGxhYmVsT2Zmc2V0OiB2ZWMsXG4gIGZvcmVncm91bmRDb2xvdXI/OiBDb2xvdXIsXG4gIGJhY2tncm91bmRDb2xvdXI/OiBDb2xvdXJcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlYnVnIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IERlYnVnO1xuICBwcml2YXRlIHZhbHVlczogTWFwPHN0cmluZywgRGVidWdWYWx1ZT47XG4gIHByaXZhdGUgbWFya2VyczogTWFwPHN0cmluZywgRGVidWdNYXJrZXI+O1xuICBwcml2YXRlIG9wdGlvbnM6IERlYnVnT3B0aW9uc1xuICBwcml2YXRlIHJlYWRvbmx5IGRlZmF1bHRPcHRpb25zOiBEZWJ1Z09wdGlvbnMgPSB7XG4gICAgbWFyZ2luOiAxMCxcbiAgICBwYWRkaW5nOiA0LFxuICAgIGZvbnQ6ICcxMHB0IEx1Y2lkYSBDb25zb2xlLCBtb25vc3BhY2UnLFxuICAgIGxpbmVIZWlnaHQ6IDEyLFxuICAgIGZvcmVncm91bmRDb2xvdXI6ICcjZmZmJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3VyOiAnIzMzMzgnLFxuICAgIGRlZmF1bHRWYWx1ZToge1xuICAgICAgYWxpZ246ICdsZWZ0JyxcbiAgICAgIHNob3dMYWJlbDogdHJ1ZVxuICAgIH0sXG4gICAgZGVmYXVsdE1hcmtlcjoge1xuICAgICAgc2hvd0xhYmVsOiB0cnVlLFxuICAgICAgc2hvd1ZhbHVlOiB0cnVlLFxuICAgICAgc2hvd01hcmtlcjogdHJ1ZSxcbiAgICAgIG1hcmtlclNpemU6IDYsXG4gICAgICBtYXJrZXJTdHlsZTogJ3gnLFxuICAgICAgbWFya2VyQ29sb3VyOiAnI2NjYycsXG4gICAgICBzcGFjZTogJ3dvcmxkJyxcbiAgICAgIGxhYmVsT2Zmc2V0OiB2ZWMoMTApXG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3Iob3B0aW9uczogUGFydGlhbDxEZWJ1Z09wdGlvbnM+ID0ge30pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICB0aGlzLnZhbHVlcyA9IG5ldyBNYXA8c3RyaW5nLCBEZWJ1Z1ZhbHVlPigpO1xuICAgIHRoaXMubWFya2VycyA9IG5ldyBNYXA8c3RyaW5nLCBEZWJ1Z01hcmtlcj4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXNlIHRoZSBkZWJ1ZyBpbnN0YW5jZVxuICAgKiBAcGFyYW0gb3B0aW9ucyBSZW5kZXJpbmcgb3B0aW9uc1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBpbml0aWFsaXNlKG9wdGlvbnM6IFBhcnRpYWw8RGVidWdPcHRpb25zPiA9IHt9KTogdm9pZCB7XG4gICAgRGVidWcuaW5zdGFuY2UgPSBuZXcgRGVidWcob3B0aW9ucyk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBEZWJ1ZyB7XG4gICAgaWYgKERlYnVnLmluc3RhbmNlID09IG51bGwpIHtcbiAgICAgIERlYnVnLmluaXRpYWxpc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIERlYnVnLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgYSBkZWJ1ZyB2YWx1ZVxuICAgKiBAcGFyYW0gbGFiZWwgVGhlIGxhYmVsIGZvciB0aGlzIHZhbHVlXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgY3VycmVudCB2YWx1ZVxuICAgKiBAcGFyYW0gb3B0aW9ucyBSZW5kZXJpbmcgb3B0aW9uc1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyB2YWx1ZShsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyLCBvcHRpb25zOiBQYXJ0aWFsPERlYnVnVmFsdWU+ID0ge30pOiB2b2lkIHtcbiAgICBjb25zdCBkZWJ1ZyA9IERlYnVnLmdldEluc3RhbmNlKCk7XG4gICAgZGVidWcudmFsdWVzLnNldChsYWJlbCwgT2JqZWN0LmFzc2lnbihcbiAgICAgIHsgbGFiZWwsIHZhbHVlIH0sXG4gICAgICBkZWJ1Zy5kZWZhdWx0T3B0aW9ucy5kZWZhdWx0VmFsdWUsXG4gICAgICBvcHRpb25zXG4gICAgKSk7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBhIG1hcmtlciBpbiB3b3JsZCBvciBzY3JlZW4gc3BhY2VcbiAgICogQHBhcmFtIGxhYmVsIFRoZSBsYWJlbCBmb3IgdGhpcyBtYXJrZXJcbiAgICogQHBhcmFtIHZhbHVlIFRoZSBjdXJyZW50IHZhbHVlXG4gICAqIEBwYXJhbSBwb3NpdGlvbiBUaGUgcG9zaXRpb24gb2YgdGhpcyBtYXJrZXJcbiAgICogQHBhcmFtIG9wdGlvbnMgUmVuZGVyaW5nIG9wdGlvbnNcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgbWFya2VyKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfCBudW1iZXIsIHBvc2l0aW9uOiB2ZWMsIG9wdGlvbnM6IFBhcnRpYWw8RGVidWdNYXJrZXI+ID0ge30pOiB2b2lkIHtcbiAgICBjb25zdCBkZWJ1ZyA9IERlYnVnLmdldEluc3RhbmNlKCk7XG4gICAgZGVidWcubWFya2Vycy5zZXQobGFiZWwsIE9iamVjdC5hc3NpZ24oXG4gICAgICB7IGxhYmVsLCB2YWx1ZSwgcG9zaXRpb24gfSxcbiAgICAgIGRlYnVnLmRlZmF1bHRPcHRpb25zLmRlZmF1bHRNYXJrZXIsXG4gICAgICBvcHRpb25zXG4gICAgKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIGRlYnVnIHZhbHVlcyBhbmQgbWFya2VycyBvbnRvIHRoZSBjb250ZXh0XG4gICAqIEBwYXJhbSBjb250ZXh0IFRoZSByZW5kZXJpbmcgY29udGV4dFxuICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSBzY3JlZW5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBkZWJ1ZyA9IERlYnVnLmdldEluc3RhbmNlKCk7XG4gICAgY29udGV4dC5zYXZlKCk7XG5cbiAgICAvLyBEcmF3IHdvcmxkLXNwYWNlIG1hcmtlcnNcbiAgICBkZWJ1Zy5tYXJrZXJzLmZvckVhY2gobWFya2VyID0+IHtcbiAgICAgIGlmIChtYXJrZXIuc3BhY2UgPT09ICd3b3JsZCcpIHtcbiAgICAgICAgZGVidWcuZHJhd01hcmtlcihjb250ZXh0LCBtYXJrZXIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRHJhdyB2YWx1ZXMgYW5kIHNjcmVlbi1zcGFjZSBtYXJrZXJzXG4gICAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgbGV0IHBvc2l0aW9uOiB2ZWM7XG4gICAgbGV0IGxlZnRZID0gZGVidWcub3B0aW9ucy5tYXJnaW47XG4gICAgbGV0IHJpZ2h0WSA9IGRlYnVnLm9wdGlvbnMubWFyZ2luO1xuICAgIGNvbnN0IGxpbmVIZWlnaHQgPSAoZGVidWcub3B0aW9ucy5saW5lSGVpZ2h0ICsgZGVidWcub3B0aW9ucy5wYWRkaW5nICogMik7XG4gICAgZGVidWcudmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgc3dpdGNoICh2YWx1ZS5hbGlnbikge1xuICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICBwb3NpdGlvbiA9IHZlYyhkZWJ1Zy5vcHRpb25zLm1hcmdpbiwgbGVmdFkpO1xuICAgICAgICAgIGxlZnRZICs9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICBwb3NpdGlvbiA9IHZlYyh3aWR0aCAtIGRlYnVnLm9wdGlvbnMubWFyZ2luLCByaWdodFkpO1xuICAgICAgICAgIHJpZ2h0WSArPSBsaW5lSGVpZ2h0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVidWcuZHJhd0xhYmVsKFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICAodmFsdWUuc2hvd0xhYmVsID8gYCR7dmFsdWUubGFiZWx9OiBgIDogJycpICsgYCR7dmFsdWUudmFsdWV9YCxcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIHZhbHVlLmFsaWduLFxuICAgICAgICB2YWx1ZS5wYWRkaW5nID8/IGRlYnVnLm9wdGlvbnMucGFkZGluZyxcbiAgICAgICAgdmFsdWUuZm9udCA/PyBkZWJ1Zy5vcHRpb25zLmZvbnQsXG4gICAgICAgIHZhbHVlLmZvcmVncm91bmRDb2xvdXIgPz8gZGVidWcub3B0aW9ucy5mb3JlZ3JvdW5kQ29sb3VyLFxuICAgICAgICB2YWx1ZS5iYWNrZ3JvdW5kQ29sb3VyID8/IGRlYnVnLm9wdGlvbnMuYmFja2dyb3VuZENvbG91clxuICAgICAgKTtcbiAgICB9KTtcbiAgICBkZWJ1Zy5tYXJrZXJzLmZvckVhY2gobWFya2VyID0+IHtcbiAgICAgIGlmIChtYXJrZXIuc3BhY2UgPT09ICdzY3JlZW4nKSB7XG4gICAgICAgIGRlYnVnLmRyYXdNYXJrZXIoY29udGV4dCwgbWFya2VyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENsZWFyIHZhbHVlcyBhbmQgbWFya2VycyByZWFkeSBmb3IgbmV4dCBmcmFtZVxuICAgIGRlYnVnLnZhbHVlcy5jbGVhcigpO1xuICAgIGRlYnVnLm1hcmtlcnMuY2xlYXIoKTtcbiAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhd01hcmtlcihjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIG1hcmtlcjogRGVidWdNYXJrZXIpOiB2b2lkIHtcbiAgICBjb250ZXh0LnNhdmUoKTtcbiAgICBpZiAobWFya2VyLnNwYWNlID09PSAnd29ybGQnKSB7XG4gICAgICBjb250ZXh0LnNjYWxlKDEgLyBjb25maWcuc2NhbGVGYWN0b3IsIDEgLyBjb25maWcuc2NhbGVGYWN0b3IpO1xuICAgIH1cbiAgICBjb25zdCBwb3NpdGlvbiA9IHZlYy5tdWwobWFya2VyLnBvc2l0aW9uID8/IHZlYygpLCBjb25maWcuc2NhbGVGYWN0b3IpO1xuICAgIGlmIChtYXJrZXIuc2hvd0xhYmVsIHx8IG1hcmtlci5zaG93VmFsdWUpIHtcbiAgICAgIHRoaXMuZHJhd0xhYmVsKFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICAobWFya2VyLnNob3dMYWJlbCA/IGAke21hcmtlci5sYWJlbH06IGAgOiAnJykgKyAobWFya2VyLnNob3dWYWx1ZSA/IGAke21hcmtlci52YWx1ZX1gIDogJycpLFxuICAgICAgICB2ZWMuYWRkKHBvc2l0aW9uID8/IHZlYygpLCBtYXJrZXIubGFiZWxPZmZzZXQpLFxuICAgICAgICAnbGVmdCcsXG4gICAgICAgIG1hcmtlci5wYWRkaW5nID8/IHRoaXMub3B0aW9ucy5wYWRkaW5nLFxuICAgICAgICBtYXJrZXIuZm9udCA/PyB0aGlzLm9wdGlvbnMuZm9udCxcbiAgICAgICAgbWFya2VyLmZvcmVncm91bmRDb2xvdXIgPz8gdGhpcy5vcHRpb25zLmZvcmVncm91bmRDb2xvdXIsXG4gICAgICAgIG1hcmtlci5iYWNrZ3JvdW5kQ29sb3VyID8/IHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3VyXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAobWFya2VyLnNob3dNYXJrZXIpIHtcbiAgICAgIGNvbnRleHQubGluZVdpZHRoID0gMjtcbiAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb250ZXh0LmZpbGxTdHlsZSA9IG1hcmtlci5tYXJrZXJDb2xvdXIgYXMgc3RyaW5nO1xuICAgICAgc3dpdGNoIChtYXJrZXIubWFya2VyU3R5bGUpIHtcbiAgICAgICAgY2FzZSAneCc6XG4gICAgICAgICAgdGhpcy5kcmF3Q3Jvc3MoY29udGV4dCwgcG9zaXRpb24sIG1hcmtlci5tYXJrZXJTaXplKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnKyc6XG4gICAgICAgICAgdGhpcy5kcmF3UGx1cyhjb250ZXh0LCBwb3NpdGlvbiwgbWFya2VyLm1hcmtlclNpemUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcuJzpcbiAgICAgICAgICB0aGlzLmRyYXdEb3QoY29udGV4dCwgcG9zaXRpb24sIG1hcmtlci5tYXJrZXJTaXplKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG4gIH1cblxuICBwcml2YXRlIGRyYXdMYWJlbChcbiAgICBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgdGV4dDogc3RyaW5nLFxuICAgIHBvc2l0aW9uOiB2ZWMsXG4gICAgYWxpZ246ICdsZWZ0JyB8ICdyaWdodCcsXG4gICAgcGFkZGluZzogbnVtYmVyLFxuICAgIGZvbnQ6IHN0cmluZyxcbiAgICBmb3JlZ3JvdW5kQ29sb3VyOiBDb2xvdXIsXG4gICAgYmFja2dyb3VuZENvbG91cjogQ29sb3VyXG4gICk6IHZvaWQge1xuICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgIGNvbnRleHQuZm9udCA9IGZvbnQ7XG4gICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSAndG9wJztcbiAgICBjb25zdCBiYWNrZ3JvdW5kU2l6ZSA9IHtcbiAgICAgIHdpZHRoOiBjb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoICsgcGFkZGluZyAqIDIsXG4gICAgICBoZWlnaHQ6IHRoaXMub3B0aW9ucy5saW5lSGVpZ2h0ICsgcGFkZGluZyAqIDJcbiAgICB9O1xuICAgIGNvbnN0IHggPSBhbGlnbiA9PT0gJ3JpZ2h0JyA/IChwb3NpdGlvbi54IC0gYmFja2dyb3VuZFNpemUud2lkdGgpIDogcG9zaXRpb24ueDtcblxuICAgIC8vIERyYXcgYmFja2dyb3VuZFxuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG91ciBhcyBzdHJpbmc7XG4gICAgY29udGV4dC5maWxsUmVjdChcbiAgICAgIHggLSBwYWRkaW5nLFxuICAgICAgcG9zaXRpb24ueSAtIHBhZGRpbmcsXG4gICAgICBiYWNrZ3JvdW5kU2l6ZS53aWR0aCxcbiAgICAgIGJhY2tncm91bmRTaXplLmhlaWdodFxuICAgICk7XG5cbiAgICAvLyBEcmF3IHRleHRcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZvcmVncm91bmRDb2xvdXIgYXMgc3RyaW5nO1xuICAgIGNvbnRleHQuZmlsbFRleHQodGV4dCwgeCwgcG9zaXRpb24ueSk7XG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG4gIH1cblxuICBwcml2YXRlIGRyYXdDcm9zcyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHBvc2l0aW9uOiB2ZWMsIHNpemU6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29uc3QgaGFsZlNpemUgPSBzaXplIC8gMjtcbiAgICBjb250ZXh0Lm1vdmVUbyhwb3NpdGlvbi54IC0gaGFsZlNpemUsIHBvc2l0aW9uLnkgLSBoYWxmU2l6ZSk7XG4gICAgY29udGV4dC5saW5lVG8ocG9zaXRpb24ueCArIGhhbGZTaXplLCBwb3NpdGlvbi55ICsgaGFsZlNpemUpO1xuICAgIGNvbnRleHQubW92ZVRvKHBvc2l0aW9uLnggLSBoYWxmU2l6ZSwgcG9zaXRpb24ueSArIGhhbGZTaXplKTtcbiAgICBjb250ZXh0LmxpbmVUbyhwb3NpdGlvbi54ICsgaGFsZlNpemUsIHBvc2l0aW9uLnkgLSBoYWxmU2l6ZSk7XG4gICAgY29udGV4dC5zdHJva2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhd1BsdXMoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBwb3NpdGlvbjogdmVjLCBzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIGNvbnN0IGhhbGZTaXplID0gc2l6ZSAvIDI7XG4gICAgY29udGV4dC5tb3ZlVG8ocG9zaXRpb24ueCwgcG9zaXRpb24ueSAtIGhhbGZTaXplKTtcbiAgICBjb250ZXh0LmxpbmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55ICsgaGFsZlNpemUpO1xuICAgIGNvbnRleHQubW92ZVRvKHBvc2l0aW9uLnggLSBoYWxmU2l6ZSwgcG9zaXRpb24ueSk7XG4gICAgY29udGV4dC5saW5lVG8ocG9zaXRpb24ueCArIGhhbGZTaXplLCBwb3NpdGlvbi55KTtcbiAgICBjb250ZXh0LnN0cm9rZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBkcmF3RG90KGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgcG9zaXRpb246IHZlYywgc2l6ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICBjb250ZXh0LmFyYyhwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBzaXplIC8gMiwgMCwgTWF0aC5QSSAqIDIpO1xuICAgIGNvbnRleHQuZmlsbCgpO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBjb25maWcgZnJvbSAnLi9jb25maWcuanNvbic7XG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IERlYnVnIGZyb20gJy4vRGVidWcnO1xuaW1wb3J0IFN0YXRlTWFuYWdlciBmcm9tICcuL1N0YXRlTWFuYWdlcic7XG5pbXBvcnQgeyB2ZWMgfSBmcm9tICdAYmFzZW1lbnR1bml2ZXJzZS9jb21tb25qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xuICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIHByaXZhdGUgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICBwcml2YXRlIGxhc3RGcmFtZVRpbWU6IG51bWJlcjtcbiAgcHJpdmF0ZSBsYXN0RnJhbWVDb3VudFRpbWU6IG51bWJlcjtcbiAgcHJpdmF0ZSBmcmFtZVJhdGU6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgZnJhbWVDb3VudDogbnVtYmVyID0gMDtcblxuICAvLyBURVNUXG4gIHByaXZhdGUgdGVzdEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xuICBwcml2YXRlIHRlc3RPZmZzZXQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgdGVzdFRpbWU6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHN0YXRlTWFuYWdlcjogU3RhdGVNYW5hZ2VyO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsKSB7XG4gICAgaWYgKGNvbnRhaW5lciA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIHZhbGlkIGNvbnRhaW5lciBlbGVtZW50IG11c3QgYmUgc3BlY2lmaWVkLicpO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2NhbnZhcycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ29udGFpbmVyIGVsZW1lbnQgbXVzdCBiZSBhIGNhbnZhcy4nKTtcbiAgICB9XG4gICAgdGhpcy5jYW52YXMgPSBjb250YWluZXIgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5cbiAgICAvLyBHZXQgYSAyZCBjb250ZXh0XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgaWYgKGNvbnRleHQgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGdldCBhIDJkIGNvbnRleHQuXCIpO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSByZXNpemVcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemUuYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIHRoaXMucmVzaXplKCk7XG5cbiAgICAvLyBJbml0aWFsaXNlIHN1YnN5c3RlbXMuLi5cbiAgICBEZWJ1Zy5pbml0aWFsaXNlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlc2l6ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAgIC8vIERpc2FibGUgaW1hZ2Ugc21vb3RoaW5nIGZvciBwaXhlbGF0ZWQgZ3JhcGhpY3NcbiAgICB0aGlzLmNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgaW5pdGlhbGlzZSgpOiB2b2lkIHtcblxuICAgIC8vIExvYWQgY29udGVudCBhc3NldHMgYW5kIHB1c2ggbG9hZGluZyBzdGF0ZVxuXG4gICAgLy8gVEVTVFxuICAgIHRoaXMudGVzdEltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgdGhpcy50ZXN0SW1hZ2Uuc3JjID0gJy4uL2ltYWdlcy9lcnJvci5wbmcnO1xuXG4gICAgLy8gU3RhcnQgdGhlIGdhbWUgbG9vcFxuICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IHRoaXMubGFzdEZyYW1lQ291bnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgdGhpcy5sb29wKCk7XG4gIH1cblxuICBwcml2YXRlIGxvb3AoKTogdm9pZCB7XG4gICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgZWxhcHNlZFRpbWUgPSBNYXRoLm1pbihub3cgLSB0aGlzLmxhc3RGcmFtZVRpbWUsIGNvbnN0YW50cy5GUFNfTUlOKTtcblxuICAgIC8vIENhbGN1bGF0ZSBmcmFtZXJhdGVcbiAgICBpZiAobm93IC0gdGhpcy5sYXN0RnJhbWVDb3VudFRpbWUgPj0gMTAwMCkge1xuICAgICAgdGhpcy5sYXN0RnJhbWVDb3VudFRpbWUgPSBub3c7XG4gICAgICB0aGlzLmZyYW1lUmF0ZSA9IHRoaXMuZnJhbWVDb3VudDtcbiAgICAgIHRoaXMuZnJhbWVDb3VudCA9IDA7XG4gICAgfVxuICAgIHRoaXMuZnJhbWVDb3VudCsrO1xuICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IG5vdztcbiAgICBpZiAoY29uZmlnLnNob3dGUFMpIHtcbiAgICAgIERlYnVnLnZhbHVlKCdGUFMnLCB0aGlzLmZyYW1lUmF0ZSk7XG4gICAgfVxuXG4gICAgLy8gRG8gZ2FtZSBsb29wXG4gICAgdGhpcy51cGRhdGUoZWxhcHNlZFRpbWUpO1xuICAgIHRoaXMuZHJhdygpO1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5sb29wLmJpbmQodGhpcykpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFRFU1RcbiAgICB0aGlzLnRlc3RUaW1lICs9IGR0O1xuICAgIHRoaXMudGVzdE9mZnNldCA9IE1hdGguc2luKHRoaXMudGVzdFRpbWUgLyAxMCkgKiAxMDA7XG4gICAgRGVidWcubWFya2VyKCd3b3JsZCcsIHRoaXMudGVzdFRpbWUsIHZlYygzMCwgMzApKTtcbiAgICBEZWJ1Zy5tYXJrZXIoJ3NjcmVlbicsICdoZWxsbyEnLCB2ZWMoMTAwLCAxMDApLCB7XG4gICAgICBzaG93TGFiZWw6IGZhbHNlLFxuICAgICAgc3BhY2U6ICdzY3JlZW4nLFxuICAgICAgbWFya2VyU3R5bGU6ICcrJ1xuICAgIH0pO1xuICAgIERlYnVnLm1hcmtlcignc2NyZWVuMicsICdoZWxsbzIhJywgdmVjKDEwMCwgMTMwKSwge1xuICAgICAgc3BhY2U6ICdzY3JlZW4nLFxuICAgICAgbWFya2VyU3R5bGU6ICcuJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBkcmF3KCk6IHZvaWQge1xuICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG5cbiAgICAvLyBURVNUXG4gICAgdGhpcy5jb250ZXh0LnNldFRyYW5zZm9ybShjb25maWcuc2NhbGVGYWN0b3IsIDAsIDAsIGNvbmZpZy5zY2FsZUZhY3RvciwgMTAwICsgdGhpcy50ZXN0T2Zmc2V0LCAxMDApO1xuICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy50ZXN0SW1hZ2UsIDAsIDApO1xuXG4gICAgRGVidWcuZHJhdyh0aGlzLmNvbnRleHQsIHRoaXMuY2FudmFzLndpZHRoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IEZQU19NSU4gPSAxIC8gMzA7XG4iLCJpbXBvcnQgR2FtZSBmcm9tICcuL0dhbWUnO1xuXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICBjb25zdCBnYW1lID0gbmV3IEdhbWUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWUnKSk7XG4gIGdhbWUuaW5pdGlhbGlzZSgpO1xufTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbl9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbi8vIFRoaXMgZW50cnkgbW9kdWxlIHVzZWQgJ2V4cG9ydHMnIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbiJdLCJzb3VyY2VSb290IjoiIn0=