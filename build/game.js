(()=>{var t={44:t=>{Math.floatEquals=(t,e,a=Number.EPSILON)=>Math.abs(t-e)<a,Math.clamp=(t,e=0,a=1)=>t<e?e:t>a?a:t,Math.frac=t=>t>=0?t-Math.floor(t):t-Math.ceil(t),Math.lerp=(t,e,a)=>t+(e-t)*a,Math.unlerp=(t,e,a)=>(a-t)/(e-t),Math.blerp=(t,e,a,r,s,n)=>Math.lerp(Math.lerp(t,e,s),Math.lerp(a,r,s),n),Math.remap=(t,e,a,r,s)=>r+(t-e)*(s-r)/(a-e),Math.smoothstep=(t,e,a)=>Math.lerp(t,e,3*Math.pow(a,2)-2*Math.pow(a,3)),Math.radians=t=>Math.PI/180*t,Math.degrees=t=>180/Math.PI*t,Math.randomBetween=(t,e)=>Math.random()*(e-t)+t,Math.randomIntBetween=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,Math.cltRandom=(t=.5,e=.5,a=2)=>{let r=0;for(let t=a;t--;)r+=Math.random();return t+(r-a/2)/(a/2)*e},Math.cltRandomInt=(t,e)=>Math.floor(t+Math.cltRandom(.5,.5,2)*(e+1-t)),Math.weightedRandom=t=>{let e=t.reduce(((t,e)=>t+e),0),a=0;const r=Math.random()*e;for(;e>r;)e-=t[a++];return a-1},Math.lerpArray=(t,e,a=Math.lerp)=>{const r=e*(t.length-1),s=Math.clamp(Math.trunc(r),0,t.length-1);return a(t[s]||0,t[s+1]||0,Math.frac(r))},Math.dot=(t,e)=>t.reduce(((t,a,r)=>t+a*e[r]),0),Array.times=(t,e)=>Array(e).fill(0).map(((e,a)=>t(a))),Array.range=t=>Array.times((t=>t),t),Object.defineProperty(Array.prototype,"at",{value:function(t){const e=this.length;return this[t<0?e-Math.abs(t+1)%e-1:t%e]}}),Object.defineProperty(Array.prototype,"chunk",{value:function(t){return Array.times((e=>this.slice(e*t,e*t+t)),Math.ceil(this.length/t))}}),Object.defineProperty(Array.prototype,"shuffle",{value:function(){return this.map((t=>[Math.random(),t])).sort(((t,e)=>t[0]-e[0])).map((t=>t[1]))}});const e=(t,e)=>t||e?"object"==typeof t?{x:t.x||0,y:t.y||0}:null==e?{x:t,y:t}:{x:t,y:e}:{x:0,y:0};e.components=t=>[t.x,t.y],e.ux=()=>e(1,0),e.uy=()=>e(0,1),e.add=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),e.mul=(t,e)=>({x:t.x*e,y:t.y*e}),e.sub=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),e.len=t=>Math.sqrt(t.x*t.x+t.y*t.y),e.manhattan=t=>Math.abs(t.x)+Math.abs(t.y),e.nor=t=>{let a=e.len(t);return a?{x:t.x/a,y:t.y/a}:e()},e.dot=(t,e)=>t.x*e.x+t.y*e.y,e.rot=(t,e)=>{let a=Math.sin(e),r=Math.cos(e);return{x:r*t.x-a*t.y,y:a*t.x+r*t.y}},e.eq=(t,e)=>t.x===e.x&&t.y===e.y,e.rad=t=>Math.atan2(t.y,t.x),e.cpy=t=>e(t),e.map=(t,e)=>({x:e(t.x,"x"),y:e(t.y,"y")}),e.str=(t,e=", ")=>`${t.x}${e}${t.y}`;const a=(t=4,e=4,a=[])=>({m:t,n:e,entries:a.concat(Array(t*e).fill(0)).slice(0,t*e)});a.identity=t=>a(t,t,Array(t*t).fill(0).map(((e,a)=>+(Math.floor(a/t)===a%t)))),a.get=(t,e,a)=>t.entries[a-1+(e-1)*t.n],a.set=(t,e,a,r)=>{t.entries[a-1+(e-1)*t.n]=r},a.row=(t,e)=>{const a=(e-1)*t.n;return t.entries.slice(a,a+t.n)},a.col=(t,e)=>Array.times((r=>a.get(t,r+1,e)),t.m),a.add=(t,e)=>t.m===e.m&&t.n===e.n&&a.map(t,((t,a)=>t+e.entries[a])),a.sub=(t,e)=>t.m===e.m&&t.n===e.n&&a.map(t,((t,a)=>t-e.entries[a])),a.mul=(t,e)=>{if(t.n!==e.m)return!1;const r=a(t.m,e.n);for(let s=1;s<=t.m;s++)for(let n=1;n<=e.n;n++)a.set(r,s,n,Math.dot(a.row(t,s),a.col(e,n)));return r},a.scale=(t,e)=>a.map(t,(t=>t*e)),a.trans=t=>a(t.n,t.m,Array.times((e=>a.col(t,e+1)),t.n).flat()),a.minor=(t,e,r)=>{if(t.m!==t.n)return!1;const s=[];for(let n=1;n<=t.m;n++)if(n!==e)for(let e=1;e<=t.n;e++)e!==r&&s.push(a.get(t,n,e));return a(t.m-1,t.n-1,s)},a.det=t=>{if(t.m!==t.n)return!1;if(1===t.m)return t.entries[0];if(2===t.m)return t.entries[0]*t.entries[3]-t.entries[1]*t.entries[2];let e=0,r=1;for(let s=1;s<=t.n;s++)e+=r*t.entries[s-1]*a.det(a.minor(t,1,s)),r*=-1;return e},a.nor=t=>{if(t.m!==t.n)return!1;const e=a.det(t);return a.map(t,(t=>t*e))},a.adj=t=>{const e=a(t.m,t.n);for(let r=1;r<=t.m;r++)for(let s=1;s<=t.n;s++)a.set(e,r,s,a.det(a.minor(t,r,s)));const r=a.map(e,((t,e)=>t*(e%2?-1:1)));return a.trans(r)},a.inv=t=>{if(t.m!==t.n)return!1;const e=a.det(t);return 0!==e&&a.scale(a.adj(t),1/e)},a.eq=(t,e)=>t.m===e.m&&t.n===e.n&&a.str(t)===a.str(e),a.cpy=t=>a(t.m,t.n,[...t.entries]),a.map=(t,e)=>a(t.m,t.n,t.entries.map(e)),a.str=(t,e=", ",a="\n")=>t.entries.chunk(t.n).map((t=>t.join(e))).join(a),t.exports={vec:e,mat:a}},76:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=a(44),s=a(269);class n{constructor(t={}){this.defaultOptions={margin:10,padding:4,font:"10pt Lucida Console, monospace",lineHeight:12,foregroundColour:"#fff",backgroundColour:"#3338",defaultValue:{align:"left",showLabel:!0},defaultMarker:{showLabel:!0,showValue:!0,showMarker:!0,markerSize:6,markerStyle:"x",markerColour:"#ccc",space:"world",labelOffset:r.vec(10)}},this.options=Object.assign({},this.defaultOptions,t),this.values=new Map,this.markers=new Map}static initialise(t={}){n.instance=new n(t)}static getInstance(){return null==n.instance&&n.initialise(),n.instance}static value(t,e,a={}){const r=n.getInstance();r.values.set(t,Object.assign({label:t,value:e},r.defaultOptions.defaultValue,a))}static marker(t,e,a,r={}){const s=n.getInstance();s.markers.set(t,Object.assign({label:t,value:e,position:a},s.defaultOptions.defaultMarker,r))}static draw(t){const e=n.getInstance();let a;t.save(),t.scale(1/s.scaleFactor,1/s.scaleFactor),e.markers.forEach((a=>{"world"===a.space&&e.drawMarker(t,a)})),t.restore(),t.save(),t.setTransform(1,0,0,1,0,0);let i=e.options.margin,o=e.options.margin;const l=e.options.lineHeight+2*e.options.padding;e.values.forEach((s=>{var n,h,c,u;switch(s.align){case"left":a=r.vec(e.options.margin,i),i+=l;break;case"right":a=r.vec(t.canvas.clientWidth-e.options.margin,o),o+=l}e.drawLabel(t,(s.showLabel?s.label+": ":"")+s.value,a,s.align,null!==(n=s.padding)&&void 0!==n?n:e.options.padding,null!==(h=s.font)&&void 0!==h?h:e.options.font,null!==(c=s.foregroundColour)&&void 0!==c?c:e.options.foregroundColour,null!==(u=s.backgroundColour)&&void 0!==u?u:e.options.backgroundColour)})),e.markers.forEach((a=>{"screen"===a.space&&e.drawMarker(t,a)})),t.restore(),e.values.clear(),e.markers.clear()}drawMarker(t,e){var a,n,i,o,l;t.save();const h=r.vec.mul(null!==(a=e.position)&&void 0!==a?a:r.vec(),s.scaleFactor);if((e.showLabel||e.showValue)&&this.drawLabel(t,(e.showLabel?e.label+": ":"")+(e.showValue?""+e.value:""),r.vec.add(null!=h?h:r.vec(),e.labelOffset),"left",null!==(n=e.padding)&&void 0!==n?n:this.options.padding,null!==(i=e.font)&&void 0!==i?i:this.options.font,null!==(o=e.foregroundColour)&&void 0!==o?o:this.options.foregroundColour,null!==(l=e.backgroundColour)&&void 0!==l?l:this.options.backgroundColour),e.showMarker)switch(t.lineWidth=2,t.strokeStyle=t.fillStyle=e.markerColour,e.markerStyle){case"x":this.drawCross(t,h,e.markerSize);break;case"+":this.drawPlus(t,h,e.markerSize);break;case".":this.drawDot(t,h,e.markerSize)}t.restore()}drawLabel(t,e,a,r,s,n,i,o){t.save(),t.font=n,t.textBaseline="top";const l={width:t.measureText(e).width+2*s,height:this.options.lineHeight+2*s},h="right"===r?a.x-l.width:a.x;t.fillStyle=o,t.fillRect(h-s,a.y-s,l.width,l.height),t.fillStyle=i,t.fillText(e,h,a.y),t.restore()}drawCross(t,e,a){t.beginPath();const r=a/2;t.moveTo(e.x-r,e.y-r),t.lineTo(e.x+r,e.y+r),t.moveTo(e.x-r,e.y+r),t.lineTo(e.x+r,e.y-r),t.stroke()}drawPlus(t,e,a){t.beginPath();const r=a/2;t.moveTo(e.x,e.y-r),t.lineTo(e.x,e.y+r),t.moveTo(e.x-r,e.y),t.lineTo(e.x+r,e.y),t.stroke()}drawDot(t,e,a){t.beginPath(),t.arc(e.x,e.y,a/2,0,2*Math.PI),t.fill()}}e.default=n},221:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=a(269),s=a(601),n=a(76),i=a(318);e.default=class{constructor(t){if(this.frameRate=0,this.frameCount=0,null===t)throw new Error("A valid container element must be specified.");if("canvas"!==t.tagName.toLowerCase())throw new Error("Container element must be a canvas.");this.canvas=t;const e=this.canvas.getContext("2d");if(null===e)throw new Error("Couldn't get a 2d context.");this.context=e,window.addEventListener("resize",this.resize.bind(this),!1),this.resize(),n.default.initialise(),this.stateManager=new i.default}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.context.imageSmoothingEnabled=!1}initialise(){this.lastFrameTime=this.lastFrameCountTime=performance.now(),this.loop()}loop(){const t=performance.now(),e=Math.min(t-this.lastFrameTime,s.FPS_MIN);t-this.lastFrameCountTime>=1e3&&(this.lastFrameCountTime=t,this.frameRate=this.frameCount,this.frameCount=0),this.frameCount++,this.lastFrameTime=t,r.showFPS&&n.default.value("FPS",this.frameRate,{align:"right"}),this.update(e),this.draw(),window.requestAnimationFrame(this.loop.bind(this))}update(t){this.stateManager.update(t)}draw(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.setTransform(r.scaleFactor,0,0,r.scaleFactor,0,0),this.stateManager.draw(this.context),n.default.draw(this.context)}}},318:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=a(900);e.default=class{constructor(){this.states=[]}push(t){return this.states.push(t),t.stateManager=this,t.initialise(),t.transitionIn(),t}pop(){if(this.states.length>0){let t=this.states.length-1;for(;t>0&&this.states[t].transitionType===r.StateTransitionType.Out;)t--;if(t>=0){const e=this.states[t];return e.transitionOut(),e}}return null}clear(){this.states.forEach((t=>{t.transitionType!==r.StateTransitionType.Out&&t.transitionOut()}))}update(t){if(this.states.length>0){for(let e=this.states.length;e--;)if(this.states[e].transitionType!==r.StateTransitionType.Out){this.states[e].update(t);break}this.states.forEach((e=>{e.updateTransition(t)})),this.states=this.states.filter((t=>!t.disposed))}}draw(t){if(this.states.length>0){const e=[this.states[this.states.length-1]];let a=this.states.length-1;for(;a>0&&this.states[a].transparent;)e.push(this.states[--a]);for(let a=e.length;a--;)e[a].draw(t)}}}},601:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FPS_MIN=void 0,e.FPS_MIN=1/30},900:(t,e)=>{"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.StateTransitionType=void 0,(a=e.StateTransitionType||(e.StateTransitionType={}))[a.In=0]="In",a[a.Out=1]="Out",a[a.None=2]="None"},607:(t,e,a)=>{"use strict";const r=a(221);window.onload=()=>{new r.default(document.querySelector("#game")).initialise()}},269:t=>{"use strict";t.exports=JSON.parse('{"title":"RPG Game","scaleFactor":2,"showFPS":true}')}},e={};!function a(r){if(e[r])return e[r].exports;var s=e[r]={exports:{}};return t[r](s,s.exports,a),s.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ycGctZ2FtZS8uL25vZGVfbW9kdWxlcy9AYmFzZW1lbnR1bml2ZXJzZS9jb21tb25qcy9jb21tb24uanMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvRGVidWcudHMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvR2FtZS50cyIsIndlYnBhY2s6Ly9ycGctZ2FtZS8uL3NyYy9TdGF0ZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vcnBnLWdhbWUvLi9zcmMvY29uc3RhbnRzLnRzIiwid2VicGFjazovL3JwZy1nYW1lLy4vc3JjL2VudW1zLnRzIiwid2VicGFjazovL3JwZy1nYW1lLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3JwZy1nYW1lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3JwZy1nYW1lL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJNYXRoIiwiZmxvYXRFcXVhbHMiLCJhIiwiYiIsInAiLCJOdW1iZXIiLCJFUFNJTE9OIiwiYWJzIiwiY2xhbXAiLCJtaW4iLCJtYXgiLCJmcmFjIiwiZmxvb3IiLCJjZWlsIiwibGVycCIsImkiLCJ1bmxlcnAiLCJibGVycCIsImMwMCIsImMxMCIsImMwMSIsImMxMSIsIml4IiwiaXkiLCJyZW1hcCIsImExIiwiYTIiLCJiMSIsImIyIiwic21vb3Roc3RlcCIsInBvdyIsInJhZGlhbnMiLCJkZWdyZWVzIiwiUEkiLCJyYW5kb21CZXR3ZWVuIiwicmFuZG9tIiwicmFuZG9tSW50QmV0d2VlbiIsImNsdFJhbmRvbSIsIm11Iiwic2lnbWEiLCJzYW1wbGVzIiwidG90YWwiLCJjbHRSYW5kb21JbnQiLCJ3ZWlnaHRlZFJhbmRvbSIsInciLCJyZWR1Y2UiLCJuIiwiciIsImxlcnBBcnJheSIsImYiLCJzIiwibGVuZ3RoIiwidHJ1bmMiLCJkb3QiLCJ2IiwiQXJyYXkiLCJ0aW1lcyIsImZpbGwiLCJtYXAiLCJfIiwicmFuZ2UiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvdHlwZSIsInZhbHVlIiwibCIsInRoaXMiLCJzbGljZSIsInNvcnQiLCJ2ZWMiLCJ4IiwieSIsImNvbXBvbmVudHMiLCJ1eCIsInV5IiwiYWRkIiwibXVsIiwic3ViIiwibGVuIiwic3FydCIsIm1hbmhhdHRhbiIsIm5vciIsInJvdCIsInNpbiIsImMiLCJjb3MiLCJlcSIsInJhZCIsImF0YW4yIiwiY3B5Iiwic3RyIiwibWF0IiwibSIsImVudHJpZXMiLCJjb25jYXQiLCJpZGVudGl0eSIsImdldCIsImoiLCJzZXQiLCJyb3ciLCJjb2wiLCJyZXN1bHQiLCJzY2FsZSIsInRyYW5zIiwiZmxhdCIsIm1pbm9yIiwiaWkiLCJqaiIsInB1c2giLCJkZXQiLCJzaWduIiwiZCIsImFkaiIsIm1pbm9ycyIsImNvZmFjdG9ycyIsImludiIsIm1zIiwibnMiLCJjaHVuayIsImpvaW4iLCJtb2R1bGUiLCJleHBvcnRzIiwiRGVidWciLCJvcHRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJtYXJnaW4iLCJwYWRkaW5nIiwiZm9udCIsImxpbmVIZWlnaHQiLCJmb3JlZ3JvdW5kQ29sb3VyIiwiYmFja2dyb3VuZENvbG91ciIsImRlZmF1bHRWYWx1ZSIsImFsaWduIiwic2hvd0xhYmVsIiwiZGVmYXVsdE1hcmtlciIsInNob3dWYWx1ZSIsInNob3dNYXJrZXIiLCJtYXJrZXJTaXplIiwibWFya2VyU3R5bGUiLCJtYXJrZXJDb2xvdXIiLCJzcGFjZSIsImxhYmVsT2Zmc2V0IiwiYXNzaWduIiwidmFsdWVzIiwiTWFwIiwibWFya2VycyIsImluc3RhbmNlIiwiaW5pdGlhbGlzZSIsImxhYmVsIiwiZGVidWciLCJnZXRJbnN0YW5jZSIsInBvc2l0aW9uIiwiY29udGV4dCIsInNhdmUiLCJjb25maWciLCJzY2FsZUZhY3RvciIsImZvckVhY2giLCJtYXJrZXIiLCJkcmF3TWFya2VyIiwicmVzdG9yZSIsInNldFRyYW5zZm9ybSIsImxlZnRZIiwicmlnaHRZIiwiY2FudmFzIiwiY2xpZW50V2lkdGgiLCJkcmF3TGFiZWwiLCJjbGVhciIsImxpbmVXaWR0aCIsInN0cm9rZVN0eWxlIiwiZmlsbFN0eWxlIiwiZHJhd0Nyb3NzIiwiZHJhd1BsdXMiLCJkcmF3RG90IiwidGV4dCIsInRleHRCYXNlbGluZSIsImJhY2tncm91bmRTaXplIiwid2lkdGgiLCJtZWFzdXJlVGV4dCIsImhlaWdodCIsImZpbGxSZWN0IiwiZmlsbFRleHQiLCJzaXplIiwiYmVnaW5QYXRoIiwiaGFsZlNpemUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJhcmMiLCJjb250YWluZXIiLCJmcmFtZVJhdGUiLCJmcmFtZUNvdW50IiwiRXJyb3IiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJnZXRDb250ZXh0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2l6ZSIsImJpbmQiLCJzdGF0ZU1hbmFnZXIiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJsYXN0RnJhbWVUaW1lIiwibGFzdEZyYW1lQ291bnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJsb29wIiwiZWxhcHNlZFRpbWUiLCJjb25zdGFudHMiLCJGUFNfTUlOIiwic2hvd0ZQUyIsInVwZGF0ZSIsImRyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJkdCIsImNsZWFyUmVjdCIsInN0YXRlcyIsInN0YXRlIiwidHJhbnNpdGlvbkluIiwibGFzdCIsInRyYW5zaXRpb25UeXBlIiwiU3RhdGVUcmFuc2l0aW9uVHlwZSIsIk91dCIsInRyYW5zaXRpb25PdXQiLCJ1cGRhdGVUcmFuc2l0aW9uIiwiZmlsdGVyIiwiZGlzcG9zZWQiLCJkcmF3U3RhdGVzIiwidHJhbnNwYXJlbnRTdGF0ZUluZGV4IiwidHJhbnNwYXJlbnQiLCJvbmxvYWQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJfX3dlYnBhY2tfbW9kdWxlc19f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QixPQUFPRixFQUF5QkUsR0FBVW5ILFFBRzNDLElBQUlELEVBQVNrSCxFQUF5QkUsR0FBWSxDQUdqRG5ILFFBQVMsSUFPVixPQUhBb0gsRUFBb0JELEdBQVVwSCxFQUFRQSxFQUFPQyxRQUFTa0gsR0FHL0NuSCxFQUFPQyxRQ2xCZmtILENBQW9CLE0iLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQG92ZXJ2aWV3IEEgbGlicmFyeSBvZiB1c2VmdWwgZnVuY3Rpb25zXG4gKiBAYXV0aG9yIEdvcmRvbiBMYXJyaWdhblxuICogQHZlcnNpb24gMS4yLjZcbiAqL1xuXG4vKiogQGNsYXNzIE1hdGggKi9cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gbnVtYmVycyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICogQHBhcmFtIHtudW1iZXJ9IGEgTnVtYmVyIGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIE51bWJlciBiXG4gKiBAcGFyYW0ge251bWJlcn0gW3A9TnVtYmVyLkVQU0lMT05dIFRoZSBwcmVjaXNpb24gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbnVtYmVycyBhIGFuZCBiIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKi9cbk1hdGguZmxvYXRFcXVhbHMgPSAoYSwgYiwgcCA9IE51bWJlci5FUFNJTE9OKSA9PiBNYXRoLmFicyhhIC0gYikgPCBwO1xuXG4vKipcbiAqIENsYW1wIGEgbnVtYmVyIGJldHdlZW4gbWluIGFuZCBtYXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIFRoZSBudW1iZXIgdG8gY2xhbXBcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWluPTBdIFRoZSBtaW5pbXVtIHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gW21heD0xXSBUaGUgbWF4aW11bSB2YWx1ZVxuICogQHJldHVybiB7bnVtYmVyfSBBIGNsYW1wZWQgbnVtYmVyXG4gKi9cbk1hdGguY2xhbXAgPSAoYSwgbWluID0gMCwgbWF4ID0gMSkgPT4gYSA8IG1pbiA/IG1pbiA6IChhID4gbWF4ID8gbWF4IDogYSk7XG5cbi8qKlxuICogR2V0IHRoZSBmcmFjdGlvbmFsIHBhcnQgb2YgYSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIFRoZSBudW1iZXIgZnJvbSB3aGljaCB0byBnZXQgdGhlIGZyYWN0aW9uYWwgcGFydFxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZnJhY3Rpb25hbCBwYXJ0IG9mIHRoZSBudW1iZXJcbiAqL1xuTWF0aC5mcmFjID0gYSA9PiBhID49IDAgPyBhIC0gTWF0aC5mbG9vcihhKSA6IGEgLSBNYXRoLmNlaWwoYSk7XG5cbi8qKlxuICogRG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIGEgYW5kIGJcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIFRoZSBtaW5pbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGIgVGhlIG1heGltdW0gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgaW50ZXJwb2xhdGlvbiB2YWx1ZSwgc2hvdWxkIGJlIGluIHRoZSBpbnRlcnZhbCBbMCwgMV1cbiAqIEByZXR1cm4ge251bWJlcn0gQW4gaW50ZXJwb2xhdGVkIHZhbHVlIGluIHRoZSBpbnRlcnZhbCBbYSwgYl1cbiAqL1xuTWF0aC5sZXJwID0gKGEsIGIsIGkpID0+IGEgKyAoYiAtIGEpICogaTtcblxuLyoqXG4gKiBHZXQgdGhlIHBvc2l0aW9uIG9mIGkgYmV0d2VlbiBhIGFuZCBiXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgbWluaW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBtYXhpbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIGludGVycG9sYXRlZCB2YWx1ZSBpbiB0aGUgaW50ZXJ2YWwgW2EsIGJdXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBwb3NpdGlvbiBvZiBpIGJldHdlZW4gYSBhbmQgYlxuICovXG5NYXRoLnVubGVycCA9IChhLCBiLCBpKSA9PiAoaSAtIGEpIC8gKGIgLSBhKTtcblxuLyoqXG4gKiBEbyBhIGJpbGluZWFyIGludGVycG9sYXRpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSBjMDAgVG9wLWxlZnQgdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjMTAgVG9wLXJpZ2h0IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gYzAxIEJvdHRvbS1sZWZ0IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gYzExIEJvdHRvbS1yaWdodCB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGl4IEludGVycG9sYXRpb24gdmFsdWUgYWxvbmcgeFxuICogQHBhcmFtIHtudW1iZXJ9IGl5IEludGVycG9sYXRpb24gdmFsdWUgYWxvbmcgeVxuICogQHJldHVybiB7bnVtYmVyfSBBIGJpbGluZWFyIGludGVycG9sYXRlZCB2YWx1ZVxuICovXG5NYXRoLmJsZXJwID0gKGMwMCwgYzEwLCBjMDEsIGMxMSwgaXgsIGl5KSA9PiBNYXRoLmxlcnAoTWF0aC5sZXJwKGMwMCwgYzEwLCBpeCksIE1hdGgubGVycChjMDEsIGMxMSwgaXgpLCBpeSk7XG5cbi8qKlxuICogUmUtbWFwIGEgbnVtYmVyIGkgZnJvbSByYW5nZSBhMS0+YTIgdG8gYjEtPmIyXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgbnVtYmVyIHRvIHJlLW1hcFxuICogQHBhcmFtIHtudW1iZXJ9IGExXG4gKiBAcGFyYW0ge251bWJlcn0gYTJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiMVxuICogQHBhcmFtIHtudW1iZXJ9IGIyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbk1hdGgucmVtYXAgPSAoaSwgYTEsIGEyLCBiMSwgYjIpID0+IGIxICsgKGkgLSBhMSkgKiAoYjIgLSBiMSkgLyAoYTIgLSBhMSk7XG5cbi8qKlxuICogRG8gYSBzbW9vdGggaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIGEgYW5kIGJcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIFRoZSBtaW5pbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGIgVGhlIG1heGltdW0gbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgaW50ZXJwb2xhdGlvbiB2YWx1ZVxuICogQHJldHVybiB7bnVtYmVyfSBBbiBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gdGhlIGludGVydmFsIFthLCBiXVxuICovXG5NYXRoLnNtb290aHN0ZXAgPSAoYSwgYiwgaSkgPT4gTWF0aC5sZXJwKGEsIGIsIDMgKiBNYXRoLnBvdyhpLCAyKSAtIDIgKiBNYXRoLnBvdyhpLCAzKSk7XG5cbi8qKlxuICogR2V0IGFuIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWVzIFRoZSBhbmdsZSBpbiBkZWdyZWVzXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKi9cbk1hdGgucmFkaWFucyA9IGRlZ3JlZXMgPT4gKE1hdGguUEkgLyAxODApICogZGVncmVlcztcblxuLyoqXG4gKiBHZXQgYW4gYW5nbGUgaW4gZGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IHJhZGlhbnMgVGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGFuZ2xlIGluIGRlZ3JlZXNcbiAqL1xuTWF0aC5kZWdyZWVzID0gcmFkaWFucyA9PiAoMTgwIC8gTWF0aC5QSSkgKiByYWRpYW5zO1xuXG4vKipcbiAqIEdldCBhIHJhbmRvbSBmbG9hdCBpbiB0aGUgaW50ZXJ2YWwgW21pbiwgbWF4KVxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiBJbmNsdXNpdmUgbWluXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IEV4Y2x1c2l2ZSBtYXhcbiAqIEByZXR1cm4ge251bWJlcn0gQSByYW5kb20gZmxvYXQgaW4gdGhlIGludGVydmFsIFttaW4sIG1heClcbiAqL1xuTWF0aC5yYW5kb21CZXR3ZWVuID0gKG1pbiwgbWF4KSA9PiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XG5cbi8qKlxuICogR2V0IGEgcmFuZG9tIGludGVnZXIgaW4gdGhlIGludGVydmFsIFttaW4sIG1heF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gSW5jbHVzaXZlIG1pblxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBJbmNsdXNpdmUgbWF4XG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgcmFuZG9tIGludGVnZXIgaW4gdGhlIGludGVydmFsIFttaW4sIG1heF1cbiAqL1xuTWF0aC5yYW5kb21JbnRCZXR3ZWVuID0gKG1pbiwgbWF4KSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xuXG4vKipcbiAqIEdldCBhIG5vcm1hbGx5LWRpc3RyaWJ1dGVkIHJhbmRvbSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbXU9MC41XSBUaGUgbWVhbiB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IFtzaWdtYT0wLjVdIFRoZSBzdGFuZGFyZCBkZXZpYXRpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc2FtcGxlcz0yXSBUaGUgbnVtYmVyIG9mIHNhbXBsZXNcbiAqIEByZXR1cm4ge251bWJlcn0gQSBub3JtYWxseS1kaXN0cmlidXRlZCByYW5kb20gbnVtYmVyXG4gKi9cbk1hdGguY2x0UmFuZG9tID0gKG11ID0gMC41LCBzaWdtYSA9IDAuNSwgc2FtcGxlcyA9IDIpID0+IHtcbiAgbGV0IHRvdGFsID0gMDtcbiAgZm9yIChsZXQgaSA9IHNhbXBsZXM7IGktLTspIHtcbiAgICB0b3RhbCArPSBNYXRoLnJhbmRvbSgpO1xuICB9XG4gIHJldHVybiBtdSArICh0b3RhbCAtIHNhbXBsZXMgLyAyKSAvIChzYW1wbGVzIC8gMikgKiBzaWdtYTtcbn07XG5cbi8qKlxuICogR2V0IGEgbm9ybWFsbHktZGlzdHJpYnV0ZWQgcmFuZG9tIGludGVnZXIgaW4gdGhlIGludGVydmFsIFttaW4sIG1heF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gSW5jbHVzaXZlIG1pblxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBJbmNsdXNpdmUgbWF4XG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbm9ybWFsbHktZGlzdHJpYnV0ZWQgcmFuZG9tIGludGVnZXJcbiAqL1xuTWF0aC5jbHRSYW5kb21JbnQgPSAobWluLCBtYXgpID0+IE1hdGguZmxvb3IobWluICsgTWF0aC5jbHRSYW5kb20oMC41LCAwLjUsIDIpICogKG1heCArIDEgLSBtaW4pKTtcblxuLyoqXG4gKiBSZXR1cm4gYSB3ZWlnaHRlZCByYW5kb20gaW50ZWdlclxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB3IEFuIGFycmF5IG9mIHdlaWdodHNcbiAqIEByZXR1cm4ge251bWJlcn0gQW4gaW5kZXggZnJvbSB3XG4gKi9cbk1hdGgud2VpZ2h0ZWRSYW5kb20gPSB3ID0+IHtcbiAgbGV0IHRvdGFsID0gdy5yZWR1Y2UoKGEsIGkpID0+IGEgKyBpLCAwKSwgbiA9IDA7XG4gIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogdG90YWw7XG4gIHdoaWxlICh0b3RhbCA+IHIpIHtcbiAgICB0b3RhbCAtPSB3W24rK107XG4gIH1cbiAgcmV0dXJuIG4gLSAxO1xufTtcblxuLyoqXG4gKiBBbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uXG4gKiBAY2FsbGJhY2sgaW50ZXJwb2xhdGlvbkNhbGxiYWNrXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgbWluaW11bSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBtYXhpbXVtIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIGludGVycG9sYXRpb24gdmFsdWUsIHNob3VsZCBiZSBpbiB0aGUgaW50ZXJ2YWwgWzAsIDFdXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gdGhlIGludGVydmFsIFthLCBiXVxuICovXG5cbi8qKlxuICogUmV0dXJuIGFuIGludGVycG9sYXRlZCB2YWx1ZSBmcm9tIGFuIGFycmF5XG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGEgQW4gYXJyYXkgb2YgdmFsdWVzIGludGVycG9sYXRlXG4gKiBAcGFyYW0ge251bWJlcn0gaSBBIG51bWJlciBpbiB0aGUgaW50ZXJ2YWwgWzAsIDFdXG4gKiBAcGFyYW0ge2ludGVycG9sYXRpb25DYWxsYmFja30gW2Y9TWF0aC5sZXJwXSBUaGUgaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiB0byB1c2VcbiAqIEByZXR1cm4ge251bWJlcn0gQW4gaW50ZXJwb2xhdGVkIHZhbHVlIGluIHRoZSBpbnRlcnZhbCBbbWluKGEpLCBtYXgoYSldXG4gKi9cbk1hdGgubGVycEFycmF5ID0gKGEsIGksIGYgPSBNYXRoLmxlcnApID0+IHtcbiAgY29uc3QgcyA9IGkgKiAoYS5sZW5ndGggLSAxKTtcbiAgY29uc3QgcCA9IE1hdGguY2xhbXAoTWF0aC50cnVuYyhzKSwgMCwgYS5sZW5ndGggLSAxKTtcbiAgcmV0dXJuIGYoYVtwXSB8fCAwLCBhW3AgKyAxXSB8fCAwLCBNYXRoLmZyYWMocykpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWN0b3JzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGEgVmVjdG9yIGFcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYiBWZWN0b3IgYlxuICogQHJldHVybiB7bnVtYmVyfSBhIOKImSBiXG4gKi9cbk1hdGguZG90ID0gKGEsIGIpID0+IGEucmVkdWNlKChuLCB2LCBpKSA9PiBuICsgdiAqIGJbaV0sIDApO1xuXG4vKiogQGNsYXNzIEFycmF5ICovXG5cbi8qKlxuICogQSBmdW5jdGlvbiBmb3IgZ2VuZXJhdGluZyBhcnJheSB2YWx1ZXNcbiAqIEBjYWxsYmFjayB0aW1lc0NhbGxiYWNrXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgYXJyYXkgaW5kZXhcbiAqIEByZXR1cm4geyp9IFRoZSBhcnJheSB2YWx1ZVxuICovXG5cbi8qKlxuICogUmV0dXJuIGEgbmV3IGFycmF5IHdpdGggbGVuZ3RoIG4gYnkgY2FsbGluZyBmdW5jdGlvbiBmKGkpIG9uIGVhY2ggZWxlbWVudFxuICogQHBhcmFtIHt0aW1lc0NhbGxiYWNrfSBmXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgc2l6ZSBvZiB0aGUgYXJyYXlcbiAqIEByZXR1cm4ge0FycmF5PCo+fVxuICovXG5BcnJheS50aW1lcyA9IChmLCBuKSA9PiBBcnJheShuKS5maWxsKDApLm1hcCgoXywgaSkgPT4gZihpKSk7XG5cbi8qKlxuICogUmV0dXJuIGFuIGFycmF5IGNvbnRhaW5pbmcgbnVtYmVycyAwLT4obiAtIDEpXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgc2l6ZSBvZiB0aGUgYXJyYXlcbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEFuIGFycmF5IG9mIGludGVnZXJzIDAtPihuIC0gMSlcbiAqL1xuQXJyYXkucmFuZ2UgPSBuID0+IEFycmF5LnRpbWVzKGkgPT4gaSwgbik7XG5cbi8qKlxuICogUmV0dXJuIGFycmF5W2ldIHdpdGggcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIHdyYXBwaW5nXG4gKiBAbmFtZSBhdFxuICogQGZ1bmN0aW9uXG4gKiBAbWVtYmVyb2YgQXJyYXkucHJvdG90eXBlXG4gKiBAcGFyYW0ge251bWJlcn0gaSBUaGUgcG9zaXRpdmVseS9uZWdhdGl2ZWx5IHdyYXBwZWQgYXJyYXkgaW5kZXhcbiAqIEByZXR1cm4geyp9IEFuIGVsZW1lbnQgZnJvbSB0aGUgYXJyYXlcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2F0Jywge1xuICB2YWx1ZTogZnVuY3Rpb24gKGkpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sZW5ndGg7XG4gICAgcmV0dXJuIHRoaXNbaSA8IDAgPyBsIC0gKE1hdGguYWJzKGkgKyAxKSAlIGwpIC0gMSA6IGkgJSBsXTtcbiAgfVxufSk7XG5cbi8qKlxuICogQ2hvcCBhbiBhcnJheSBpbnRvIGNodW5rcyBvZiBzaXplIG5cbiAqIEBuYW1lIGNodW5rXG4gKiBAZnVuY3Rpb25cbiAqIEBtZW1iZXJvZiBBcnJheS5wcm90b3R5cGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBjaHVuayBzaXplXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTwqPj59IEFuIGFycmF5IG9mIGFycmF5IGNodW5rc1xuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnY2h1bmsnLCB7XG4gIHZhbHVlOiBmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBBcnJheS50aW1lcyhpID0+IHRoaXMuc2xpY2UoaSAqIG4sIGkgKiBuICsgbiksIE1hdGguY2VpbCh0aGlzLmxlbmd0aCAvIG4pKTtcbiAgfVxufSk7XG5cbi8qKlxuICogUmFuZG9tbHkgc2h1ZmZsZSBhbiBhcnJheSBpbi1wbGFjZVxuICogQG5hbWUgc2h1ZmZsZVxuICogQGZ1bmN0aW9uXG4gKiBAbWVtYmVyb2YgQXJyYXkucHJvdG90eXBlXG4gKiBAcmV0dXJuIHtBcnJheTwqPn0gVGhlIHNodWZmbGVkIGFycmF5XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdzaHVmZmxlJywge1xuICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChhID0+IFtNYXRoLnJhbmRvbSgpLCBhXSkuc29ydCgoYSwgYikgPT4gYVswXSAtIGJbMF0pLm1hcChhID0+IGFbMV0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBBIDJkIHZlY3RvclxuICogQHR5cGVkZWYge09iamVjdH0gdmVjXG4gKiBAcHJvcGVydHkge251bWJlcn0geCBUaGUgeCBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxuICogQHByb3BlcnR5IHtudW1iZXJ9IHkgVGhlIHkgY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyB2ZWN0b3JcbiAqIEBwYXJhbSB7bnVtYmVyfHZlY30gW3hdIFRoZSB4IGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yLCBvciBhIHZlY3RvciB0byBjb3B5XG4gKiBAcGFyYW0ge251bWJlcn0gW3ldIFRoZSB5IGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXG4gKiBAcmV0dXJuIHt2ZWN9IEEgbmV3IHZlY3RvclxuICogQGV4YW1wbGUgPGNhcHRpb24+VmFyaW91cyB3YXlzIHRvIGluaXRpYWxpc2UgYSB2ZWN0b3I8L2NhcHRpb24+XG4gKiBsZXQgYSA9IHZlYygzLCAyKTsgIC8vICgzLCAyKVxuICogbGV0IGIgPSB2ZWMoNCk7ICAgICAvLyAoNCwgNClcbiAqIGxldCBjID0gdmVjKGEpOyAgICAgLy8gKDMsIDIpXG4gKiBsZXQgZCA9IHZlYygpOyAgICAgIC8vICgwLCAwKVxuICovXG5jb25zdCB2ZWMgPSAoeCwgeSkgPT4gKCF4ICYmICF5ID9cbiAgeyB4OiAwLCB5OiAwIH0gOiAodHlwZW9mIHggPT09ICdvYmplY3QnID9cbiAgICB7IHg6IHgueCB8fCAwLCB5OiB4LnkgfHwgMCB9IDogKHkgPT09IG51bGwgfHwgeSA9PT0gdW5kZWZpbmVkID9cbiAgICAgIHsgeDogeCwgeTogeCB9IDogeyB4OiB4LCB5OiB5IH0pXG4gIClcbik7XG5cbi8qKlxuICogR2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjdG9yIGFzIGFuIGFycmF5XG4gKiBAcGFyYW0ge3ZlY30gYSBUaGUgdmVjdG9yIHRvIGdldCBjb21wb25lbnRzIGZyb21cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSB2ZWN0b3IgY29tcG9uZW50cyBhcyBhbiBhcnJheVxuICovXG52ZWMuY29tcG9uZW50cyA9IGEgPT4gW2EueCwgYS55XTtcblxuLyoqXG4gKiBSZXR1cm4gYSB1bml0IHZlY3RvciAoMSwgMClcbiAqIEByZXR1cm4ge3ZlY30gQSB1bml0IHZlY3RvciAoMSwgMClcbiAqL1xudmVjLnV4ID0gKCkgPT4gdmVjKDEsIDApO1xuXG4vKipcbiAqIFJldHVybiBhIHVuaXQgdmVjdG9yICgwLCAxKVxuICogQHJldHVybiB7dmVjfSBBIHVuaXQgdmVjdG9yICgwLCAxKVxuICovXG52ZWMudXkgPSAoKSA9PiB2ZWMoMCwgMSk7XG5cbi8qKlxuICogQWRkIHZlY3RvcnNcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcGFyYW0ge3ZlY30gYiBWZWN0b3IgYlxuICogQHJldHVybiB7dmVjfSBhICsgYlxuICovXG52ZWMuYWRkID0gKGEsIGIpID0+ICh7IHg6IGEueCArIGIueCwgeTogYS55ICsgYi55IH0pO1xuXG4vKipcbiAqIFNjYWxlIGEgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHtudW1iZXJ9IGIgU2NhbGFyIGJcbiAqIEByZXR1cm4ge3ZlY30gYSAqIGJcbiAqL1xudmVjLm11bCA9IChhLCBiKSA9PiAoeyB4OiBhLnggKiBiLCB5OiBhLnkgKiBiIH0pO1xuXG4vKipcbiAqIFN1YnRyYWN0IHZlY3RvcnNcbiAqIEBwYXJhbSB7dmVjfSBhIFZlY3RvciBhXG4gKiBAcGFyYW0ge3ZlY30gYiBWZWN0b3IgYlxuICogQHJldHVybiB7dmVjfSBhIC0gYlxuICovXG52ZWMuc3ViID0gKGEsIGIpID0+ICh7IHg6IGEueCAtIGIueCwgeTogYS55IC0gYi55IH0pO1xuXG4vKipcbiAqIEdldCB0aGUgbGVuZ3RoIG9mIGEgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHJldHVybiB7bnVtYmVyfSB8YXxcbiAqL1xudmVjLmxlbiA9IGEgPT4gTWF0aC5zcXJ0KGEueCAqIGEueCArIGEueSAqIGEueSk7XG5cbi8qKlxuICogR2V0IHRoZSBsZW5ndGggb2YgYSB2ZWN0b3IgdXNpbmcgdGF4aWNhYiBnZW9tZXRyeVxuICogQHBhcmFtIHt2ZWN9IGEgVmVjdG9yIGFcbiAqIEByZXR1cm4ge251bWJlcn0gfGF8XG4gKi9cbnZlYy5tYW5oYXR0YW4gPSBhID0+IE1hdGguYWJzKGEueCkgKyBNYXRoLmFicyhhLnkpO1xuXG4vKipcbiAqIE5vcm1hbGlzZSBhIHZlY3RvclxuICogQHBhcmFtIHt2ZWN9IGEgVGhlIHZlY3RvciB0byBub3JtYWxpc2VcbiAqIEByZXR1cm4ge3ZlY30gXmFcbiAqL1xudmVjLm5vciA9IGEgPT4ge1xuICBsZXQgbGVuID0gdmVjLmxlbihhKTtcbiAgcmV0dXJuIGxlbiA/IHsgeDogYS54IC8gbGVuLCB5OiBhLnkgLyBsZW4gfSA6IHZlYygpO1xufTtcblxuLyoqXG4gKiBHZXQgYSBkb3QgcHJvZHVjdCBvZiB2ZWN0b3JzXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHt2ZWN9IGIgVmVjdG9yIGJcbiAqIEByZXR1cm4ge251bWJlcn0gYSDiiJkgYlxuICovXG52ZWMuZG90ID0gKGEsIGIpID0+IGEueCAqIGIueCArIGEueSAqIGIueTtcblxuLyoqXG4gKiBSb3RhdGUgYSB2ZWN0b3IgYnkgciByYWRpYW5zXG4gKiBAcGFyYW0ge3ZlY30gYSBUaGUgdmVjdG9yIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHIgVGhlIGFuZ2xlIHRvIHJvdGF0ZSBieSwgbWVhc3VyZWQgaW4gcmFkaWFuc1xuICogQHJldHVybiB7dmVjfSBBIHJvdGF0ZWQgdmVjdG9yXG4gKi9cbnZlYy5yb3QgPSAoYSwgcikgPT4ge1xuICBsZXQgcyA9IE1hdGguc2luKHIpLFxuICAgIGMgPSBNYXRoLmNvcyhyKTtcbiAgcmV0dXJuIHsgeDogYyAqIGEueCAtIHMgKiBhLnksIHk6IHMgKiBhLnggKyBjICogYS55IH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIHZlY3RvcnMgYXJlIGVxdWFsXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHt2ZWN9IGIgVmVjdG9yIGJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdmVjdG9ycyBhIGFuZCBiIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbnZlYy5lcSA9IChhLCBiKSA9PiBhLnggPT09IGIueCAmJiBhLnkgPT09IGIueTtcblxuLyoqXG4gKiBHZXQgdGhlIGFuZ2xlIG9mIGEgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYW5nbGUgb2YgdmVjdG9yIGEgaW4gcmFkaWFuc1xuICovXG52ZWMucmFkID0gYSA9PiBNYXRoLmF0YW4yKGEueSwgYS54KTtcblxuLyoqXG4gKiBDb3B5IGEgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlY30gYSBUaGUgdmVjdG9yIHRvIGNvcHlcbiAqIEByZXR1cm4ge3ZlY30gQSBjb3B5IG9mIHZlY3RvciBhXG4gKi9cbnZlYy5jcHkgPSBhID0+IHZlYyhhKTtcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRvIGNhbGwgb24gZWFjaCBjb21wb25lbnQgb2YgYSB2ZWN0b3JcbiAqIEBjYWxsYmFjayB2ZWN0b3JNYXBDYWxsYmFja1xuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBjb21wb25lbnQgdmFsdWVcbiAqIEBwYXJhbSB7J3gnIHwgJ3knfSBsYWJlbCBUaGUgY29tcG9uZW50IGxhYmVsICh4IG9yIHkpXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXBwZWQgY29tcG9uZW50XG4gKi9cblxuLyoqXG4gKiBDYWxsIGEgZnVuY3Rpb24gb24gZWFjaCBjb21wb25lbnQgb2YgYSB2ZWN0b3IgYW5kIGJ1aWxkIGEgbmV3IHZlY3RvciBmcm9tIHRoZSByZXN1bHRzXG4gKiBAcGFyYW0ge3ZlY30gYSBWZWN0b3IgYVxuICogQHBhcmFtIHt2ZWN0b3JNYXBDYWxsYmFja30gZiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBvbiBlYWNoIGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXG4gKiBAcmV0dXJuIHt2ZWN9IFZlY3RvciBhIG1hcHBlZCB0aHJvdWdoIGZcbiAqL1xudmVjLm1hcCA9IChhLCBmKSA9PiAoeyB4OiBmKGEueCwgJ3gnKSwgeTogZihhLnksICd5JykgfSk7XG5cbi8qKlxuICogQ29udmVydCBhIHZlY3RvciBpbnRvIGEgc3RyaW5nXG4gKiBAcGFyYW0ge3ZlY30gYSBUaGUgdmVjdG9yIHRvIGNvbnZlcnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcz0nLCAnXSBUaGUgc2VwYXJhdG9yIHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVjdG9yXG4gKi9cbnZlYy5zdHIgPSAoYSwgcyA9ICcsICcpID0+IGAke2EueH0ke3N9JHthLnl9YDtcblxuLyoqXG4gKiBBIG1hdHJpeFxuICogQHR5cGVkZWYge09iamVjdH0gbWF0XG4gKiBAcHJvcGVydHkge251bWJlcn0gbSBUaGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIG1hdHJpeFxuICogQHByb3BlcnR5IHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBtYXRyaXhcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gZW50cmllcyBUaGUgbWF0cml4IHZhbHVlc1xuICovXG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IG1hdHJpeFxuICogQHBhcmFtIHtudW1iZXJ9IFttPTRdIFRoZSBudW1iZXIgb2Ygcm93c1xuICogQHBhcmFtIHtudW1iZXJ9IFtuPTRdIFRoZSBudW1iZXIgb2YgY29sdW1uc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbZW50cmllcz1bXV0gTWF0cml4IHZhbHVlcyBpbiByZWFkaW5nIG9yZGVyXG4gKiBAcmV0dXJuIHttYXR9IEEgbmV3IG1hdHJpeFxuICovXG5jb25zdCBtYXQgPSAobSA9IDQsIG4gPSA0LCBlbnRyaWVzID0gW10pID0+ICh7XG4gIG0sIG4sXG4gIGVudHJpZXM6IGVudHJpZXMuY29uY2F0KEFycmF5KG0gKiBuKS5maWxsKDApKS5zbGljZSgwLCBtICogbilcbn0pO1xuXG4vKipcbiAqIEdldCBhbiBpZGVudGl0eSBtYXRyaXggb2Ygc2l6ZSBuXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgc2l6ZSBvZiB0aGUgbWF0cml4XG4gKiBAcmV0dXJuIHttYXR9IEFuIGlkZW50aXR5IG1hdHJpeFxuICovXG5tYXQuaWRlbnRpdHkgPSBuID0+IG1hdChuLCBuLCBBcnJheShuICogbikuZmlsbCgwKS5tYXAoKHYsIGkpID0+ICsoTWF0aC5mbG9vcihpIC8gbikgPT09IGkgJSBuKSkpO1xuXG4vKipcbiAqIEdldCBhbiBlbnRyeSBmcm9tIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHtudW1iZXJ9IGkgVGhlIHJvdyBvZmZzZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBqIFRoZSBjb2x1bW4gb2Zmc2V0XG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB2YWx1ZSBhdCBwb3NpdGlvbiAoaSwgaikgaW4gbWF0cml4IGFcbiAqL1xubWF0LmdldCA9IChhLCBpLCBqKSA9PiBhLmVudHJpZXNbKGogLSAxKSArIChpIC0gMSkgKiBhLm5dO1xuXG4vKipcbiAqIFNldCBhbiBlbnRyeSBvZiBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSByb3cgb2Zmc2V0XG4gKiBAcGFyYW0ge251bWJlcn0gaiBUaGUgY29sdW1uIG9mZnNldFxuICogQHBhcmFtIHtudW1iZXJ9IHYgVGhlIHZhbHVlIHRvIHNldCBpbiBtYXRyaXggYVxuICovXG5tYXQuc2V0ID0gKGEsIGksIGosIHYpID0+IHsgYS5lbnRyaWVzWyhqIC0gMSkgKyAoaSAtIDEpICogYS5uXSA9IHY7IH07XG5cbi8qKlxuICogR2V0IGEgcm93IGZyb20gYSBtYXRyaXggYXMgYW4gYXJyYXlcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge251bWJlcn0gbSBUaGUgcm93IG9mZnNldFxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gUm93IG0gZnJvbSBtYXRyaXggYVxuICovXG5tYXQucm93ID0gKGEsIG0pID0+IHtcbiAgY29uc3QgcyA9IChtIC0gMSkgKiBhLm47XG4gIHJldHVybiBhLmVudHJpZXMuc2xpY2UocywgcyArIGEubik7XG59O1xuXG4vKipcbiAqIEdldCBhIGNvbHVtbiBmcm9tIGEgbWF0cml4IGFzIGFuIGFycmF5XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIGNvbHVtbiBvZmZzZXRcbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IENvbHVtbiBuIGZyb20gbWF0cml4IGFcbiAqL1xubWF0LmNvbCA9IChhLCBuKSA9PiBBcnJheS50aW1lcyhpID0+IG1hdC5nZXQoYSwgKGkgKyAxKSwgbiksIGEubSk7XG5cbi8qKlxuICogQWRkIG1hdHJpY2VzXG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHttYXR9IGIgTWF0cml4IGJcbiAqIEByZXR1cm4ge21hdH0gYSArIGJcbiAqL1xubWF0LmFkZCA9IChhLCBiKSA9PiBhLm0gPT09IGIubSAmJiBhLm4gPT09IGIubiAmJiBtYXQubWFwKGEsICh2LCBpKSA9PiB2ICsgYi5lbnRyaWVzW2ldKTtcblxuLyoqXG4gKiBTdWJ0cmFjdCBtYXRyaWNlc1xuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bWF0fSBiIE1hdHJpeCBiXG4gKiBAcmV0dXJuIHttYXR9IGEgLSBiXG4gKi9cbm1hdC5zdWIgPSAoYSwgYikgPT4gYS5tID09PSBiLm0gJiYgYS5uID09PSBiLm4gJiYgbWF0Lm1hcChhLCAodiwgaSkgPT4gdiAtIGIuZW50cmllc1tpXSk7XG5cbi8qKlxuICogTXVsdGlwbHkgbWF0cmljZXNcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge21hdH0gYiBNYXRyaXggYlxuICogQHJldHVybiB7bWF0fGJvb2xlYW59IGFiIG9yIGZhbHNlIGlmIHRoZSBtYXRyaWNlcyBjYW5ub3QgYmUgbXVsdGlwbGllZFxuICovXG5tYXQubXVsID0gKGEsIGIpID0+IHtcbiAgaWYgKGEubiAhPT0gYi5tKSB7IHJldHVybiBmYWxzZTsgfVxuICBjb25zdCByZXN1bHQgPSBtYXQoYS5tLCBiLm4pO1xuICBmb3IgKGxldCBpID0gMTsgaSA8PSBhLm07IGkrKykge1xuICAgIGZvciAobGV0IGogPSAxOyBqIDw9IGIubjsgaisrKSB7XG4gICAgICBtYXQuc2V0KHJlc3VsdCwgaSwgaiwgTWF0aC5kb3QobWF0LnJvdyhhLCBpKSwgbWF0LmNvbChiLCBqKSkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBTY2FsZSBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFNjYWxhciBiXG4gKiBAcmV0dXJuIHttYXR9IGEgKiBiXG4gKi9cbm1hdC5zY2FsZSA9IChhLCBiKSA9PiBtYXQubWFwKGEsIHYgPT4gdiAqIGIpO1xuXG4vKipcbiAqIFRyYW5zcG9zZSBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgVGhlIG1hdHJpeCB0byB0cmFuc3Bvc2VcbiAqIEByZXR1cm4ge21hdH0gQSB0cmFuc3Bvc2VkIG1hdHJpeFxuICovXG5tYXQudHJhbnMgPSBhID0+IG1hdChhLm4sIGEubSwgQXJyYXkudGltZXMoaSA9PiBtYXQuY29sKGEsIChpICsgMSkpLCBhLm4pLmZsYXQoKSk7XG5cbi8qKlxuICogR2V0IHRoZSBtaW5vciBvZiBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgTWF0cml4IGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIFRoZSByb3cgb2Zmc2V0XG4gKiBAcGFyYW0ge251bWJlcn0gaiBUaGUgY29sdW1uIG9mZnNldFxuICogQHJldHVybiB7bWF0fGJvb2xlYW59IFRoZSAoaSwgaikgbWlub3Igb2YgbWF0cml4IGEgb3IgZmFsc2UgaWYgdGhlIG1hdHJpeCBpcyBub3Qgc3F1YXJlXG4gKi9cbm1hdC5taW5vciA9IChhLCBpLCBqKSA9PiB7XG4gIGlmIChhLm0gIT09IGEubikgeyByZXR1cm4gZmFsc2U7IH1cbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBmb3IgKGxldCBpaSA9IDE7IGlpIDw9IGEubTsgaWkrKykge1xuICAgIGlmIChpaSA9PT0gaSkgeyBjb250aW51ZTsgfVxuICAgIGZvciAobGV0IGpqID0gMTsgamogPD0gYS5uOyBqaisrKSB7XG4gICAgICBpZiAoamogPT09IGopIHsgY29udGludWU7IH1cbiAgICAgIGVudHJpZXMucHVzaChtYXQuZ2V0KGEsIGlpLCBqaikpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWF0KGEubSAtIDEsIGEubiAtIDEsIGVudHJpZXMpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGRldGVybWluYW50IG9mIGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHJldHVybiB7bnVtYmVyfGJvb2xlYW59IHxhfCBvciBmYWxzZSBpZiB0aGUgbWF0cml4IGlzIG5vdCBzcXVhcmVcbiAqL1xubWF0LmRldCA9IGEgPT4ge1xuICBpZiAoYS5tICE9PSBhLm4pIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGlmIChhLm0gPT09IDEpIHtcbiAgICByZXR1cm4gYS5lbnRyaWVzWzBdO1xuICB9XG4gIGlmIChhLm0gPT09IDIpIHtcbiAgICByZXR1cm4gYS5lbnRyaWVzWzBdICogYS5lbnRyaWVzWzNdIC0gYS5lbnRyaWVzWzFdICogYS5lbnRyaWVzWzJdO1xuICB9XG4gIGxldCB0b3RhbCA9IDAsIHNpZ24gPSAxO1xuICBmb3IgKGxldCBqID0gMTsgaiA8PSBhLm47IGorKykge1xuICAgIHRvdGFsICs9IHNpZ24gKiBhLmVudHJpZXNbaiAtIDFdICogbWF0LmRldChtYXQubWlub3IoYSwgMSwgaikpO1xuICAgIHNpZ24gKj0gLTE7XG4gIH1cbiAgcmV0dXJuIHRvdGFsO1xufTtcblxuLyoqXG4gKiBOb3JtYWxpc2UgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIFRoZSBtYXRyaXggdG8gbm9ybWFsaXNlXG4gKiBAcmV0dXJuIHttYXR8Ym9vbGVhbn0gXmEgb3IgZmFsc2UgaWYgdGhlIG1hdHJpeCBpcyBub3Qgc3F1YXJlXG4gKi9cbm1hdC5ub3IgPSBhID0+IHtcbiAgaWYgKGEubSAhPT0gYS5uKSB7IHJldHVybiBmYWxzZTsgfVxuICBjb25zdCBkID0gbWF0LmRldChhKTtcbiAgcmV0dXJuIG1hdC5tYXAoYSwgaSA9PiBpICogZCk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgYWRqdWdhdGUgb2YgYSBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0fSBhIFRoZSBtYXRyaXggZnJvbSB3aGljaCB0byBnZXQgdGhlIGFkanVnYXRlXG4gKiBAcmV0dXJuIHttYXR9IFRoZSBhZGp1Z2F0ZSBvZiBhXG4gKi9cbm1hdC5hZGogPSBhID0+IHtcbiAgY29uc3QgbWlub3JzID0gbWF0KGEubSwgYS5uKTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gYS5tOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBhLm47IGorKykge1xuICAgICAgbWF0LnNldChtaW5vcnMsIGksIGosIG1hdC5kZXQobWF0Lm1pbm9yKGEsIGksIGopKSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGNvZmFjdG9ycyA9IG1hdC5tYXAobWlub3JzLCAodiwgaSkgPT4gdiAqIChpICUgMiA/IC0xIDogMSkpO1xuICByZXR1cm4gbWF0LnRyYW5zKGNvZmFjdG9ycyk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgaW52ZXJzZSBvZiBhIG1hdHJpeFxuICogQHBhcmFtIHttYXR9IGEgVGhlIG1hdHJpeCB0byBpbnZlcnRcbiAqIEByZXR1cm4ge21hdHxib29sZWFufSBhXi0xIG9yIGZhbHNlIGlmIHRoZSBtYXRyaXggaGFzIG5vIGludmVyc2VcbiAqL1xubWF0LmludiA9IGEgPT4ge1xuICBpZiAoYS5tICE9PSBhLm4pIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGNvbnN0IGQgPSBtYXQuZGV0KGEpO1xuICBpZiAoZCA9PT0gMCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgcmV0dXJuIG1hdC5zY2FsZShtYXQuYWRqKGEpLCAxIC8gZCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHR3byBtYXRyaWNlcyBhcmUgZXF1YWxcbiAqIEBwYXJhbSB7bWF0fSBhIE1hdHJpeCBhXG4gKiBAcGFyYW0ge21hdH0gYiBNYXRyaXggYlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtYXRyaWNlcyBhIGFuZCBiIGFyZSBpZGVudGljYWwsIGZhbHNlIG90aGVyd2lzZVxuICovXG5tYXQuZXEgPSAoYSwgYikgPT4gYS5tID09PSBiLm0gJiYgYS5uID09PSBiLm4gJiYgbWF0LnN0cihhKSA9PT0gbWF0LnN0cihiKTtcblxuLyoqXG4gKiBDb3B5IGEgbWF0cml4XG4gKiBAcGFyYW0ge21hdH0gYSBUaGUgbWF0cml4IHRvIGNvcHlcbiAqIEByZXR1cm4ge21hdH0gQSBjb3B5IG9mIG1hdHJpeCBhXG4gKi9cbm1hdC5jcHkgPSBhID0+IG1hdChhLm0sIGEubiwgWy4uLmEuZW50cmllc10pO1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gdG8gY2FsbCBvbiBlYWNoIGVudHJ5IG9mIGEgbWF0cml4XG4gKiBAY2FsbGJhY2sgbWF0cml4TWFwQ2FsbGJhY2tcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgZW50cnkgdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgZW50cnkgaW5kZXhcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW50cmllcyBUaGUgYXJyYXkgb2YgbWF0cml4IGVudHJpZXNcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1hcHBlZCBlbnRyeVxuICovXG5cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIG9uIGVhY2ggZW50cnkgb2YgYSBtYXRyaXggYW5kIGJ1aWxkIGEgbmV3IG1hdHJpeCBmcm9tIHRoZSByZXN1bHRzXG4gKiBAcGFyYW0ge21hdH0gYSBNYXRyaXggYVxuICogQHBhcmFtIHttYXRyaXhNYXBDYWxsYmFja30gZiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBvbiBlYWNoIGVudHJ5IG9mIHRoZSBtYXRyaXhcbiAqIEByZXR1cm4ge21hdH0gTWF0cml4IGEgbWFwcGVkIHRocm91Z2ggZlxuICovXG5tYXQubWFwID0gKGEsIGYpID0+IG1hdChhLm0sIGEubiwgYS5lbnRyaWVzLm1hcChmKSk7XG5cbi8qKlxuICogQ29udmVydCBhIG1hdHJpeCBpbnRvIGEgc3RyaW5nXG4gKiBAcGFyYW0ge21hdH0gYSBUaGUgbWF0cml4IHRvIGNvbnZlcnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbXM9JywgJ10gVGhlIHNlcGFyYXRvciBzdHJpbmcgZm9yIGNvbHVtbnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbnM9J1xcbiddIFRoZSBzZXBhcmF0b3Igc3RyaW5nIGZvciByb3dzXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtYXRyaXhcbiAqL1xubWF0LnN0ciA9IChhLCBtcyA9ICcsICcsIG5zID0gJ1xcbicpID0+IGEuZW50cmllcy5jaHVuayhhLm4pLm1hcChyID0+IHIuam9pbihtcykpLmpvaW4obnMpO1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSB7IHZlYywgbWF0IH07XG59XG4iLCJpbXBvcnQgeyB2ZWMgfSBmcm9tIFwiQGJhc2VtZW50dW5pdmVyc2UvY29tbW9uanNcIjtcbmltcG9ydCAqIGFzIGNvbmZpZyBmcm9tICcuL2NvbmZpZy5qc29uJztcblxudHlwZSBEZWJ1Z09wdGlvbnMgPSB7XG4gIG1hcmdpbjogbnVtYmVyLFxuICBwYWRkaW5nOiBudW1iZXIsXG4gIGZvbnQ6IHN0cmluZyxcbiAgbGluZUhlaWdodDogbnVtYmVyLFxuICBmb3JlZ3JvdW5kQ29sb3VyOiBDb2xvdXIsXG4gIGJhY2tncm91bmRDb2xvdXI6IENvbG91cixcbiAgZGVmYXVsdFZhbHVlOiBEZWJ1Z1ZhbHVlLFxuICBkZWZhdWx0TWFya2VyOiBEZWJ1Z01hcmtlclxufTtcblxudHlwZSBEZWJ1Z1ZhbHVlID0ge1xuICBsYWJlbD86IHN0cmluZyxcbiAgdmFsdWU/OiBudW1iZXIgfCBzdHJpbmcsXG4gIGFsaWduOiAnbGVmdCcgfCAncmlnaHQnLFxuICBzaG93TGFiZWw6IGJvb2xlYW4sXG4gIHBhZGRpbmc/OiBudW1iZXIsXG4gIGZvbnQ/OiBzdHJpbmcsXG4gIGZvcmVncm91bmRDb2xvdXI/OiBDb2xvdXIsXG4gIGJhY2tncm91bmRDb2xvdXI/OiBDb2xvdXJcbn07XG5cbnR5cGUgRGVidWdNYXJrZXIgPSB7XG4gIGxhYmVsPzogc3RyaW5nLFxuICB2YWx1ZT86IG51bWJlciB8IHN0cmluZyxcbiAgcG9zaXRpb24/OiB2ZWMsXG4gIHNob3dMYWJlbDogYm9vbGVhbixcbiAgc2hvd1ZhbHVlOiBib29sZWFuLFxuICBzaG93TWFya2VyOiBib29sZWFuLFxuICBtYXJrZXJTaXplOiBudW1iZXIsXG4gIG1hcmtlclN0eWxlOiAneCcgfCAnKycgfCAnLicsXG4gIG1hcmtlckNvbG91cjogQ29sb3VyLFxuICBzcGFjZTogJ3dvcmxkJyB8ICdzY3JlZW4nLFxuICBwYWRkaW5nPzogbnVtYmVyLFxuICBmb250Pzogc3RyaW5nLFxuICBsYWJlbE9mZnNldDogdmVjLFxuICBmb3JlZ3JvdW5kQ29sb3VyPzogQ29sb3VyLFxuICBiYWNrZ3JvdW5kQ29sb3VyPzogQ29sb3VyXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWJ1ZyB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBEZWJ1ZztcbiAgcHJpdmF0ZSB2YWx1ZXM6IE1hcDxzdHJpbmcsIERlYnVnVmFsdWU+O1xuICBwcml2YXRlIG1hcmtlcnM6IE1hcDxzdHJpbmcsIERlYnVnTWFya2VyPjtcbiAgcHJpdmF0ZSBvcHRpb25zOiBEZWJ1Z09wdGlvbnNcbiAgcHJpdmF0ZSByZWFkb25seSBkZWZhdWx0T3B0aW9uczogRGVidWdPcHRpb25zID0ge1xuICAgIG1hcmdpbjogMTAsXG4gICAgcGFkZGluZzogNCxcbiAgICBmb250OiAnMTBwdCBMdWNpZGEgQ29uc29sZSwgbW9ub3NwYWNlJyxcbiAgICBsaW5lSGVpZ2h0OiAxMixcbiAgICBmb3JlZ3JvdW5kQ29sb3VyOiAnI2ZmZicsXG4gICAgYmFja2dyb3VuZENvbG91cjogJyMzMzM4JyxcbiAgICBkZWZhdWx0VmFsdWU6IHtcbiAgICAgIGFsaWduOiAnbGVmdCcsXG4gICAgICBzaG93TGFiZWw6IHRydWVcbiAgICB9LFxuICAgIGRlZmF1bHRNYXJrZXI6IHtcbiAgICAgIHNob3dMYWJlbDogdHJ1ZSxcbiAgICAgIHNob3dWYWx1ZTogdHJ1ZSxcbiAgICAgIHNob3dNYXJrZXI6IHRydWUsXG4gICAgICBtYXJrZXJTaXplOiA2LFxuICAgICAgbWFya2VyU3R5bGU6ICd4JyxcbiAgICAgIG1hcmtlckNvbG91cjogJyNjY2MnLFxuICAgICAgc3BhY2U6ICd3b3JsZCcsXG4gICAgICBsYWJlbE9mZnNldDogdmVjKDEwKVxuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFBhcnRpYWw8RGVidWdPcHRpb25zPiA9IHt9KSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgdGhpcy52YWx1ZXMgPSBuZXcgTWFwPHN0cmluZywgRGVidWdWYWx1ZT4oKTtcbiAgICB0aGlzLm1hcmtlcnMgPSBuZXcgTWFwPHN0cmluZywgRGVidWdNYXJrZXI+KCk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGlzZSB0aGUgZGVidWcgaW5zdGFuY2VcbiAgICogQHBhcmFtIG9wdGlvbnMgUmVuZGVyaW5nIG9wdGlvbnNcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGlzZShvcHRpb25zOiBQYXJ0aWFsPERlYnVnT3B0aW9ucz4gPSB7fSk6IHZvaWQge1xuICAgIERlYnVnLmluc3RhbmNlID0gbmV3IERlYnVnKG9wdGlvbnMpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRGVidWcge1xuICAgIGlmIChEZWJ1Zy5pbnN0YW5jZSA9PSBudWxsKSB7XG4gICAgICBEZWJ1Zy5pbml0aWFsaXNlKCk7XG4gICAgfVxuICAgIHJldHVybiBEZWJ1Zy5pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgZGVidWcgdmFsdWVcbiAgICogQHBhcmFtIGxhYmVsIFRoZSBsYWJlbCBmb3IgdGhpcyB2YWx1ZVxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIGN1cnJlbnQgdmFsdWVcbiAgICogQHBhcmFtIG9wdGlvbnMgUmVuZGVyaW5nIG9wdGlvbnNcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgdmFsdWUobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZyB8IG51bWJlciwgb3B0aW9uczogUGFydGlhbDxEZWJ1Z1ZhbHVlPiA9IHt9KTogdm9pZCB7XG4gICAgY29uc3QgZGVidWcgPSBEZWJ1Zy5nZXRJbnN0YW5jZSgpO1xuICAgIGRlYnVnLnZhbHVlcy5zZXQobGFiZWwsIE9iamVjdC5hc3NpZ24oXG4gICAgICB7IGxhYmVsLCB2YWx1ZSB9LFxuICAgICAgZGVidWcuZGVmYXVsdE9wdGlvbnMuZGVmYXVsdFZhbHVlLFxuICAgICAgb3B0aW9uc1xuICAgICkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgYSBtYXJrZXIgaW4gd29ybGQgb3Igc2NyZWVuIHNwYWNlXG4gICAqIEBwYXJhbSBsYWJlbCBUaGUgbGFiZWwgZm9yIHRoaXMgbWFya2VyXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgY3VycmVudCB2YWx1ZVxuICAgKiBAcGFyYW0gcG9zaXRpb24gVGhlIHBvc2l0aW9uIG9mIHRoaXMgbWFya2VyXG4gICAqIEBwYXJhbSBvcHRpb25zIFJlbmRlcmluZyBvcHRpb25zXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIG1hcmtlcihsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyLCBwb3NpdGlvbjogdmVjLCBvcHRpb25zOiBQYXJ0aWFsPERlYnVnTWFya2VyPiA9IHt9KTogdm9pZCB7XG4gICAgY29uc3QgZGVidWcgPSBEZWJ1Zy5nZXRJbnN0YW5jZSgpO1xuICAgIGRlYnVnLm1hcmtlcnMuc2V0KGxhYmVsLCBPYmplY3QuYXNzaWduKFxuICAgICAgeyBsYWJlbCwgdmFsdWUsIHBvc2l0aW9uIH0sXG4gICAgICBkZWJ1Zy5kZWZhdWx0T3B0aW9ucy5kZWZhdWx0TWFya2VyLFxuICAgICAgb3B0aW9uc1xuICAgICkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBkZWJ1ZyB2YWx1ZXMgYW5kIG1hcmtlcnMgb250byB0aGUgY29udGV4dFxuICAgKiBAcGFyYW0gY29udGV4dCBUaGUgcmVuZGVyaW5nIGNvbnRleHRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcbiAgICBjb25zdCBkZWJ1ZyA9IERlYnVnLmdldEluc3RhbmNlKCk7XG5cbiAgICAvLyBEcmF3IHdvcmxkLXNwYWNlIG1hcmtlcnNcbiAgICBjb250ZXh0LnNhdmUoKTtcbiAgICBjb250ZXh0LnNjYWxlKDEgLyBjb25maWcuc2NhbGVGYWN0b3IsIDEgLyBjb25maWcuc2NhbGVGYWN0b3IpO1xuICAgIGRlYnVnLm1hcmtlcnMuZm9yRWFjaChtYXJrZXIgPT4ge1xuICAgICAgaWYgKG1hcmtlci5zcGFjZSA9PT0gJ3dvcmxkJykge1xuICAgICAgICBkZWJ1Zy5kcmF3TWFya2VyKGNvbnRleHQsIG1hcmtlcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG5cbiAgICAvLyBEcmF3IHZhbHVlcyBhbmQgc2NyZWVuLXNwYWNlIG1hcmtlcnNcbiAgICBjb250ZXh0LnNhdmUoKTtcbiAgICBjb250ZXh0LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgICBsZXQgcG9zaXRpb246IHZlYztcbiAgICBsZXQgbGVmdFkgPSBkZWJ1Zy5vcHRpb25zLm1hcmdpbjtcbiAgICBsZXQgcmlnaHRZID0gZGVidWcub3B0aW9ucy5tYXJnaW47XG4gICAgY29uc3QgbGluZUhlaWdodCA9IChkZWJ1Zy5vcHRpb25zLmxpbmVIZWlnaHQgKyBkZWJ1Zy5vcHRpb25zLnBhZGRpbmcgKiAyKTtcbiAgICBkZWJ1Zy52YWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBzd2l0Y2ggKHZhbHVlLmFsaWduKSB7XG4gICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgIHBvc2l0aW9uID0gdmVjKGRlYnVnLm9wdGlvbnMubWFyZ2luLCBsZWZ0WSk7XG4gICAgICAgICAgbGVmdFkgKz0gbGluZUhlaWdodDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgIHBvc2l0aW9uID0gdmVjKGNvbnRleHQuY2FudmFzLmNsaWVudFdpZHRoIC0gZGVidWcub3B0aW9ucy5tYXJnaW4sIHJpZ2h0WSk7XG4gICAgICAgICAgcmlnaHRZICs9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWJ1Zy5kcmF3TGFiZWwoXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgICh2YWx1ZS5zaG93TGFiZWwgPyBgJHt2YWx1ZS5sYWJlbH06IGAgOiAnJykgKyBgJHt2YWx1ZS52YWx1ZX1gLFxuICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgdmFsdWUuYWxpZ24sXG4gICAgICAgIHZhbHVlLnBhZGRpbmcgPz8gZGVidWcub3B0aW9ucy5wYWRkaW5nLFxuICAgICAgICB2YWx1ZS5mb250ID8/IGRlYnVnLm9wdGlvbnMuZm9udCxcbiAgICAgICAgdmFsdWUuZm9yZWdyb3VuZENvbG91ciA/PyBkZWJ1Zy5vcHRpb25zLmZvcmVncm91bmRDb2xvdXIsXG4gICAgICAgIHZhbHVlLmJhY2tncm91bmRDb2xvdXIgPz8gZGVidWcub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3VyXG4gICAgICApO1xuICAgIH0pO1xuICAgIGRlYnVnLm1hcmtlcnMuZm9yRWFjaChtYXJrZXIgPT4ge1xuICAgICAgaWYgKG1hcmtlci5zcGFjZSA9PT0gJ3NjcmVlbicpIHtcbiAgICAgICAgZGVidWcuZHJhd01hcmtlcihjb250ZXh0LCBtYXJrZXIpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnRleHQucmVzdG9yZSgpO1xuXG4gICAgLy8gQ2xlYXIgdmFsdWVzIGFuZCBtYXJrZXJzIHJlYWR5IGZvciBuZXh0IGZyYW1lXG4gICAgZGVidWcudmFsdWVzLmNsZWFyKCk7XG4gICAgZGVidWcubWFya2Vycy5jbGVhcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBkcmF3TWFya2VyKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgbWFya2VyOiBEZWJ1Z01hcmtlcik6IHZvaWQge1xuICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgIGNvbnN0IHBvc2l0aW9uID0gdmVjLm11bChtYXJrZXIucG9zaXRpb24gPz8gdmVjKCksIGNvbmZpZy5zY2FsZUZhY3Rvcik7XG4gICAgaWYgKG1hcmtlci5zaG93TGFiZWwgfHwgbWFya2VyLnNob3dWYWx1ZSkge1xuICAgICAgdGhpcy5kcmF3TGFiZWwoXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIChtYXJrZXIuc2hvd0xhYmVsID8gYCR7bWFya2VyLmxhYmVsfTogYCA6ICcnKSArIChtYXJrZXIuc2hvd1ZhbHVlID8gYCR7bWFya2VyLnZhbHVlfWAgOiAnJyksXG4gICAgICAgIHZlYy5hZGQocG9zaXRpb24gPz8gdmVjKCksIG1hcmtlci5sYWJlbE9mZnNldCksXG4gICAgICAgICdsZWZ0JyxcbiAgICAgICAgbWFya2VyLnBhZGRpbmcgPz8gdGhpcy5vcHRpb25zLnBhZGRpbmcsXG4gICAgICAgIG1hcmtlci5mb250ID8/IHRoaXMub3B0aW9ucy5mb250LFxuICAgICAgICBtYXJrZXIuZm9yZWdyb3VuZENvbG91ciA/PyB0aGlzLm9wdGlvbnMuZm9yZWdyb3VuZENvbG91cixcbiAgICAgICAgbWFya2VyLmJhY2tncm91bmRDb2xvdXIgPz8gdGhpcy5vcHRpb25zLmJhY2tncm91bmRDb2xvdXJcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChtYXJrZXIuc2hvd01hcmtlcikge1xuICAgICAgY29udGV4dC5saW5lV2lkdGggPSAyO1xuICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbnRleHQuZmlsbFN0eWxlID0gbWFya2VyLm1hcmtlckNvbG91ciBhcyBzdHJpbmc7XG4gICAgICBzd2l0Y2ggKG1hcmtlci5tYXJrZXJTdHlsZSkge1xuICAgICAgICBjYXNlICd4JzpcbiAgICAgICAgICB0aGlzLmRyYXdDcm9zcyhjb250ZXh0LCBwb3NpdGlvbiwgbWFya2VyLm1hcmtlclNpemUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcrJzpcbiAgICAgICAgICB0aGlzLmRyYXdQbHVzKGNvbnRleHQsIHBvc2l0aW9uLCBtYXJrZXIubWFya2VyU2l6ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJy4nOlxuICAgICAgICAgIHRoaXMuZHJhd0RvdChjb250ZXh0LCBwb3NpdGlvbiwgbWFya2VyLm1hcmtlclNpemUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhd0xhYmVsKFxuICAgIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICB0ZXh0OiBzdHJpbmcsXG4gICAgcG9zaXRpb246IHZlYyxcbiAgICBhbGlnbjogJ2xlZnQnIHwgJ3JpZ2h0JyxcbiAgICBwYWRkaW5nOiBudW1iZXIsXG4gICAgZm9udDogc3RyaW5nLFxuICAgIGZvcmVncm91bmRDb2xvdXI6IENvbG91cixcbiAgICBiYWNrZ3JvdW5kQ29sb3VyOiBDb2xvdXJcbiAgKTogdm9pZCB7XG4gICAgY29udGV4dC5zYXZlKCk7XG4gICAgY29udGV4dC5mb250ID0gZm9udDtcbiAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9ICd0b3AnO1xuICAgIGNvbnN0IGJhY2tncm91bmRTaXplID0ge1xuICAgICAgd2lkdGg6IGNvbnRleHQubWVhc3VyZVRleHQodGV4dCkud2lkdGggKyBwYWRkaW5nICogMixcbiAgICAgIGhlaWdodDogdGhpcy5vcHRpb25zLmxpbmVIZWlnaHQgKyBwYWRkaW5nICogMlxuICAgIH07XG4gICAgY29uc3QgeCA9IGFsaWduID09PSAncmlnaHQnID8gKHBvc2l0aW9uLnggLSBiYWNrZ3JvdW5kU2l6ZS53aWR0aCkgOiBwb3NpdGlvbi54O1xuXG4gICAgLy8gRHJhdyBiYWNrZ3JvdW5kXG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBiYWNrZ3JvdW5kQ29sb3VyIGFzIHN0cmluZztcbiAgICBjb250ZXh0LmZpbGxSZWN0KFxuICAgICAgeCAtIHBhZGRpbmcsXG4gICAgICBwb3NpdGlvbi55IC0gcGFkZGluZyxcbiAgICAgIGJhY2tncm91bmRTaXplLndpZHRoLFxuICAgICAgYmFja2dyb3VuZFNpemUuaGVpZ2h0XG4gICAgKTtcblxuICAgIC8vIERyYXcgdGV4dFxuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZENvbG91ciBhcyBzdHJpbmc7XG4gICAgY29udGV4dC5maWxsVGV4dCh0ZXh0LCB4LCBwb3NpdGlvbi55KTtcbiAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhd0Nyb3NzKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgcG9zaXRpb246IHZlYywgc2l6ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICBjb25zdCBoYWxmU2l6ZSA9IHNpemUgLyAyO1xuICAgIGNvbnRleHQubW92ZVRvKHBvc2l0aW9uLnggLSBoYWxmU2l6ZSwgcG9zaXRpb24ueSAtIGhhbGZTaXplKTtcbiAgICBjb250ZXh0LmxpbmVUbyhwb3NpdGlvbi54ICsgaGFsZlNpemUsIHBvc2l0aW9uLnkgKyBoYWxmU2l6ZSk7XG4gICAgY29udGV4dC5tb3ZlVG8ocG9zaXRpb24ueCAtIGhhbGZTaXplLCBwb3NpdGlvbi55ICsgaGFsZlNpemUpO1xuICAgIGNvbnRleHQubGluZVRvKHBvc2l0aW9uLnggKyBoYWxmU2l6ZSwgcG9zaXRpb24ueSAtIGhhbGZTaXplKTtcbiAgICBjb250ZXh0LnN0cm9rZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBkcmF3UGx1cyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHBvc2l0aW9uOiB2ZWMsIHNpemU6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29uc3QgaGFsZlNpemUgPSBzaXplIC8gMjtcbiAgICBjb250ZXh0Lm1vdmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55IC0gaGFsZlNpemUpO1xuICAgIGNvbnRleHQubGluZVRvKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkgKyBoYWxmU2l6ZSk7XG4gICAgY29udGV4dC5tb3ZlVG8ocG9zaXRpb24ueCAtIGhhbGZTaXplLCBwb3NpdGlvbi55KTtcbiAgICBjb250ZXh0LmxpbmVUbyhwb3NpdGlvbi54ICsgaGFsZlNpemUsIHBvc2l0aW9uLnkpO1xuICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gIH1cblxuICBwcml2YXRlIGRyYXdEb3QoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBwb3NpdGlvbjogdmVjLCBzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIGNvbnRleHQuYXJjKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHNpemUgLyAyLCAwLCBNYXRoLlBJICogMik7XG4gICAgY29udGV4dC5maWxsKCk7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIGNvbmZpZyBmcm9tICcuL2NvbmZpZy5qc29uJztcbmltcG9ydCAqIGFzIGNvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgRGVidWcgZnJvbSAnLi9EZWJ1Zyc7XG5pbXBvcnQgU3RhdGVNYW5hZ2VyIGZyb20gJy4vU3RhdGVNYW5hZ2VyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHJpdmF0ZSBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIHByaXZhdGUgbGFzdEZyYW1lVGltZTogbnVtYmVyO1xuICBwcml2YXRlIGxhc3RGcmFtZUNvdW50VGltZTogbnVtYmVyO1xuICBwcml2YXRlIGZyYW1lUmF0ZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBmcmFtZUNvdW50OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBzdGF0ZU1hbmFnZXI6IFN0YXRlTWFuYWdlcjtcblxuICBjb25zdHJ1Y3Rvcihjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCkge1xuICAgIGlmIChjb250YWluZXIgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQSB2YWxpZCBjb250YWluZXIgZWxlbWVudCBtdXN0IGJlIHNwZWNpZmllZC4nKTtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lci50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdjYW52YXMnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRhaW5lciBlbGVtZW50IG11c3QgYmUgYSBjYW52YXMuJyk7XG4gICAgfVxuICAgIHRoaXMuY2FudmFzID0gY29udGFpbmVyIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgLy8gR2V0IGEgMmQgY29udGV4dFxuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGlmIChjb250ZXh0ICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBnZXQgYSAyZCBjb250ZXh0LlwiKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcmVzaXplXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVzaXplLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICB0aGlzLnJlc2l6ZSgpO1xuXG4gICAgLy8gSW5pdGlhbGlzZSBzdWJzeXN0ZW1zLi4uXG4gICAgRGVidWcuaW5pdGlhbGlzZSgpO1xuICAgIHRoaXMuc3RhdGVNYW5hZ2VyID0gbmV3IFN0YXRlTWFuYWdlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNpemUoKTogdm9pZCB7XG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgICAvLyBEaXNhYmxlIGltYWdlIHNtb290aGluZyBmb3IgcGl4ZWxhdGVkIGdyYXBoaWNzXG4gICAgdGhpcy5jb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGluaXRpYWxpc2UoKTogdm9pZCB7XG5cbiAgICAvLyBMb2FkIGNvbnRlbnQgYXNzZXRzIGFuZCBwdXNoIGxvYWRpbmcgc3RhdGVcbiAgICAvLyAuLi5cblxuICAgIC8vIFN0YXJ0IHRoZSBnYW1lIGxvb3BcbiAgICB0aGlzLmxhc3RGcmFtZVRpbWUgPSB0aGlzLmxhc3RGcmFtZUNvdW50VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHRoaXMubG9vcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBsb29wKCk6IHZvaWQge1xuICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gTWF0aC5taW4obm93IC0gdGhpcy5sYXN0RnJhbWVUaW1lLCBjb25zdGFudHMuRlBTX01JTik7XG5cbiAgICAvLyBDYWxjdWxhdGUgZnJhbWVyYXRlXG4gICAgaWYgKG5vdyAtIHRoaXMubGFzdEZyYW1lQ291bnRUaW1lID49IDEwMDApIHtcbiAgICAgIHRoaXMubGFzdEZyYW1lQ291bnRUaW1lID0gbm93O1xuICAgICAgdGhpcy5mcmFtZVJhdGUgPSB0aGlzLmZyYW1lQ291bnQ7XG4gICAgICB0aGlzLmZyYW1lQ291bnQgPSAwO1xuICAgIH1cbiAgICB0aGlzLmZyYW1lQ291bnQrKztcbiAgICB0aGlzLmxhc3RGcmFtZVRpbWUgPSBub3c7XG4gICAgaWYgKGNvbmZpZy5zaG93RlBTKSB7XG4gICAgICBEZWJ1Zy52YWx1ZSgnRlBTJywgdGhpcy5mcmFtZVJhdGUsIHsgYWxpZ246ICdyaWdodCcgfSk7XG4gICAgfVxuXG4gICAgLy8gRG8gZ2FtZSBsb29wXG4gICAgdGhpcy51cGRhdGUoZWxhcHNlZFRpbWUpO1xuICAgIHRoaXMuZHJhdygpO1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5sb29wLmJpbmQodGhpcykpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc3RhdGVNYW5hZ2VyLnVwZGF0ZShkdCk7XG4gIH1cblxuICBwcml2YXRlIGRyYXcoKTogdm9pZCB7XG4gICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgICB0aGlzLmNvbnRleHQuc2V0VHJhbnNmb3JtKGNvbmZpZy5zY2FsZUZhY3RvciwgMCwgMCwgY29uZmlnLnNjYWxlRmFjdG9yLCAwLCAwKTtcbiAgICB0aGlzLnN0YXRlTWFuYWdlci5kcmF3KHRoaXMuY29udGV4dCk7XG4gICAgRGVidWcuZHJhdyh0aGlzLmNvbnRleHQpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vU3RhdGUnO1xuaW1wb3J0IHsgU3RhdGVUcmFuc2l0aW9uVHlwZSB9IGZyb20gJy4vZW51bXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0ZU1hbmFnZXIge1xuICBwcml2YXRlIHN0YXRlczogU3RhdGVbXSA9IFtdO1xuXG4gIHB1YmxpYyBwdXNoKHN0YXRlOiBTdGF0ZSk6IFN0YXRlIHtcbiAgICB0aGlzLnN0YXRlcy5wdXNoKHN0YXRlKTtcblxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgc3RhdGUgaGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBzdGF0ZSBtYW5hZ2VyXG4gICAgc3RhdGUuc3RhdGVNYW5hZ2VyID0gdGhpcztcblxuICAgIC8vIEluaXRpYWxpc2UgdGhlIHN0YXRlIGFuZCBzdGFydCB0cmFuc2l0aW9uaW5nIGluXG4gICAgc3RhdGUuaW5pdGlhbGlzZSgpO1xuICAgIHN0YXRlLnRyYW5zaXRpb25JbigpO1xuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG4gIHB1YmxpYyBwb3AoKTogU3RhdGUgfCBudWxsIHtcbiAgICBpZiAodGhpcy5zdGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGxhc3Q6IG51bWJlciA9IHRoaXMuc3RhdGVzLmxlbmd0aCAtIDE7XG5cbiAgICAgIC8vIFJlbW92ZSB0aGUgdG9wLW1vc3Qgc3RhdGUgdGhhdCBpc24ndCBjdXJyZW50bHkgdHJhbnNpdGlvbmluZyBvdXRcbiAgICAgIHdoaWxlIChsYXN0ID4gMCAmJiB0aGlzLnN0YXRlc1tsYXN0XS50cmFuc2l0aW9uVHlwZSA9PT0gU3RhdGVUcmFuc2l0aW9uVHlwZS5PdXQpIHtcbiAgICAgICAgbGFzdC0tO1xuICAgICAgfVxuICAgICAgaWYgKGxhc3QgPj0gMCkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVzW2xhc3RdO1xuXG4gICAgICAgIC8vIFN0YXJ0IHRyYW5zaXRpb25pbmcgb3V0XG4gICAgICAgIHN0YXRlLnRyYW5zaXRpb25PdXQoKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXRlcy5mb3JFYWNoKHN0YXRlID0+IHtcbiAgICAgIGlmIChzdGF0ZS50cmFuc2l0aW9uVHlwZSAhPT0gU3RhdGVUcmFuc2l0aW9uVHlwZS5PdXQpIHtcbiAgICAgICAgc3RhdGUudHJhbnNpdGlvbk91dCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3RhdGVzLmxlbmd0aCA+IDApIHtcblxuICAgICAgLy8gT25seSB1cGRhdGUgdGhlIHRvcC1tb3N0IHN0YXRlIHRoYXQgaXNuJ3QgY3VycmVudGx5IHRyYW5zaXRpb25pbmcgb3V0XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZXMubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlc1tpXS50cmFuc2l0aW9uVHlwZSAhPT0gU3RhdGVUcmFuc2l0aW9uVHlwZS5PdXQpIHtcbiAgICAgICAgICB0aGlzLnN0YXRlc1tpXS51cGRhdGUoZHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBhbGwgc3RhdGUgdHJhbnNpdGlvbnNcbiAgICAgIHRoaXMuc3RhdGVzLmZvckVhY2goc3RhdGUgPT4ge1xuICAgICAgICBzdGF0ZS51cGRhdGVUcmFuc2l0aW9uKGR0KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZW1vdmUgYW55IGRpc3Bvc2VkIHN0YXRlc1xuICAgICAgdGhpcy5zdGF0ZXMgPSB0aGlzLnN0YXRlcy5maWx0ZXIoc3RhdGUgPT4gIXN0YXRlLmRpc3Bvc2VkKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZHJhd1N0YXRlcyA9IFt0aGlzLnN0YXRlc1t0aGlzLnN0YXRlcy5sZW5ndGggLSAxXV07XG4gICAgICBsZXQgdHJhbnNwYXJlbnRTdGF0ZUluZGV4ID0gdGhpcy5zdGF0ZXMubGVuZ3RoIC0gMTtcblxuICAgICAgLy8gQ3JlYXRlIGEgbGlzdCBvZiBzdGF0ZXMgdGhhdCBuZWVkIHRvIGJlIGRyYXduICh0cmFuc3BhcmVudCBzdGF0ZXMgYWxzbyBkaXNwbGF5XG4gICAgICAvLyB0aGUgc3RhdGUgdW5kZXJuZWF0aCB0aGVtIGluIHRoZSBzdGFjaylcbiAgICAgIHdoaWxlIChcbiAgICAgICAgdHJhbnNwYXJlbnRTdGF0ZUluZGV4ID4gMCAmJlxuICAgICAgICB0aGlzLnN0YXRlc1t0cmFuc3BhcmVudFN0YXRlSW5kZXhdLnRyYW5zcGFyZW50XG4gICAgICApIHtcbiAgICAgICAgZHJhd1N0YXRlcy5wdXNoKHRoaXMuc3RhdGVzWy0tdHJhbnNwYXJlbnRTdGF0ZUluZGV4XSk7XG4gICAgICB9XG5cbiAgICAgIC8vIERyYXcgc3RhdGVzIGluIHJldmVyc2Ugb3JkZXIgaS5lLiBib3R0b20gdG8gdG9wXG4gICAgICBmb3IgKGxldCBpID0gZHJhd1N0YXRlcy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgZHJhd1N0YXRlc1tpXS5kcmF3KGNvbnRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IEZQU19NSU4gPSAxIC8gMzA7XG4iLCJleHBvcnQgZW51bSBTdGF0ZVRyYW5zaXRpb25UeXBlIHtcbiAgSW4sXG4gIE91dCxcbiAgTm9uZVxufVxuIiwiaW1wb3J0IEdhbWUgZnJvbSAnLi9HYW1lJztcblxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgY29uc3QgZ2FtZSA9IG5ldyBHYW1lKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnYW1lJykpO1xuICBnYW1lLmluaXRpYWxpc2UoKTtcbn07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4vLyBUaGlzIGVudHJ5IG1vZHVsZSB1c2VkICdleHBvcnRzJyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG4iXSwic291cmNlUm9vdCI6IiJ9